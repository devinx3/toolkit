"use strict";(self.webpackChunktoolkit=self.webpackChunktoolkit||[]).push([[326],{4326:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var t=r(7313),i=r(7978),c=r(5291),l=r(8197),s=r(9624),a=r(9491),o=r(1656),d=r(685),u=r(473),x=r(7222),j=r(6155),p=r(2231),h=r(3495),g=r(6986),f=r(1526),Z=r(571),b=r(3988),y=r(3036),m=r(1677),k=r(6417),O=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i.Z.Title,{level:3,children:"\u5e2e\u52a9\u6587\u6863"}),(0,k.jsx)(i.Z.Title,{level:4,children:"\u4f7f\u7528\u4ecb\u7ecd"}),(0,k.jsx)(i.Z.Paragraph,{children:"\u65b9\u6cd5\u7684\u5165\u53c2\u4e3a:inputData, inputObj, Util"}),(0,k.jsx)(i.Z.Paragraph,{children:"\u65b9\u6cd5\u7684\u8fd4\u56de\u503c: \u5982\u679c\u8fd4\u56de Object, \u5c06\u4f1a\u88ab\u8f6c\u6362\u6210\u5b57\u7b26\u4e32"}),(0,k.jsxs)(i.Z.Paragraph,{children:[(0,k.jsx)(i.Z.Text,{code:!0,copyable:!0,children:"inputData"}),": \u8f93\u5165\u6570\u636e"]}),(0,k.jsxs)(i.Z.Paragraph,{children:[(0,k.jsx)(i.Z.Text,{code:!0,copyable:!0,children:"inputObj"}),": \u8f93\u5165\u6570\u636e\u8f6c\u6362\u7684Json\u5bf9\u8c61"]}),(0,k.jsxs)(i.Z.Paragraph,{children:[(0,k.jsx)(i.Z.Text,{code:!0,copyable:!0,children:"Util"}),": \u5185\u7f6e\u7684\u5de5\u5177\u7c7b"]}),(0,k.jsxs)(i.Z.Paragraph,{children:["\u4f7f\u7528\u8005\u4ec5\u4ec5\u9700\u8981\u5b9e\u73b0",(0,k.jsx)("b",{children:"\u65b9\u6cd5\u4f53"})]}),(0,k.jsx)(i.Z.Title,{level:5,children:"\u8f6c\u6362\u65b9\u6cd5\u6837\u4f8b"}),(0,k.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,k.jsx)(i.Z.Paragraph,{code:!0,copyable:{text:"return inputObj;"},children:"function anonymous(inputData, inputObj, Util) {\n    // \u5904\u7406\u903b\u8f91\n    return inputData;\n}"})}),(0,k.jsx)("br",{})]}),v=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i.Z.Title,{level:3,children:"\u5e38\u7528\u5de5\u5177"}),(0,k.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,k.jsx)(i.Z.Paragraph,{code:!0,children:"const { _, dayjs, message } = Util"})}),(0,k.jsxs)(i.Z.Paragraph,{children:[(0,k.jsx)(i.Z.Title,{level:5,children:"\u5de5\u5177\u5e93"}),(0,k.jsx)(i.Z.Text,{code:!0,children:"const { _ } = Util"}),(0,k.jsx)(i.Z.Link,{style:{marginLeft:"5px"},href:"https://www.lodashjs.com/",target:"_blank",children:"loadsh \u5b98\u7f51"})]}),(0,k.jsxs)(i.Z.Paragraph,{children:[(0,k.jsx)(i.Z.Title,{level:5,children:"\u65e5\u671f\u5de5\u5177"}),(0,k.jsx)(i.Z.Text,{code:!0,children:"const { dayjs } = Util"}),(0,k.jsx)(i.Z.Link,{style:{marginLeft:"5px"},href:"https://dayjs.gitee.io/zh-CN/",target:"_blank",children:"Day.js \u5b98\u7f51"})]}),(0,k.jsxs)(i.Z.Paragraph,{children:[(0,k.jsx)(i.Z.Title,{level:5,children:"\u6d88\u606f\u5de5\u5177"}),(0,k.jsx)(i.Z.Text,{code:!0,children:"const { message } = Util"}),(0,k.jsx)(i.Z.Text,{children:"\u6d88\u606f\u63d0\u793a\u65b9\u6cd5\uff0c\u4f7f\u7528\u65b9\u5f0f\u548c\u53c2\u6570\u5982\u4e0b:"}),(0,k.jsx)("br",{}),(0,k.jsx)(i.Z.Text,{children:"(content: \u6d88\u606f\u5185\u5bb9, duration: \u81ea\u52a8\u5173\u95ed\u7684\u5ef6\u65f6, \u5355\u4f4d\u79d2, \u8bbe\u4e3a0\u65f6\u4e0d\u81ea\u52a8\u5173\u95ed)"}),(0,k.jsx)("br",{}),(0,k.jsx)(i.Z.Text,{code:!0,children:"message.success(content, [duration])"}),(0,k.jsx)("br",{}),(0,k.jsx)(i.Z.Text,{code:!0,children:"message.error(content, [duration])"}),(0,k.jsx)("br",{}),(0,k.jsx)(i.Z.Text,{code:!0,children:"message.info(content, [duration])"}),(0,k.jsx)("br",{}),(0,k.jsx)(i.Z.Text,{code:!0,children:"message.warning(content, [duration])"}),(0,k.jsx)("br",{}),(0,k.jsx)(i.Z.Text,{code:!0,children:"message.loading(content, [duration])"})]})]}),T=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i.Z.Title,{level:3,children:"\u904d\u5386\u5bf9\u8c61"}),(0,k.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,k.jsx)(i.Z.Paragraph,{code:!0,copyable:!0,children:'/**\n * \u904d\u5386\u5bf9\u8c61, \u5e76\u4fee\u6539\u5b57\u6bb5\u548c\u503c\n * @param current       \u8f93\u5165\u5bf9\u8c61\n * @param parent        \u7236\u7ea7\u5bf9\u8c61; \u82e5\u4e3a\u7a7a, \u5219\u8ba4\u4e3a\u662f\u9876\u7ea7; {key, val, index} \n * @returns \u5904\u7406\u540e\u7684\u5bf9\u8c61\n */\nconst traverseObj = (current, parent) => {\n    if (current === undefined || current === null) {\n        return current;\n    }\n    if (current.constructor === Array) {\n        for (let index = 0; index < current.length; index++) {\n            current[index] = traverseObj(current[index], {key: parent && parent.key, val: current, index: index});\n        }\n    } else if (current.constructor === Object) {\n        for (let key in current) {\n            const newObj = traverseObj(current[key], {key: key, val: current});\n            if (parent) {\n                current[key] = newObj;\n            }\n        }\n    }\n    // \u903b\u8f91\u5904\u7406 TODO\n    return current;\n};\nconsole.log("inputObj", inputObj);\nreturn traverseObj(inputObj);'})})]}),w=function(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(m.Z,{placement:"rightTop",content:O,title:null,trigger:"click",children:(0,k.jsx)(a.Z,{type:"link",children:"\u5e2e\u52a9\u6587\u6863"})}),(0,k.jsx)(m.Z,{placement:"rightTop",content:v,title:null,trigger:"click",children:(0,k.jsx)(a.Z,{type:"link",children:"\u5e38\u7528\u5de5\u5177"})}),(0,k.jsx)(m.Z,{placement:"rightTop",content:T,title:null,trigger:"click",children:(0,k.jsx)(a.Z,{type:"link",children:"\u904d\u5386\u5bf9\u8c61\u6837\u4f8b"})})]})},C=r(7518),N=i.Z.Title,S=function(e){return!b.Z.isBlank(e)&&""!==e.trim()||"\u8bf7\u8f93\u5165JSON\u5b57\u7b26\u4e32"},P=1048576,_=2*P,D=function(e){var n=e.state,r=e.setCheckInputData,i=n.inputData,j=n.setInputData,f=n.outputData,m=n.setOutputData,O=n.errorMsg,v=n.setErrorMsg;r(S);var T=function(e,n){var r=S(e);if(!0===r)try{j(n(e)),v(null)}catch(t){v(t.message)}else v(r)};return t.useEffect((function(){f&&f.length>_&&(y.Z.download(f,"download.json"),v("\u6587\u4ef6\u8d85\u8fc7 ".concat(2," MB, \u5df2\u81ea\u52a8\u4e0b\u8f7d")),m(""))}),[f,v,m]),(0,k.jsxs)(l.Z,{style:{marginTop:"20px"},children:[(0,k.jsxs)(s.Z,{span:7,children:[(0,k.jsx)(a.Z,{size:"small",style:{backgroundColor:"#428bca",color:"#fff",borderColor:"#357ebd"},onClick:function(){T(i,(function(e){return JSON.stringify(JSON.parse(e),null,2)}))},children:"\u683c\u5f0f\u5316"}),(0,k.jsx)(a.Z,{size:"small",style:{marginLeft:"5px",backgroundColor:"#5cb85c",color:"#fff",borderColor:"#4cae4c"},onClick:function(e){T(i,(function(e){return JSON.stringify(JSON.parse(e))}))},children:"\u538b\u7f29"}),(0,k.jsx)(o.Z,{maxCount:1,beforeUpload:function(e){return y.Z.readAsText(e,j),!1},children:(0,k.jsx)(a.Z,{size:"small",icon:(0,k.jsx)(p.Z,{}),style:{marginLeft:"5px"},children:"\u5bfc\u5165"})}),(0,k.jsx)(d.Z.TextArea,{autoSize:{minRows:25,maxRows:40},style:{marginTop:"5px"},rows:30,placeholder:"\u5f85\u5904\u7406\u7684JSON\u7247\u6bb5",value:i,onChange:function(e){j(e.target.value),m(""),v("")}})]}),(0,k.jsx)(s.Z,{span:10,style:{marginLeft:"30px"},children:b.Z.isBlank(O)?b.Z.isBlank(f)||f.length>_?null:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(x.Z,{title:"\u8986\u76d6\u5f85\u5904\u7406\u8f93\u5165\u6846",children:(0,k.jsx)(a.Z,{type:"text",icon:(0,k.jsx)(h.Z,{}),onClick:function(){return j(f)}})}),(0,k.jsx)(Z.Z,{type:"text",onClick:function(){if(b.Z.copyToClipboard(f))return c.ZP.info("\u590d\u5236\u6210\u529f"),!0},size:"small"}),(0,k.jsx)(x.Z,{title:"\u4e0b\u8f7d",children:(0,k.jsx)(g.Z,{style:{marginLeft:"8px"},onClick:function(){y.Z.download(f,"output.json")}})}),(0,k.jsx)("pre",{children:f})]}):(0,k.jsx)(u.Z,{message:O,type:"error"})})]})},J=function e(n){for(var r in n)if(void 0===n[r]||null===n[r]||""===n[r])delete n[r];else if(n[r].constructor===Object)0===Object.keys(n[r]).length&&delete n[r],e(n[r]);else if(n[r].constructor===Array)if(Array.prototype.isPrototypeOf(n[r])&&0===n[r].length)delete n[r];else for(var t=0;t<n[r].length;t++)void 0!==n[r][t]&&null!==n[r][t]&&""!==n[r][t]&&"{}"!==JSON.stringify(n[r][t])||(n[r].splice(t,1),t--),n[r][t].constructor!==Object&&n[r][t].constructor!==Array||e(n[r][t]);return n},U=function e(n){if(void 0===n||null===n)return n;var r=function(e){var n={};for(var r in e){n[r.replace(/_(\w)/g,(function(e,n){return n.toUpperCase()}))]=e[r]}return n};if(n.constructor===Array){for(var t=0;t<n.length;t++)n[t]=e(n[t]);return n}if(n.constructor===Object){if(void 0===(n=r(n))||null===n)return;for(var i in n)!n[i]||n[i].constructor!==Object&&n[i].constructor!==Array||(n[i]=e(n[i]))}return n},A=function(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N,{level:3,children:"\u7f16\u8f91JSON"}),(0,k.jsx)(j.Z,{}),(0,k.jsx)(f.Z,{lang:C.b.JSON,manage:{buttons:[{name:"\u5220\u9664\u7a7a\u5b57\u6bb5",description:"\u5220\u9664\u503c\u4e3a\u7a7a\u7684\u5b57\u6bb5",scriptContent:"const _INNER_ = ".concat(J.toString(),";return _INNER_(inputObj);")},{name:"\u4e0b\u5212\u7ebf\u8f6c\u9a7c\u5cf0",description:"JSON key \u4e0b\u5212\u7ebf\u8f6c\u9a7c\u5cf0",scriptContent:"const _INNER_ = ".concat(U.toString(),";return _INNER_(inputObj);")}],expandScriptButton:{name:"\u81ea\u5b9a\u4e49\u914d\u7f6e",description:"\u652f\u6301\u8f6c\u6362\u548c\u6dfb\u52a0\u81ea\u5b9a\u4e49\u914d\u7f6e",scriptContent:"return inputObj;"},expandCombinationButton:{name:"\u81ea\u5b9a\u4e49\u7ec4\u5408",description:"\u652f\u6301\u591a\u811a\u672c\u987a\u5e8f\u6267\u884c"},editorHelpRender:w},dataBlockRender:D})]})}}}]);