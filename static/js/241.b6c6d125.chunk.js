(self.webpackChunktoolkit=self.webpackChunktoolkit||[]).push([[241],{15511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>gt});var i=n(47313),r=n(68197),s=n(59624),o=n(61763),a=n(23232),c=n(52984),l=n.n(c),d=n(87518);const p=(()=>{const e={encrypt:e=>e,decrypt:e=>e},t={};var n;return n={encrypt:(e,t)=>l().AES.encrypt(e,t).toString(),decrypt:(e,t)=>l().AES.decrypt(e,t).toString(l().enc.Utf8)},t[1]=n,n=>t[n]||e})();const u=new class{constructor(){this.featurePrefix="devinx3",this.verionPrefix="ver",this.fixVersion="000",this.fixSecret="ver000"}encrypt(e,t){return l().AES.encrypt(e,t).toString()}decrypt(e,t){return l().AES.decrypt(e,t).toString(l().enc.Utf8)}convertSecret(e){return e>=100&&e<=999?this.verionPrefix+e:this.fixSecret}getFeatureSuffix(e){return e===this.fixSecret?"S":"l"}getFeatureSecretIndex(e){if(e<100)return-1;const t=e-10-10,n=[],i=[17,27,23,3,19,11];for(let r=0;r<6;r++)n.push(10+(t*i[r]/30^0));return n}addSecret(e,t,n){return e.slice(0,t)+n+e.slice(t)}removeSecret(e,t){return e.slice(0,t)+e.slice(t+1)}convertBackupData(e,t,n,i){const r=p(n).encrypt(e,i);let s=this.convertSecret(t),o=this.encrypt(r,s);o.length<100&&(s=this.fixSecret,o=this.encrypt(r,s));const a=this.featurePrefix,c=o.length,l=this.getFeatureSuffix(s);if(s===this.fixSecret)return a+c+l+o;const d=this.getFeatureSecretIndex(c);let u=o;for(let p=d.length-1;p>=0;p--)u=this.addSecret(u,d[p],s[p]);return a+c+l+u}convertOriginData(e,t,n){if(!e)throw new Error("\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a");const i=e.slice(0,this.featurePrefix.length);if(i!==this.featurePrefix)throw new Error("\u5339\u914d\u7279\u5f81\u524d\u7f00\u5f02\u5e38");const r=i.length+10;let s="l",o=e.indexOf(s);if((o<0||o>=r)&&(s="S",o=e.indexOf(s),o<0||o>=r))throw new Error("\u5339\u914d\u7279\u5f81\u540e\u7f00\u5f02\u5e38");let a=Number(e.slice(i.length,o));if(!a)throw new Error("\u5339\u914d\u6570\u636e\u957f\u5ea6\u5f02\u5e38");const c=this.getFeatureSecretIndex(a),l=e.slice(o+1);let d="";if(-1===c)d=this.encrypt(e,l);else{let e=l,t="";for(let n=0;n<c.length;n++)t+=e[c[n]],e=this.removeSecret(e,c[n]);d=this.decrypt(e,t)}try{return p(t).decrypt(d,n)}catch(u){throw console.error(u),new Error("\u5bc6\u94a5\u9519\u8bef")}}},h=e=>l().MD5(e||"0").toString(l().enc.Hex),x=e=>(null===e||void 0===e?void 0:e.startsWith)&&e.startsWith(d.Je.PLATFORM),g=h,f=()=>parseInt(Math.floor(((new Date).getTime()-17040384e5)/1e3),10).toString(16),m=(e,t)=>{if(!e)return!0;if(!t)return!1;const n=parseInt(e,16);return parseInt(t,16)>n},y=e=>{const t=[];return e&&e.forEach(((e,n)=>{const i={...e};i.code=(e=>d.Je.PLATFORM+h(e))(e.code||n),t.push(i)})),t},C=e=>null!==e&&void 0!==e&&e.code?x(e.code):x(e),v=e=>"devinx3.toolkit.edit.config.".concat(e),j=e=>"devinx3.toolkit.edit.combination.".concat(e),S=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},Z={editConfig:"editConfig",editCombination:"editCombination"},b=(()=>{const e={},t=e=>({query:t=>S(e(t)),list:t=>{return n=e(t),S(n)||[];var n},store:(t,n)=>((e,t)=>{localStorage.setItem(e,JSON.stringify(t))})(e(t),n)});return{registerMapper:(n,i)=>e[n]=t(i),getMapper:t=>e[t]}})(),E={},P=(e,t)=>e+"|"+t;const w={createRepository:function(e){const t=b.getMapper(e),n=e=>t.list(e)||[];return{forceList:n,list:t=>{const i=P(e,t);let r=E[i];return void 0===r&&(r=n(t),E[i]=r),[...r]},store:(n,i)=>{var r;return t.store(n,i),r=P(e,n),E[r]=void 0,!0}}},TYPE:Z};b.registerMapper(Z.editConfig,v),b.registerMapper(Z.editCombination,j);const T=w;var A=void 0;const{createRepository:k,TYPE:I}=T;function R(e){const t=k(e);return{forceList:t.forceList,list:t.list,store:(n,i)=>{try{t.store(n,i)}catch(r){return console.log("store ".concat(e," error"),r),r.message}return!0}}}const N=R(I.editConfig),B=R(I.editCombination),L=(e,t,n)=>{const i=e.forceList(t);for(let r of i)if(r.code===n)throw new Error("\u7f16\u7801\u91cd\u590d, \u8bf7\u4fee\u6539\u51b2\u91cd\u65b0\u6dfb\u52a0");return!0},D=(()=>{let e=1;return()=>e++})(),O={listAllConfig:e=>N.list(e),queryConfigByCode:(e,t)=>((e,t,n)=>{const i=e.list(t),r=[];for(let s of i)s.code===n&&r.push(s);return r})(N,e,t),queryConfigByName:(e,t)=>{var n;return(null===(n=O.listAllConfig(e))||void 0===n?void 0:n.filter((e=>e.name===t)))||[]},addConfig:(e,t,n)=>{t.code=n?t.code:null,t.code||(t.code=g(t.name+"-"+(new Date).getTime()+"-"+D())),L(N,e,t.code);const i=O.listAllConfig(e);return i.push(t),N.store(e,i)},updateConfig:(e,t,n)=>{const i=O.listAllConfig(e);for(let r=0;r<i.length;r++)if(i[r].code===t.code)return i[r].name=t.name,i[r].description=t.description,i[r].scriptContent=t.scriptContent,i[r].hidden=t.hidden?1:void 0,i[r].version=n?t.version||void 0:f(),N.store(e,i);return!1},hiddenConfig:(e,t,n)=>{if(!t||0===t.length)return;const i=O.listAllConfig(e);for(let r=0;r<i.length;r++)t.includes(i[r].code)&&(i[r].hidden=n?1:void 0,i[r].version=f());return N.store(e,i)},deleteConfig:(e,t)=>O.batchDeleteConfig(e,[t]),batchDeleteConfig:(e,t)=>{if(!(t&&t.length&&t.length>0))return!0;const n=O.listAllConfig(e);let i=!1;for(let r=0;r<n.length;r++)if(t.indexOf(n[r].code)>=0){const t=O.checkCombinationByConfig(e,[n[r].code]);if(!0!==t)return"\u5f53\u524d\u8282\u70b9\u88ab\u7f16\u6392 ["+t+"] \u5f15\u7528";n.splice(r,1),r--,i=!0}return i?N.store(e,n):"\u6570\u636e\u4e0d\u5b58\u5728, \u8bf7\u5237\u65b0\u9875\u9762"},listAllCombination:e=>B.list(e),queryCombinationByCode:(e,t)=>((e,t,n)=>{const i=e.list(t);for(let r of i)if(r.id===n)return r;return null})(B,e,t),checkCombinationByConfig:(e,t)=>{for(let n of O.listAllCombination(e))if(n.combination)for(let e of n.combination)if(t.indexOf(e)>=0)return n.name||"-";return!0},addCombination:(e,t)=>{const n=O.listAllCombination(e);return t.code=g(t.name+"-"+(new Date).getTime()+"-"+D()),L(B,e,t.code),n.push(t),B.store(e,n)},updateCombination:(e,t)=>{const n=O.listAllCombination(e);for(let i=0;i<n.length;i++)if(n[i].code===t.code)return n[i].name=t.name,n[i].description=t.description,n[i].combination=t.combination,n[i].version=f(),B.store(e,n);return"\u6570\u636e\u4e0d\u5b58\u5728, \u8bf7\u5237\u65b0\u9875\u9762"},deleteCombination:(e,t)=>O.batchDeleteCombination(e,[t]),batchDeleteCombination:(e,t)=>{if(!(t&&t.length&&t.length>0))return!0;let n=!1;const i=O.listAllCombination(e);for(let r=0;r<i.length;r++)t.indexOf(i[r].code)>=0&&(i.splice(r,1),r--,n=!0);return n?B.store(e,i):"\u6570\u636e\u4e0d\u5b58\u5728, \u8bf7\u5237\u65b0\u9875\u9762"}},F=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(((t,i)=>{let r=!1;try{r=e.apply(A,n)}catch(s){i(s.message)}!0===r?t.apply(A,n):r instanceof Array?t.apply(A,[r]):r instanceof Object?t.apply(A,r):i(r)}))},K=O;var M=n(7432),U=n(67407),$=n(46968),q=n(23983),V=n(66672),J=n(43299),z=n(3490),_=n(79036),H=n(24718),W=(n(8110),n(9518)),G=n.n(W);const X=e=>{let{ts:t}=e;const n=(()=>{const e=/^\t+$/,t=/^ +$/;return{AllTabs:e,AllSpaces:t,adjustMultilineIndentation:function(n,i,r){if(!i)return n;const s=/\r?\n/,o=n.split(s);if(1===o.length)return n;const a=s.exec(n)[0];return o.map(((n,s)=>s>0?function(n,i,r){const s=/^[\t ]+/.exec(n);if(!s)return n;const o=s[0];if(e.test(o)&&i<=o.length)return n.substring(i);if(t.test(o)&&i<=o.length/r)return n.substring(i*r);return n}(n,i,r):n)).join(a)},adjustLeadingWhitespace:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.split(/\r?\n/).map(((e,n)=>n?t+e:e)).join("\n")}}})(),i={findNodeAtPosition:(e,n)=>{const i=[];e.statements.forEach((function r(s){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=s.getStart(e),c=s.getEnd();(!t.isToken(s)||t.isIdentifier(s)||t.isTypeNode(s))&&a<=n&&n<c&&i.push({depth:o,node:s,width:c-a}),s.getChildren(e).forEach((e=>r(e,o+1)))}));const r=i.sort(((e,t)=>e.width===t.width?t.depth-e.depth:e.width-t.width));return r.length>0&&r[0].node},findClosestParent:(e,t)=>{for(;e&&e.kind!==t;)e=e.parent;return e},isAssignmentBinaryExpression:e=>[t.SyntaxKind.EqualsToken,t.SyntaxKind.PlusEqualsToken,t.SyntaxKind.MinusEqualsToken,t.SyntaxKind.SlashEqualsToken,t.SyntaxKind.AsteriskEqualsToken,t.SyntaxKind.AsteriskAsteriskEqualsToken,t.SyntaxKind.AmpersandEqualsToken,t.SyntaxKind.BarEqualsToken,t.SyntaxKind.BarBarEqualsToken,t.SyntaxKind.CaretEqualsToken,t.SyntaxKind.LessThanLessThanToken,t.SyntaxKind.LessThanLessThanEqualsToken,t.SyntaxKind.GreaterThanEqualsToken,t.SyntaxKind.GreaterThanGreaterThanEqualsToken,t.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken,t.SyntaxKind.AmpersandAmpersandEqualsToken,t.SyntaxKind.QuestionQuestionToken,t.SyntaxKind.BarBarEqualsToken].includes(e.operatorToken.kind)},r=(()=>{const e=/^(get|read|create|retrieve|select|modify|update|use|find)(?<name>[A-Z].+?)?$/,n=/((By|With|From).*$)|(Sync$)|.*(?=Items|Lines$)/,i=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function r(e){const t=null===e||void 0===e?void 0:e.replace(n,"");return[...new Set([t,e])].filter((e=>e))}function s(t){var n,i;return null===(n=e.exec(t))||void 0===n||null===(i=n.groups)||void 0===i?void 0:i.name}function o(e){return t.isIdentifier(e.expression)?e.expression.text:t.isPropertyAccessExpression(e.expression)?e.expression.name.text:void 0}function a(e){return t.isIdentifier(e.expression)?e.expression.text:t.isPropertyAccessExpression(e.expression)?e.expression.name.text:void 0}return{inferVarTemplateName:e=>{if(t.isNewExpression(e))return[i(a(e))];if(t.isCallExpression(e)){const t=s(o(e));if(!t)return;return r(t).map(i)}},inferForVarTemplate:e=>{const n=function(e){if(t.isIdentifier(e))return e.text;if(t.isPropertyAccessExpression(e))return e.name.text;if(t.isCallExpression(e))return o(e)}(e);if(!n)return;const a=t.isCallExpression(e)?s(n):n.replace(/^(?:all)?(.+?)(?:List)?$/,"$1");return r(a).map(G().singular).filter((e=>e!==a)).map(i)}}})();return{getIndentCharacters:e=>e?e.insertSpaces?" ".repeat(e.tabSize):"\t":"",getPlaceholderWithOptions:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.length>1?"${".concat(t,"|").concat(e.join(","),"|}"):"${".concat(t,":").concat(e[0],"}")},AllTabs:n.AllTabs,AllSpaces:n.AllSpaces,adjustMultilineIndentation:n.adjustMultilineIndentation,adjustLeadingWhitespace:n.adjustLeadingWhitespace,findNodeAtPosition:i.findNodeAtPosition,findClosestParent:i.findClosestParent,isAssignmentBinaryExpression:i.isAssignmentBinaryExpression,inferVarTemplateName:r.inferVarTemplateName,inferForVarTemplate:r.inferForVarTemplate}},Q={upper:e=>e.toUpperCase(),lower:e=>e.toLowerCase(),capitalize:e=>e.substring(0,1).toUpperCase()+e.substring(1)},Y=e=>{const{monaco:t,ts:n}=e,i=X(e);class r{constructor(e,r,s){n.isAwaitExpression(r.parent)&&(r=r.parent),this.node=r,this.item={label:{label:e},kind:t.languages.CompletionItemKind.Snippet},this.code=i.adjustMultilineIndentation(r.getText(),null===s||void 0===s?void 0:s.indentSize,null===s||void 0===s?void 0:s.tabSize),this.indentInfo=s}build(){return this.item}description(e){return this.item.label.description=e,this}replace(e){const i=this.node.getSourceFile(),r=n.getLineAndCharacterOfPosition(i,this.node.getStart(i)),s=n.getLineAndCharacterOfPosition(i,this.node.getEnd()),o={startLineNumber:r.line+1,startColumn:r.character+1,endLineNumber:s.line+1,endColumn:s.character+2};if(/(?<!\\)\$/.test(e)){const n=this.code.replace(/\\/g,"\\\\").replace(/\$/g,"\\$");this.item.insertText=this._replaceExpression(e,n),this.item.insertTextRules=t.languages.CompletionItemInsertTextRule.InsertAsSnippet,this.item.additionalTextEdits=[{range:o,text:null}],this.item.keepWhitespace=!0}else this.item.insertText="",this.item.additionalTextEdits=[{range:o,text:this._replaceExpression(e.replace(/\\\$/g,"$$"),this.code)}];return this}_replaceExpression(e,t,n){const i=new RegExp(n||"{{expr(?::(upper|lower|capitalize))?}}","g");return e.replace(i,((e,n)=>n&&Q[n]?Q[n](t):t))}}return(e,t,n)=>new r(e,t,n)},ee=e=>{const{ts:t}=e,n=X(e),i=Y(e);class r{constructor(e){this.isSimpleExpression=e=>t.isExpressionStatement(e)&&!this.isStringLiteral(e),this.isPropertyAccessExpression=e=>e.kind===t.SyntaxKind.PropertyAccessExpression,this.isElementAccessExpression=e=>e.kind===t.SyntaxKind.ElementAccessExpression,this.isExpression=e=>this.isSimpleExpression(e)||this.isPropertyAccessExpression(e)||this.isElementAccessExpression(e),this.isIdentifier=e=>t.isIdentifier(e)&&!this.inTypeReference(e.parent),this.isUnaryExpression=e=>e.kind===t.SyntaxKind.PostfixUnaryExpression||e.kind===t.SyntaxKind.PrefixUnaryExpression,this.isCallExpression=e=>e.kind===t.SyntaxKind.CallExpression,this.isNewExpression=e=>e.kind===t.SyntaxKind.NewExpression,this.inFunctionArgument=e=>t.isCallExpression(e.parent)&&e.parent.arguments.includes(e),this.isObjectLiteral=e=>t.isBlock(e)&&(0===e.statements.length||e.statements.some((e=>t.isLabeledStatement(e)))),this.isStringLiteral=e=>t.isTemplateSpan(e)||t.isExpressionStatement(e)&&(t.isStringLiteral(e.expression)||t.isNoSubstitutionTemplateLiteral(e.expression)),this.isTypeNode=e=>!!t.isTypeNode(e)||e.parent&&this.inTypeReference(e.parent),this.inAwaitedExpression=e=>!this.isAnyFunction(e)&&(e.kind===t.SyntaxKind.AwaitExpression||e.parent&&this.inAwaitedExpression(e.parent)),this.inReturnStatement=e=>!this.isAnyFunction(e)&&(e.kind===t.SyntaxKind.ReturnStatement||e.parent&&this.inReturnStatement(e.parent)),this.inVariableDeclaration=e=>!this.isAnyFunction(e)&&(e.kind===t.SyntaxKind.VariableDeclaration||e.parent&&this.inVariableDeclaration(e.parent)),this.isBinaryExpression=e=>!!t.isBinaryExpression(e)||(t.isParenthesizedExpression(e)&&t.isBinaryExpression(e.expression)||e.parent&&this.isBinaryExpression(e.parent)),this.unwindBinaryExpression=function(e){let i=(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&t.isParenthesizedExpression(e)&&t.isBinaryExpression(e.expression)?e.expression:n.findClosestParent(e,t.SyntaxKind.BinaryExpression);for(;i&&t.isBinaryExpression(i.parent);)i=i.parent;return i&&!n.isAssignmentBinaryExpression(i)?i:e},this.isAnyFunction=e=>t.isFunctionExpression(e)||t.isArrowFunction(e)||t.isMethodDeclaration(e),this.inAssignmentStatement=e=>!this.isAnyFunction(e)&&(t.isBinaryExpression(e)?n.isAssignmentBinaryExpression(e):e.parent&&this.inAssignmentStatement(e.parent)),this.inIfStatement=(e,n)=>t.isIfStatement(e)?!n||e.expression===n:e.parent&&this.inIfStatement(e.parent,e),this.inTypeReference=e=>!!t.isTypeReferenceNode(e)||e.parent&&this.inTypeReference(e.parent),this.keyword=e}}class s extends r{canUse(e){return!this.inIfStatement(e)&&!this.isTypeNode(e)&&!this.inAssignmentStatement(e)&&(this.isIdentifier(e)||this.isExpression(e)||this.isUnaryExpression(e)||this.isBinaryExpression(e)||this.isCallExpression(e))}}class o extends s{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"var")}buildCompletionItem(e,t){var r;e=this.unwindBinaryExpression(e);const s=null!==(r=n.inferVarTemplateName(e))&&void 0!==r?r:["name"];return i(this.keyword,e,t).description("".concat(this.keyword," name = expr")).replace("".concat(this.keyword," ").concat(n.getPlaceholderWithOptions(s)," = {{expr}}$0")).build()}canUse(e){return(super.canUse(e)||this.isNewExpression(e)||this.isObjectLiteral(e)||this.isStringLiteral(e))&&!this.inReturnStatement(e)&&!this.inFunctionArgument(e)&&!this.inVariableDeclaration(e)&&!this.inAssignmentStatement(e)}}class a extends r{canUse(e){return!this.inReturnStatement(e)&&!this.inIfStatement(e)&&!this.inFunctionArgument(e)&&!this.inVariableDeclaration(e)&&!this.inAssignmentStatement(e)&&!this.isTypeNode(e)&&!this.isBinaryExpression(e)&&(this.isIdentifier(e)||this.isPropertyAccessExpression(e)||this.isElementAccessExpression(e)||this.isCallExpression(e)||this.isArrayLiteral(e))}isArrayLiteral(e){return e.kind===t.SyntaxKind.ArrayLiteralExpression}getArrayItemNames(e){const t=n.inferForVarTemplate(e);return(null===t||void 0===t?void 0:t.length)>0?t:["item"]}}class c extends a{buildCompletionItem(e,r){const s=e.parent&&t.isAwaitExpression(e.parent),o=s?"(":"",a=s?")":"";return"forr"===this.keyword?i("forr",e,r).description("for (let i = expr.length - 1; i >= 0; i--)").replace("for (let ${1:i} = ".concat(o,"{{expr}}").concat(a,".length - 1; ${1} >= 0; ${1}--) {\n").concat(n.getIndentCharacters(r),"${0}\n}")).build():i("fori",e,r).description("for (let i = 0; i < expr.length; i++)").replace("for (let ${1:i} = 0; ${1} < ".concat(o,"{{expr}}").concat(a,".length; ${1}++) {\n").concat(n.getIndentCharacters(r),"${0}\n}")).build()}canUse(e){return super.canUse(e)&&!this.isArrayLiteral(e)&&!this.isCallExpression(e)}}return[new o,new o("let"),new o("const"),new c("fori"),new c("forr"),new class extends a{buildCompletionItem(e,t){const r=super.getArrayItemNames(e);return i("forof",e,t).description("for (let item of expr)").replace("for (let ".concat(n.getPlaceholderWithOptions(r)," of {{expr}}) {\n").concat(n.getIndentCharacters(t),"${0}\n}")).build()}}("forof"),new class extends a{buildCompletionItem(e,r){const s=e.parent&&t.isAwaitExpression(e.parent),o=s?"(":"",a=s?")":"",c=super.getArrayItemNames(e);return i("foreach",e,r).description("expr.forEach(item => )").replace("".concat(o,"{{expr}}").concat(a,".forEach(").concat(n.getPlaceholderWithOptions(c)," => {\n").concat(n.getIndentCharacters(r),"${0}\n})")).build()}}("foreach")]},te=(e,t)=>{const n={monaco:e,ts:t},i=X(n),r=ee(n);const s=new class{provideCompletionItems(e,n,i,s){var o;const a=e.getLineContent(n.lineNumber).lastIndexOf(".",n.column-1),c=e.getWordAtPosition(n),l=(null!==(o=null===c||void 0===c?void 0:c.startColumn)&&void 0!==o?o:n.column)-1===a+1;if(-1===a||!l)return[];const d=[];try{const i=this._getNodeBeforeTheDot(e,n,a);if(i){const n=this._getIndentInfo(e,i),s=this._getNodeForReplacement(i);r.forEach((e=>{e.canUse(t.isNonNullExpression(i)?i.expression:i)&&d.push(e.buildCompletionItem(s,n))}))}}catch(p){console.warn("Error while building postfix autocomplete items:",p)}return d}_getNodeBeforeTheDot(e,n,r){const s=e.getValueInRange({startLineNumber:1,endLineNumber:n.lineNumber,startColumn:1,endColumn:r+1}),o=t.createSourceFile("test.ts",s,t.ScriptTarget.ES5,!0),a=t.getPositionOfLineAndCharacter(o,n.lineNumber-1,r-1),c=i.findNodeAtPosition(o,a);return t.isIdentifier(c)&&t.isPropertyAccessExpression(c.parent)?c.parent:c}_getNodeForReplacement(e){return t.isTemplateSpan(e)||t.isPrefixUnaryExpression(e.parent)||t.isPropertyAccessExpression(e.parent)?e.parent:t.isTypeReferenceNode(e.parent)||e.parent.parent&&t.isTypeReferenceNode(e.parent.parent)?i.findClosestParent(e,t.SyntaxKind.TypeReference):e}_getIndentInfo(e,n){var r,s;const o=(null===(r=e.getOptions())||void 0===r?void 0:r.tabSize)||4,a=(null===(s=e.getOptions())||void 0===s?void 0:s.insertSpaces)||true,c=n.getSourceFile(),l=t.getLineAndCharacterOfPosition(c,n.getStart(c)),d=e.getLineContent(l.line+1).substring(0,e.getLineFirstNonWhitespaceColumn(l.line+1)-1);let p=0;return i.AllTabs.test(d)?p=d.length:i.AllSpaces.test(d)&&(p=d.length/o),{tabSize:o,insertSpaces:a,indentSize:p,leadingWhitespace:d}}};return{triggerCharacters:["."],provideCompletionItems:(e,t,n,i)=>({suggestions:s.provideCompletionItems(e,t,n,i)||[]})}},ne=(e,t)=>{(n.g.ts?Promise.resolve(n.g.ts):new Promise(((e,t)=>{n.e(389).then(n.bind(n,92389)).then((()=>{const i=n.g.ts;i||t(new Error("\u83b7\u53d6tsWorker\u5931\u8d25")),e(i)})).then(t)}))).then((n=>t(te(e,n)))).catch((e=>console.log("register postfix error",e)))};var ie=n(17534);const re=new class{constructor(){this.dataSource={}}has(e){return e in this.dataSource}get(e){return this.dataSource[e]}set(e,t){this.dataSource[e]=t}},se=(e,t,n)=>{e.languages.typescript.javascriptDefaults.addExtraLib(t,n),e.editor.createModel(t,"typescript",e.Uri.parse(n))},oe=[{name:"lodash",path:"https://cdn.jsdelivr.net/npm/@types/lodash@4.14.93/index.d.ts"},{name:"dayjs",path:"https://cdn.jsdelivr.net/npm/dayjs@1.11.6/index.d.ts"},{name:"cryptoJS",path:"https://cdn.jsdelivr.net/npm/@types/crypto-js@4.1.1/index.d.ts"},{name:"xlsx",path:"https://cdn.jsdelivr.net/npm/xlsx@0.18.5/types/index.d.ts"}],ae=[{name:"react",path:"https://cdn.jsdelivr.net/npm/@types/react@18.2.0/index.d.ts"}],ce=[{name:"antd",path:"https://cdn.jsdelivr.net/npm/antd@4.23.6/es/index.d.ts"}],le=ie.X.loadMonaco;const de=function(e){if(!e||ie.Z.getFromCache(le))return;ie.Z.setToCache(le,!0);const t=e.languages.typescript.javascriptDefaults.getExtraLibs()||{},n=[...ae,...oe,...ce];Promise.all(n.map((e=>(e=>{const t=e.name,n={name:t};return re.has(t)?(n.content=re.get(t),Promise.resolve(n)):(async()=>{const t=await fetch(e.path);return n.content=await t.text(),n.content?n:null})()})(e)))).then((n=>{n.filter((e=>!!e)).forEach((n=>{re.set(n.name,n.content);const i="ts:web/".concat(n.name,"/index.d.ts");if(i in t)return;const r="declare module '".concat(n.name,"' { ").concat(n.content," }");se(e,r,i)}));const i="ts:inner/converter.d.ts";i in t||se(e,(e=>{const t=(e=>{if(!e||e.length<=0)return"(moduleName: string): null";let t="(moduleName: ";return t+=e.map((e=>"'"+e+"'")).join(" | "),t+=") => Promise<",t+=e.map((e=>"typeof import('"+e+"')")).join(" | "),t+=">",t})(e);return'\n    declare const inputData: (string | Object | File[]);\n    declare const inputObj: (Object | null);\n    declare const React: typeof import("react"),\n    interface ElementDefinition & Element {\n        type: string | Element;\n        props: any;\n        children?: string | number | ElementDefinition | ElementDefinition[]\n    }\n    declare const Util: ({\n        _: typeof import("lodash"),\n        dayjs: typeof import("dayjs"),\n        cryptoJS: typeof import("cryptoJS"),\n        XLSX: typeof import("xlsx"),\n        message: {\n            info(content: string, duration?: number): void;\n            success(content: string, duration?: number): void;\n            error(content: string, duration?: number): void;\n            warning(content: string, duration?: number): void;\n            loading(content: string, duration?: number): void;\n        },\n        importPlugin: '.concat(t,"\n    });")})(ce.map((e=>e.name))),i)})).catch((e=>console.error("load extraLibs error",e)));try{ne(e,(t=>e.languages.registerCompletionItemProvider("javascript",t)))}catch(i){console.error("load completionPostfix error",i)}};var pe=n(46417);const ue=e=>{let{aiRender:t}=e;const[n,r]=i.useState(!1);return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(a.ZP,{size:"small",onClick:()=>r(!n),type:"link",children:"AI"}),(0,pe.jsx)(J.Z,{title:"AI",open:n,width:"30vw",onClose:()=>r(!1),footer:null,children:t()})]})},he=e=>{let{path:t,value:n,onChange:r,editorHelpRender:s,aiRender:o}=e;const[a,c]=i.useState(!0);return(0,pe.jsxs)(pe.Fragment,{children:[s&&s(),(0,pe.jsx)("br",{}),(0,pe.jsxs)($.Z,{style:{marginTop:"5px",marginBottom:"13px"},children:[(0,pe.jsx)(_.ZP.Group,{size:"small",optionType:"button",onChange:()=>c(!a),options:[{label:"monaco",value:"1"},{label:"input",value:"0"}],value:a?"1":"0"}),o?(0,pe.jsx)(ue,{aiRender:o}):null]}),a?(0,pe.jsx)(H.default,{height:"66vh",language:"javascript",theme:"vs-dark",path:t,value:n,onChange:r,beforeMount:de}):(0,pe.jsx)(V.Z.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u811a\u672c",rows:8,value:n,onChange:e=>r(e.target.value)})]})};var xe=n(12019),ge=n(44874),fe=n(98769),me=n(23988),ye=n(64162),Ce=n.n(ye);const{addConfig:ve,updateConfig:je,hiddenConfig:Se,deleteConfig:Ze}=K,{Text:be}=M.default,Ee=e=>{let{category:t,config:n,name:r,description:s,scriptContent:o,onAddSuccess:c}=e;const l=n.name,d=n.description||l,[p,u]=i.useState(r),[h,x]=i.useState(s);return(0,pe.jsxs)($.Z,{children:[(0,pe.jsx)(a.ZP,{onClick:()=>{if(!o)return U.ZP.warn("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),!1;let e=Ae({name:p||l,description:h||p||d,scriptContent:o});me.Z.copyToClipboard(e)&&U.ZP.info("\u5df2\u590d\u5236\u5206\u4eab\u94fe\u63a5")},children:"\u5206\u4eab"}),(0,pe.jsx)(q.Z,{icon:null,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",onConfirm:()=>{if(!o)return U.ZP.warn("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),!1;F(ve,t,{name:p||l,description:h||p||d,scriptContent:o}).then((()=>{u(null),x(null),U.ZP.success("\u6dfb\u52a0\u8282\u70b9\u6210\u529f"),c()})).catch((e=>U.ZP.error("\u6dfb\u52a0\u8282\u70b9\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+e)))},title:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(V.Z,{addonBefore:"\u8282\u70b9\u540d\u79f0",placeholder:l,value:p,onChange:e=>u(e.target.value)}),(0,pe.jsx)(V.Z,{style:{marginTop:"3px"},addonBefore:"\u8282\u70b9\u4f5c\u7528",placeholder:d,value:h,onChange:e=>x(e.target.value)})]}),children:(0,pe.jsx)(a.ZP,{children:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8282\u70b9"})})]})},Pe=(()=>{let e=100;return()=>e++})(),we=e=>{let{category:t,context:n,config:c,refreshScript:l,editorHelpRender:p,intelligent:u,aiRender:h}=e;const[x,g]=i.useState(!1),[f,m]=i.useState({}),[y,C]=i.useState(c.scriptContent);(0,i.useEffect)((()=>{let e=(e=>{if(e.getShareData()){let n=Ce().decompressFromEncodedURIComponent(e.getShareData());e.clearShareData();let i={};try{i=JSON.parse(n)}catch(t){return void U.ZP.error("\u5206\u4eab\u6570\u636e\u683c\u5f0f\u5f02\u5e38")}return{name:i.name,description:i.description,scriptContent:i.scriptContent}}})(u);e&&(m(e),C(e.scriptContent),g(!0))}),[u]);return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(o.Z,{title:c.description,mouseEnterDelay:1,children:(0,pe.jsx)(a.ZP,{onClick:()=>g(!0),children:c.name})}),(0,pe.jsx)(J.Z,{title:c.name,open:x,width:"75%",onClose:()=>{g(!1)},footer:(0,pe.jsx)(r.Z,{justify:"end",children:(0,pe.jsxs)($.Z,{children:[(0,pe.jsx)(s.Z,{children:(0,pe.jsx)(Ee,{category:t,config:c,name:f.name,description:f.description,scriptContent:y,onAddSuccess:()=>{g(!1),l()}},"add")}),(0,pe.jsx)(s.Z,{children:(0,pe.jsx)(a.ZP,{type:"primary",onClick:()=>{if(!y)return void U.ZP.warn("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");const e=Pe(),t=d.Je.EXPAND_ADD+"CONVERT";n.onConvert(n.createScriptEvent(t,c.name,y,e)),g(!1)},children:"\u6267\u884c"},"convert")})]})}),children:(0,pe.jsx)(he,{path:"".concat(t,"|").concat(d.Je.EXPAND_ADD,"CONVERT|script"),value:y,onChange:C,editorHelpRender:p,aiRender:h})})]})},Te=e=>{let{category:t,config:n,visible:o,setVisible:c,editorHelpRender:l,aiRender:d,refreshScript:p}=e;const[u,h]=i.useState(n.name),[x,g]=i.useState(n.description),[f,m]=i.useState(n.scriptContent),y=()=>c(!1);return(0,pe.jsxs)(J.Z,{open:o,width:"75%",onCancel:y,title:u!==n.name||x!==n.description||f!==n.scriptContent?(0,pe.jsx)(be,{style:{color:"#1890ff"},strong:!0,children:"\u7f16\u8f91\u8282\u70b9 *"}):(0,pe.jsx)(be,{children:"\u7f16\u8f91\u8282\u70b9"}),onClose:y,footer:(0,pe.jsx)(r.Z,{justify:"end",children:(0,pe.jsxs)($.Z,{children:[(0,pe.jsx)(s.Z,{children:(0,pe.jsx)(a.ZP,{onClick:()=>{h(n.name),g(n.description),m(n.scriptContent)},children:"\u91cd\u7f6e"},"reset")}),(0,pe.jsx)(s.Z,{children:(0,pe.jsx)(a.ZP,{onClick:()=>{F(Ze,t,n.code).then((()=>{U.ZP.success("\u5220\u9664\u8282\u70b9\u6210\u529f"),y(),p()})).catch((e=>U.ZP.error("\u5220\u9664\u8282\u70b9\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+e)))},children:"\u5220\u9664\u8282\u70b9"},"remove")}),(0,pe.jsx)(s.Z,{children:(0,pe.jsx)(a.ZP,{type:"primary",onClick:()=>{if(!u)return void U.ZP.error("\u8282\u70b9\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a");if(!f)return void U.ZP.error("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");const e={code:n.code,name:u,description:x||u,scriptContent:f};F(je,t,e).then((()=>{U.ZP.success("\u66f4\u65b0\u8282\u70b9\u6210\u529f"),y(),p()})).catch((e=>console.log(e)&U.ZP.error("\u66f4\u65b0\u8282\u70b9\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+e)))},children:"\u66f4\u65b0\u8282\u70b9"},"update")})]})}),children:[(0,pe.jsx)(V.Z,{addonBefore:"\u8282\u70b9\u540d\u79f0",value:u,onChange:e=>h(e.target.value)}),(0,pe.jsx)(V.Z,{style:{marginTop:"3px"},addonBefore:"\u8282\u70b9\u4f5c\u7528",value:x,onChange:e=>g(e.target.value)}),(0,pe.jsx)(he,{path:"".concat(t,"|").concat(n.code,"|script"),value:f,onChange:m,editorHelpRender:l,aiRender:d})]})},Ae=e=>{let t={name:e.name+"(\u6765\u81ea\u5206\u4eab)",description:e.description,scriptContent:e.scriptContent},n=Ce().compressToEncodedURIComponent(JSON.stringify(t));const i=window.location.href.indexOf("?");return(-1===i?window.location.href:window.location.href.substring(0,i))+"?shareData="+n},ke=e=>{let{category:t,intelligent:n,config:r,handleConvert:s,editorHelpRender:c,aiRender:l,refreshScript:p}=e;const[u,h]=i.useState(!1),x=[{key:"edit",label:(0,pe.jsx)(a.ZP,{shape:"circle",type:"text",onClick:e=>h(!0),icon:(0,pe.jsx)(xe.Z,{}),size:"small",children:"\u7f16\u8f91"})},{key:"hidden",label:(0,pe.jsx)(a.ZP,{shape:"circle",type:"text",onClick:e=>{F(Se,t,r.code).then((()=>{U.ZP.success("\u9690\u85cf\u6210\u529f"),p()})).catch((e=>console.log(e)&U.ZP.error("\u66f4\u65b0\u8282\u70b9\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+e)))},icon:(0,pe.jsx)(ge.Z,{}),size:"small",children:"\u9690\u85cf"})},{key:"share",label:(0,pe.jsx)(a.ZP,{shape:"circle",type:"text",onClick:e=>{me.Z.copyToClipboard(Ae(r))&&U.ZP.info("\u5df2\u590d\u5236\u5206\u4eab\u94fe\u63a5")},icon:(0,pe.jsx)(fe.Z,{}),size:"small",children:"\u5206\u4eab"})}];return n.canClick(d.Jg.NODE,r.code)&&(n.clearClick(),setTimeout((()=>s(r)),0)),(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(z.Z,{arrow:!1,autoAdjustOverflow:!0,menu:{items:x},trigger:["contextMenu"],children:(0,pe.jsx)("div",{children:(0,pe.jsx)(o.Z,{title:r.description,mouseEnterDelay:1,children:(0,pe.jsx)(a.ZP,{type:"dashed",onClick:e=>s(r),children:r.name})})})}),(0,pe.jsx)(Te,{category:t,config:r,visible:u,setVisible:h,editorHelpRender:c,aiRender:l,refreshScript:p})]})};var Ie=n(82027),Re=n(67019),Ne=n(31283),Be=n(18708),Le=n(99613),De=n(55615),Oe=n(11829),Fe=n(47515),Ke=n(24585),Me=n(31741),Ue=n(66407),$e=n(80445),qe=n(571),Ve=n(43036),Je=n(10658),ze=n.n(Je),_e=n(38475);const{addConfig:He,queryConfigByCode:We,updateConfig:Ge,hiddenConfig:Xe,batchDeleteConfig:Qe}=K;window.__devinx3_call_231125__=e=>{let t=JSON.stringify(e);return{remark:"\u8f6c\u6362\u6210\u65b0\u7248\u672c\u7684\u5bfc\u5165\u6570\u636e(2025-06-01 \u5220\u9664\u6b64\u51fd\u6570)",result:t,download:()=>{Ve.Z.download(t,"download-v2.txt")}}};const Ye="secretKey",et=e=>{let{category:t,intelligent:n,dataSource:r,refreshScript:s}=e;const[c,l]=i.useState(!1),[d,p]=i.useState([]),[h,x]=i.useState(!1),[g,f]=i.useState(!1),[y,C]=i.useState(!1),[v,j]=i.useState(),[S,Z]=i.useState(""),[b,E]=i.useState(),[P,w]=i.useState(!1),T=e=>{const t=e.target.value,n=[...d],i=n.indexOf(t);e.target.checked?i<0&&n.push(t):i>=0&&n.splice(i,1),p(n),x(!!n.length&&n.length<r.length),f(n.length===r.length)},A=()=>{const e=[];for(let t of r)if(-1!==d.indexOf(t.code)){const n={...t};e.push(n)}return e},k=()=>{p([]),f(!1),x(!1)};let I=null;const R=e=>{if(0===d.length)return void U.ZP.info("\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u884c, \u65e0\u9700\u5bfc\u51fa");const n=((e,t)=>{const n=S?1:void 0,i=u.convertBackupData(JSON.stringify(e),101,n,S);t&&n&&(t.ss=n);let r={};return r.d=i,t instanceof Object&&Object.keys(t).length>0&&(r.c=t),JSON.stringify(r)})(A(),e),i="config-"+t+"-"+ze()().format("MMDDHHmmss");Ve.Z.download(n,i)},N=e=>{F(Xe,t,d,e).then((()=>{U.ZP.success("\u9690\u85cf\u6210\u529f"),k(),s()})).catch((e=>U.ZP.error("\u9690\u85cf\u5931\u8d25")))},B=e=>w(!0)&setTimeout(e,0),L=()=>w(!1),D=(e,n)=>{if(!e)return void L();try{let t=JSON.parse(e);e=t.d,n=t.c}catch(a){}n||(n={});let i=null;try{i=JSON.parse(u.convertOriginData(e,n.ss,n.secretKey||S))}catch(a){return U.ZP.error("\u5bfc\u5165\u5931\u8d25, \u5f02\u5e38\u6d88\u606f: "+a.message),void L()}if(!(i&&i.length&&i.length>0))return void L();let r=0,o="";Promise.all(i.map((async e=>{const n=We(t,e.code);if(1===(null===n||void 0===n?void 0:n.length))try{return console.debug("\u5bfc\u5165\u7684\u6570\u636e:",n[0]),m(n[0].version,e.version)&&Ge(t,e,!0),r++}catch(i){return o=o+i+";"}else{if((null===n||void 0===n?void 0:n.length)>1)return"\u5bfc\u5165\u5931\u8d25: \u5b58\u5728\u591a\u4e2a\u76f8\u540c\u7684\u7f16\u7801: "+e.code+";";e.name=e.name+(e.code?"":"(by import)")}try{return He(t,e,!0),r++}catch(i){return o=o+i+";"}}))).finally((()=>{0!==r?(r===i.length?U.ZP.success("\u5168\u90e8\u5bfc\u5165\u6210\u529f"):U.ZP.warn("\u90e8\u5206\u5bfc\u5165\u6210\u529f, \u5f02\u5e38\u4e2a\u6570"+(i.length-r)+", \u5f02\u5e38\u6d88\u606f: "+o),L(),s()):U.ZP.error("\u5168\u90e8\u5bfc\u5165\u5931\u8d25, \u5f02\u5e38\u6d88\u606f: "+o)}))},O=(e,t,n)=>{if(P)return U.ZP.warn("\u6b63\u5728\u5bfc\u5165\u4e2d, \u8bf7\u7b49\u5f85"),!1;const i=null!==t&&void 0!==t&&t.length?t:b;if((null===i||void 0===i?void 0:i.length)>0){if(!(e=>{try{return new URL(e)}catch(t){return!1}})(i))return U.ZP.error("\u65e0\u6548\u7684\u5bfc\u5165\u5730\u5740"),!1;B((()=>((e,t,n,i)=>{_e.Z.get(e).then((function(e){const i=e.data;if(!i)throw new Error("\u6570\u636e\u683c\u5f0f\u5f02\u5e38");const r=i.d;if("string"!==typeof r)throw new Error("\u6570\u636e\u683c\u5f0f\u5f02\u5e38");const s=i.c;if(s){if("object"!==typeof s)throw new Error("\u6570\u636e\u683c\u5f0f\u5f02\u5e38");s.secretKey=t}n(r,s)})).catch((t=>{i(),U.ZP.error("\u52a0\u8f7d\u5931\u8d25: "+e),console.debug("\u52a0\u8f7d\u5931\u8d25",t)})).finally((()=>i(void 0)))})(i,n,D,L)))}else B((()=>Ve.Z.readAsText({file:e,handleRead:D,handleError:L})));return!1};if(n.getImportUrl()){var K;let e=n.getImportUrl();const t=null===(K=ie.Z.getSearchParams(e).get(Ye))||void 0===K?void 0:K.trim();n.clearImport(),O(null,e,t)}return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(a.ZP,{type:"link",style:{marginTop:"5px"},onClick:()=>l(!0),children:"\u811a\u672c\u8282\u70b9"}),(0,pe.jsx)(J.Z,{title:"\u811a\u672c\u8282\u70b9",open:c,placement:"left",footer:null,onClose:()=>l(!1),closeIcon:null,extra:(0,pe.jsx)(Oe.Z,{className:"ant-drawer-close",onClick:()=>l(!1)}),children:(0,pe.jsx)(Ie.Z,{spinning:P,children:(0,pe.jsx)(Re.Z,{itemLayout:"horizontal",dataSource:r,rowKey:"code",header:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Ne.Z,{indeterminate:h,disabled:0===r.length,checked:g,onChange:e=>{if(e.target.checked){const e=[];for(let t of r)e.push(t.code);p(e)}else p([]);x(!1),f(e.target.checked)},children:"\u5168\u9009"}),(0,pe.jsx)(a.ZP,{type:"text",disabled:0===d.length,icon:(0,pe.jsx)(Fe.Z,{}),onClick:()=>{0!==d.length?F(Qe,t,d).then((()=>{U.ZP.success("\u5220\u9664\u6210\u529f"),k(),s()})).catch((e=>U.ZP.error("\u5220\u9664\u5931\u8d25, \u539f\u56e0\u662f: "+e))):U.ZP.info("\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u884c, \u65e0\u9700\u5220\u9664")},children:"\u5220\u9664"}),(0,pe.jsx)(a.ZP,{type:"text",disabled:0===d.length,icon:(0,pe.jsx)(Ke.Z,{}),onClick:()=>{clearTimeout(I),I=setTimeout((()=>{clearTimeout(I),R({})}),555)},children:"\u5907\u4efd"}),(0,pe.jsx)(a.ZP,{type:"text",disabled:0===d.length,onClick:()=>N(!0),icon:(0,pe.jsx)(ge.Z,{}),children:"\u9690\u85cf"}),(0,pe.jsx)(a.ZP,{type:"text",disabled:0===d.length,onClick:()=>N(!1),icon:(0,pe.jsx)(Me.Z,{}),children:"\u663e\u793a"}),(0,pe.jsx)(o.Z,{title:"\u4e0d\u652f\u6301\u5bfc\u5165",mouseEnterDelay:2,children:(0,pe.jsx)(a.ZP,{type:"text",disabled:0===d.length,icon:(0,pe.jsx)(Ue.Z,{}),onClick:()=>{if(0===d.length)return void U.ZP.info("\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u884c, \u65e0\u6cd5\u590d\u5236");const e=A();me.Z.copyToClipboard(JSON.stringify(e))&&U.ZP.success("\u590d\u5236\u6210\u529f")},children:"\u590d\u5236JSON\u8282\u70b9"})})]}),footer:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(V.Z,{style:{marginTop:"3px"},type:"url",placeholder:"\u5907\u4efd\u6587\u4ef6\u5730\u5740",value:b,onChange:e=>{var t,n;const i=null===(t=e.target.value)||void 0===t?void 0:t.trim();E(i);const r=null===(n=ie.Z.getSearchParams(i).get(Ye))||void 0===n?void 0:n.trim();Z(r||"")},allowClear:!0}),(0,pe.jsx)(V.Z,{style:{marginTop:"3px"},type:"text",disabled:(null===b||void 0===b?void 0:b.length)>0,addonBefore:"".concat(Ye,"="),placeholder:"\u5bc6\u94a5",value:S,onChange:e=>Z(e.target.value),allowClear:!0}),(0,pe.jsxs)($.Z,{style:{marginTop:"3px"},children:[(null===b||void 0===b?void 0:b.length)>0?(0,pe.jsx)(a.ZP,{onClick:O,icon:(0,pe.jsx)($e.Z,{}),children:"\u5bfc\u5165"}):(0,pe.jsx)(Be.default,{maxCount:1,showUploadList:!1,beforeUpload:e=>O(e),children:(0,pe.jsx)(a.ZP,{icon:(0,pe.jsx)($e.Z,{}),children:"\u5bfc\u5165"})}),(0,pe.jsx)(a.ZP,{onClick:()=>{if(!((null===b||void 0===b?void 0:b.length)>0))return void U.ZP.warning("\u8bf7\u8f93\u5165\u5907\u4efd\u6587\u4ef6\u5730\u5740");const e=window.location.href.indexOf("?");let t=-1===e?window.location.href:window.location.href.substring(0,e);t=t+"?importUrl="+window.encodeURIComponent(b),me.Z.copyToClipboard(t),U.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:"\u751f\u6210\u5bfc\u5165\u94fe\u63a5"})]})]}),renderItem:e=>(0,pe.jsx)(Re.Z.Item,{actions:[(0,pe.jsx)(qe.Z,{type:"link",tipTitle:"\u590d\u5236\u8282\u70b9\u7f16\u7801",onClick:()=>me.Z.copyToClipboard(e.code)}),(0,pe.jsx)(a.ZP,{type:"link",onClick:()=>{return t=e.scriptContent,j(t),void C(!0);var t},children:"\u811a\u672c"},"list-item-srcipt")],children:(0,pe.jsx)(Le.Z,{loading:!1,children:(0,pe.jsx)(Re.Z.Item.Meta,{avatar:(0,pe.jsx)(Ne.Z,{value:e.code,checked:d.indexOf(e.code)>=0,onChange:T}),title:(0,pe.jsxs)(pe.Fragment,{children:[e.hidden?(0,pe.jsx)(ge.Z,{}):(0,pe.jsx)(Me.Z,{}),(0,pe.jsx)(M.default.Text,{title:e.code,style:{marginLeft:"3px"},children:(0,pe.jsx)("b",{children:e.name})})]}),description:e.description})})})})})}),(0,pe.jsx)(De.Z,{title:"\u811a\u672c\u5185\u5bb9",open:y,width:"60%",footer:null,onCancel:()=>{j(null),C(!1)},children:(0,pe.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,pe.jsx)(M.default.Paragraph,{code:!0,copyable:!0,children:v})})})]})},tt=e=>{let{lang:t,category:n,context:i,intelligent:c,basicButtons:l,expandAddButton:d,editorHelpRender:p,aiRender:u,refreshManage:h}=e;l=y(l);const x=d?(e=>K.listAllConfig(e)||[])(n):[],g=e=>i.onConvert(i.createScriptEvent(e.code,e.name,e.scriptContent,e.version));return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsxs)(r.Z,{style:{marginTop:"10px"},children:[l.map(((e,t)=>(0,pe.jsx)(s.Z,{style:{marginLeft:"10px"},children:(0,pe.jsx)(o.Z,{title:e.description,mouseEnterDelay:1,children:(0,pe.jsx)(a.ZP,{onClick:()=>g(e),children:e.name})})},t))),d?(0,pe.jsx)(s.Z,{style:{marginLeft:"10px"},children:(0,pe.jsx)(we,{category:n,context:i,config:d,editorHelpRender:p,aiRender:u,intelligent:c,refreshScript:h})}):null]}),(0,pe.jsxs)(r.Z,{style:{marginTop:"10px"},children:[(0,pe.jsx)(et,{category:n,dataSource:x,intelligent:c,refreshScript:h}),x.filter((e=>!e.hidden)).map(((e,t)=>(0,pe.jsx)(s.Z,{style:{marginLeft:"10px",marginTop:"5px"},children:(0,pe.jsx)(ke,{category:n,config:e,intelligent:c,editorHelpRender:p,aiRender:u,refreshScript:h,handleConvert:g})},e.code+"-"+t)))]})]})};var nt=n(19389),it=n(31118),rt=n(82138);const{addCombination:st,updateCombination:ot,deleteCombination:at}=K,{Text:ct}=M.default,lt="\u81ea\u5b9a\u4e49\u7f16\u6392",dt=e=>{let{category:t,combinationConfig:n,refreshManage:r}=e;const[s,o]=i.useState(),[c,l]=i.useState();n.name=n.name||lt,n.description=n.description||n.name;return(0,pe.jsx)(q.Z,{icon:null,cancelText:"\u53d6\u6d88",okText:"\u65b0\u5efa",onConfirm:()=>{const e={};e.name=s||lt,e.description=c||e.name,e.combination=[],F(st,t,e).then((()=>{U.ZP.success("\u521b\u5efa\u6210\u529f"),r()})).catch((e=>U.ZP.warn("\u521b\u5efa\u5931\u8d25, \u539f\u56e0\u662f"+e)))},placement:"right",title:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(M.default.Title,{level:5,children:"\u65b0\u5efa\u7f16\u6392"}),(0,pe.jsx)(V.Z,{addonBefore:"\u7f16\u6392\u540d\u79f0",placeholder:n.name,value:s,onChange:e=>o(e.target.value)}),(0,pe.jsx)(V.Z,{style:{marginTop:"3px"},addonBefore:"\u7f16\u6392\u4f5c\u7528",placeholder:n.description,value:c,onChange:e=>l(e.target.value)})]}),children:(0,pe.jsx)(a.ZP,{style:{marginLeft:"10px"},shape:"circle",type:"text",icon:(0,pe.jsx)(rt.Z,{}),size:"small"})})},pt=e=>{let{visible:t,setVisible:n,handleAddConfig:r,configDataSource:s}=e;const[a,c]=i.useState(),l=[{title:"\u540d\u79f0",dataIndex:"name",render:(e,t)=>(0,pe.jsx)(o.Z,{title:t.description,children:e})},{title:"\u7c7b\u522b",dataIndex:"costom",render:e=>1===e?(0,pe.jsx)(M.default.Text,{type:"warning",children:"\u81ea\u5b9a\u4e49"}):(0,pe.jsx)(M.default.Text,{type:"success",children:"\u7cfb\u7edf"})}],d=()=>{n(!1),c(void 0)},p={type:"radio",onChange:(e,t)=>{c(e[0])},selectedRowKeys:[a]};return(0,pe.jsx)(De.Z,{title:"\u8282\u70b9\u9009\u62e9",open:t,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",onCancel:d,onOk:()=>{r(a),d()},children:(0,pe.jsx)(nt.Z,{rowSelection:{...p},rowKey:"code",columns:l,dataSource:(()=>{const e=[];for(let t of s)e.push({code:t.code,name:t.name,description:t.description,costom:C(t)?0:1});return e})(),pagination:!1})})},ut=e=>{let{category:t,combinationConfig:n,intelligent:c,refreshManage:l,handleConvert:p,configDataSource:u}=e;const[h,x]=i.useState(!1),[g,f]=i.useState(!1),[m,y]=i.useState(!1),[v,j]=i.useState(n.name),[S,Z]=i.useState(n.description),[b,E]=i.useState([...n.combination]);c.canClick(d.Jg.ARRANGE,n.code)&&(c.clearClick(),setTimeout((()=>p(n,n.combination)),0));const P=(e=>{const t={};for(let n of e)t[n.code]={...n};return t})(u),w=b.map(((e,t)=>{const n=P[e]||{};return n.index=t,n})),T=()=>{x(!1)},A=e=>{y(e),f(!0)};return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(o.Z,{style:{marginLeft:"15px"},title:n.description,mouseEnterDelay:1,children:(0,pe.jsx)(a.ZP,{type:"dashed",onClick:e=>p(n,n.combination),children:n.name})}),(0,pe.jsx)(o.Z,{title:"\u7f16\u8f91",mouseEnterDelay:2,children:(0,pe.jsx)(a.ZP,{shape:"circle",type:"text",onClick:e=>x(!0),icon:(0,pe.jsx)(xe.Z,{}),size:"small"})}),(0,pe.jsxs)(J.Z,{open:h,onCancel:T,title:(()=>{if(b.length!==n.combination.length)return!0;for(let e=0;e++;e<=b.length)if(b[e]!==n.combination[e])return!0;return v!==n.name||S!==n.description})()?(0,pe.jsx)(ct,{style:{color:"#1890ff"},strong:!0,children:"\u7f16\u8f91\u7f16\u6392 *"}):(0,pe.jsx)(ct,{children:"\u7f16\u8f91\u7f16\u6392"}),onClose:T,footer:(0,pe.jsx)(r.Z,{justify:"end",children:(0,pe.jsxs)($.Z,{children:[(0,pe.jsx)(s.Z,{children:(0,pe.jsx)(a.ZP,{onClick:()=>{j(n.name),Z(n.description),E([...n.combination])},children:"\u91cd\u7f6e"},"reset")}),(0,pe.jsx)(s.Z,{children:(0,pe.jsx)(a.ZP,{onClick:()=>{F(at,t,n.code).then((()=>{U.ZP.success("\u5220\u9664\u6210\u529f"),x(!1),l()})).catch((e=>U.ZP.success("\u5220\u9664\u5931\u8d25, \u539f\u56e0\u662f"+e)))},children:"\u5220\u9664\u7f16\u6392"},"delete")}),(0,pe.jsx)(s.Z,{children:(0,pe.jsx)(a.ZP,{type:"primary",onClick:()=>{if(0===b.length)return void U.ZP.warn("\u8bf7\u5148\u7ef4\u62a4\u8282\u70b9");if(!v)return void U.ZP.warn("\u8bf7\u7ef4\u7f16\u6392\u540d\u79f0");for(const n of b)if(!C(n)&&!K.queryConfigByCode(t,n))return void U.ZP.warn("\u811a\u672c\u8282\u70b9\u4e0d\u5b58\u5728, \u8bf7\u5237\u65b0\u9875\u9762");const e={code:n.code,name:v,description:S||v,combination:b};F(ot,t,e).then((()=>{U.ZP.success("\u4fdd\u5b58\u6210\u529f"),x(!1),l()})).catch((e=>U.ZP.error("\u4fdd\u5b58\u5931\u8d25, \u539f\u56e0\u662f: "+e)))},children:"\u4fdd\u5b58\u7f16\u6392"})})]})}),children:[(0,pe.jsx)(V.Z,{addonBefore:"\u7f16\u6392\u540d\u79f0",value:v,onChange:e=>j(e.target.value)}),(0,pe.jsx)(V.Z,{style:{marginTop:"5px",marginBottom:"15px"},addonBefore:"\u7f16\u6392\u4f5c\u7528",value:S,onChange:e=>Z(e.target.value)}),(0,pe.jsx)(it.Z,{mode:"left",items:(e=>e&&0!==e.length?e.map(((e,t)=>({color:C(e)?"#52c41a":"#faad14",children:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(o.Z,{title:"\u6dfb\u52a0",mouseEnterDelay:2,children:(0,pe.jsx)(a.ZP,{shape:"circle",type:"text",icon:(0,pe.jsx)(rt.Z,{}),onClick:e=>A(t)})}),(0,pe.jsx)(o.Z,{title:"\u5220\u9664",mouseEnterDelay:2,children:(0,pe.jsx)(a.ZP,{shape:"circle",type:"text",icon:(0,pe.jsx)(Fe.Z,{}),onClick:e=>(e=>{b.splice(e,1),E([...b])})(t)})}),(0,pe.jsx)(o.Z,{title:e.description,mouseEnterDelay:1,children:e.name})]})}))):[{color:"gray",children:(0,pe.jsx)(o.Z,{title:"\u6dfb\u52a0",mouseEnterDelay:2,children:(0,pe.jsx)(a.ZP,{shape:"circle",type:"text",icon:(0,pe.jsx)(rt.Z,{}),onClick:e=>A(-1)})})}])(w)})]}),(0,pe.jsx)(pt,{visible:g,setVisible:f,handleAddConfig:e=>{if(!g)return;const t=[];for(let n=0;n<b.length;n++)t.push(b[n]),n===m&&t.push(e);-1===m&&t.push(e),E(t)},configDataSource:u})]})},ht=()=>(0,pe.jsx)(a.ZP,{type:"link",disabled:!0,children:"\u811a\u672c\u7f16\u6392"}),xt=e=>{let{lang:t,category:n,context:o,intelligent:a,basicButtons:c,expandAddButton:l}=e;const d=(e=>K.listAllCombination(e)||[])(n)||[],[p,u]=i.useState(!1),h=(e=>K.listAllConfig(e)||[])(n);if(0===h.length)return(0,pe.jsx)(pe.Fragment,{});c=y(c);const x=()=>u(!p),g=(e,t)=>{if(!t||0===t.length)return void U.ZP.error("\u4e0d\u5b58\u5728\u4efb\u4f55\u8282\u70b9");let i=null;const r=o.createScriptEvent(e.code,e.name,null,e.version);let s=r;if(t.forEach((e=>{const t=((e,t,n)=>{if(C(n))for(let i of t)if(n===i.code)return[i];return K.queryConfigByCode(e,n)||[]})(n,c,e)[0];return t?t.scriptContent?void(s=s.add(t.code,t.name,t.scriptContent,t.version)):(i="\u811a\u672c\u5185\u5bb9\u4e3a\u7a7a",null):(i="\u8282\u70b9\u4e0d\u5b58\u5728",null)})),!i)return o.onConvert(r);U.ZP.error(i)},f=[...c,...h];return(0,pe.jsxs)(r.Z,{style:{marginTop:"10px"},children:[(0,pe.jsxs)(s.Z,{children:[(0,pe.jsx)(ht,{}),(0,pe.jsx)(dt,{category:n,combinationConfig:l,refreshManage:x})]}),d.map(((e,t)=>(0,pe.jsx)(s.Z,{style:{marginLeft:"10px"},children:(0,pe.jsx)(ut,{category:n,combinationConfig:e,intelligent:a,refreshManage:x,configDataSource:f,handleConvert:g})},t)))]})},gt=e=>{let{lang:t,category:n,context:r,intelligent:s,buttons:o={},expandScriptButton:a={},expandCombinationButton:c={},editorHelpRender:l,aiRender:d}=e;const[p,u]=i.useState(!1);return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(tt,{lang:t,category:n,context:r,intelligent:s,basicButtons:o,expandAddButton:a,editorHelpRender:l,aiRender:d,refreshManage:()=>u(!p)}),(0,pe.jsx)(xt,{lang:t,category:n,context:r,intelligent:s,basicButtons:o,expandAddButton:c})]})}},571:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(47313),r=n(61763),s=n(23232),o=n(43681),a=n(66407),c=n(17534),l=n(46417);const d=e=>{const[t,n]=i.useState(!1),d=c.Z.omit(e,["tipTitle"]);return(0,l.jsx)(r.Z,{title:e.tipTitle||"\u590d\u5236",children:(0,l.jsx)(s.ZP,{...d,onClick:i=>{if(!t&&e.onClick){const t=e.onClick(i);return!0===t&&n(!0),t}},icon:t?(0,l.jsx)(o.Z,{style:{color:"#52c41a"}}):(0,l.jsx)(a.Z,{}),onMouseLeave:()=>{t&&n(!1)}})})}},43036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={readAsText:e=>{let{file:t,handleRead:n,charset:i,handleError:r}=e;i||(i="utf8");const s=new FileReader;s.onload=()=>{n(s.result)},s.onerror=r,s.readAsText(t,i)},download:(e,t)=>{t||(t="download");let n=URL.createObjectURL(new Blob([e]));const i=document.createElement("a");i.href=n,i.setAttribute("download",t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}}},17534:(e,t,n)=>{"use strict";n.d(t,{X:()=>r,Z:()=>o});const i={},r={loadMonaco:"converter.loadEditor.loadMonaco.loaded"},s={getFromCache:e=>i[e],setToCache:(e,t)=>i[e]=t,getAdvanceKey:()=>"active=adv",enableAdvance:()=>(null!==i.adv&&void 0!==i.adv||(i.adv="1"===window.localStorage.getItem(s.getAdvanceKey())),!0===i.adv),setAdvance:()=>{i.adv=!0,window.localStorage.setItem(s.getAdvanceKey(),"1")},omit:(e,t)=>{const n=Object.assign({},e);for(let i=0;i<t.length;i+=1){delete n[t[i]]}return n},getSearchParams:e=>{const t=null!==e&&void 0!==e&&e.indexOf?e.indexOf("?"):-1;return new URLSearchParams(t<0?void 0:e.substring(t+1))}},o=s},42480:()=>{}}]);