(self.webpackChunktoolkit=self.webpackChunktoolkit||[]).push([[241],{5511:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return sn}});var r=t(9439),i=t(7313),o=t(8197),s=t(9624),a=t(7222),c=t(9491),u=t(7762),l=function(e){return"devinx3.toolkit.".concat(e,"EditOnfig")},d=function(e){return"devinx3.toolkit.".concat(e,"EditCombination")},f=function(e){var n=localStorage.getItem(e);return n?JSON.parse(n):[]},p=function(e,n){localStorage.setItem(e,JSON.stringify(n))},h={editConfig:{list:function(e){return f(l(e))},store:function(e,n){return p(l(e),n)}},editCombination:{list:function(e){return f(d(e))},store:function(e,n){return p(d(e),n)}}},x=t(7518),m=void 0,g=function(e){return h.editConfig.list(e)||[]},v=function(e){return h.editCombination.list(e)},y=function(){var e={};for(var n in x.b){var t=x.b[n];e[t]=g(t)}return e}(),Z=function(){var e={};for(var n in x.b)e[n]=v(n);return e}(),C=function(e,n){try{h.editConfig.store(e,n),y[e]=g(e)}catch(t){return console.log("storeEditConfig error",t),t.message}return!0},j=function(e,n){try{h.editCombination.store(e,n),Z[e]=v(e)}catch(t){return console.log("storeEditCombination error",t),t.message}return!0},S=function(e,n){var t,r=(0,u.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.id===n)return i}}catch(o){r.e(o)}finally{r.f()}return null},b=function(e,n){var t,r=e(n),i=0,o=(0,u.Z)(r);try{for(o.s();!(t=o.n()).done;){var s=t.value;s.id>i&&(i=s.id)}}catch(a){o.e(a)}finally{o.f()}return i},E={listAllConfig:function(e){return y[e]=g(e),y[e]},queryConfigById:function(e,n){return S(y[e],n)},queryConfigByName:function(e,n){var t,r=[];return null===(t=g(e))||void 0===t||t.forEach((function(e){e.name===n&&r.push(e)})),r},addConfig:function(e,n){return n.id=b(g,e)+1,y[e].push(n),C(e,y[e])},updateConfig:function(e,n){for(var t=y[e],r=0;r<t.length;r++)if(t[r].id===n.id)return t[r].name=n.name,t[r].description=n.description,t[r].scriptContent=n.scriptContent,C(e,t);return!1},deleteConfig:function(e,n){return E.batchDeleteConfig(e,[n])},batchDeleteConfig:function(e,n){if(!(n&&n.length&&n.length>0))return!0;for(var t=y[e],r=!1,i=0;i<t.length;i++)if(n.indexOf(t[i].id)>=0){var o=E.checkCombinationByConfig(e,[t[i].id]);if(!0!==o)return"\u5f53\u524d\u914d\u7f6e\u88ab\u7ec4\u5408 ["+o+"] \u5f15\u7528";t.splice(i,1),i--,r=!0}return r?C(e,t):"\u6570\u636e\u4e0d\u5b58\u5728, \u8bf7\u5237\u65b0\u9875\u9762"},listAllCombination:function(e){return Z[e]=v(e),Z[e]},queryCombinationById:function(e,n){return S(Z[e],n)},checkCombinationByConfig:function(e,n){var t,r=(0,u.Z)(E.listAllCombination(e));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.combination){var o,s=(0,u.Z)(i.combination);try{for(s.s();!(o=s.n()).done;){var a=o.value;if(n.indexOf(a)>=0)return i.name||"-"}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){r.e(c)}finally{r.f()}return!0},addCombination:function(e,n){var t=Z[e];return n.id=b(v,e)+1,t.push(n),j(e,t)},updateCombination:function(e,n){for(var t=Z[e],r=0;r<t.length;r++)if(t[r].id===n.id)return t[r].name=n.name,t[r].description=n.description,t[r].combination=n.combination,j(e,t);return!1},deleteCombination:function(e,n){return E.batchDeleteCombination(e,[n])},batchDeleteCombination:function(e,n){if(!(n&&n.length&&n.length>0))return!0;for(var t=!1,r=Z[e],i=0;i<r.length;i++)n.indexOf(r[i].id)>=0&&(r.splice(i,1),i--,t=!0);return!!t&&j(e,r)}},k=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return new Promise((function(n,r){var i=!1;try{i=e.apply(m,t)}catch(o){r(o.message)}!0===i?n.apply(m,t):i instanceof Array?n.apply(m,[i]):i instanceof Object?n.apply(m,i):r(i)}))},w=E,T=t(7978),A=t(5291),P=t(5900),I=t(685),B=t(7258),N=t(5705),L=t(9180),F=t(1347),D=t(4165),O=t(5861),K=t(5671),R=t(3144),$=(t(8110),t(3433)),q=t(804),_=t(9518),U=t.n(_),V=function(e){var n=e.ts,t=function(){var e=/^\t+$/,n=/^ +$/;return{AllTabs:e,AllSpaces:n,adjustMultilineIndentation:function(t,r,i){if(!r)return t;var o=/\r?\n/,s=t.split(o);if(1===s.length)return t;var a=o.exec(t)[0];return s.map((function(t,o){return o>0?function(t,r,i){var o=/^[\t ]+/.exec(t);if(!o)return t;var s=o[0];if(e.test(s)&&r<=s.length)return t.substring(r);if(n.test(s)&&r<=s.length/i)return t.substring(r*i);return t}(t,r,i):t})).join(a)},adjustLeadingWhitespace:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.split(/\r?\n/).map((function(e,t){return t?n+e:e})).join("\n")}}}(),r={findNodeAtPosition:function(e,t){var r=[];e.statements.forEach((function i(o){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=o.getStart(e),c=o.getEnd(),u=n.isToken(o)&&!n.isIdentifier(o)&&!n.isTypeNode(o);!u&&a<=t&&t<c&&r.push({depth:s,node:o,width:c-a}),o.getChildren(e).forEach((function(e){return i(e,s+1)}))}));var i=r.sort((function(e,n){return e.width===n.width?n.depth-e.depth:e.width-n.width}));return i.length>0&&i[0].node},findClosestParent:function(e,n){for(;e&&e.kind!==n;)e=e.parent;return e},isAssignmentBinaryExpression:function(e){return[n.SyntaxKind.EqualsToken,n.SyntaxKind.PlusEqualsToken,n.SyntaxKind.MinusEqualsToken,n.SyntaxKind.SlashEqualsToken,n.SyntaxKind.AsteriskEqualsToken,n.SyntaxKind.AsteriskAsteriskEqualsToken,n.SyntaxKind.AmpersandEqualsToken,n.SyntaxKind.BarEqualsToken,n.SyntaxKind.BarBarEqualsToken,n.SyntaxKind.CaretEqualsToken,n.SyntaxKind.LessThanLessThanToken,n.SyntaxKind.LessThanLessThanEqualsToken,n.SyntaxKind.GreaterThanEqualsToken,n.SyntaxKind.GreaterThanGreaterThanEqualsToken,n.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken,n.SyntaxKind.AmpersandAmpersandEqualsToken,n.SyntaxKind.QuestionQuestionToken,n.SyntaxKind.BarBarEqualsToken].includes(e.operatorToken.kind)}},i=function(){var e=(0,q.Z)(/^(get|read|create|retrieve|select|modify|update|use|find)([A-Z].+?)?$/,{name:2}),t=/((By|With|From).*$)|(Sync$)|.*(?=Items|Lines$)/,r=function(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)};function i(e){var n=null===e||void 0===e?void 0:e.replace(t,"");return(0,$.Z)(new Set([n,e])).filter((function(e){return e}))}function o(n){var t,r;return null===(t=e.exec(n))||void 0===t||null===(r=t.groups)||void 0===r?void 0:r.name}function s(e){return n.isIdentifier(e.expression)?e.expression.text:n.isPropertyAccessExpression(e.expression)?e.expression.name.text:void 0}function a(e){return n.isIdentifier(e.expression)?e.expression.text:n.isPropertyAccessExpression(e.expression)?e.expression.name.text:void 0}return{inferVarTemplateName:function(e){if(n.isNewExpression(e))return[r(a(e))];if(n.isCallExpression(e)){var t=o(s(e));if(!t)return;return i(t).map(r)}},inferForVarTemplate:function(e){var t=function(e){if(n.isIdentifier(e))return e.text;if(n.isPropertyAccessExpression(e))return e.name.text;if(n.isCallExpression(e))return s(e)}(e);if(t){var a=n.isCallExpression(e)?o(t):t.replace(/^(?:all)?(.+?)(?:List)?$/,"$1");return i(a).map(U().singular).filter((function(e){return e!==a})).map(r)}}}}();return{getIndentCharacters:function(e){return e?e.insertSpaces?" ".repeat(e.tabSize):"\t":""},getPlaceholderWithOptions:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.length>1?"${".concat(n,"|").concat(e.join(","),"|}"):"${".concat(n,":").concat(e[0],"}")},AllTabs:t.AllTabs,AllSpaces:t.AllSpaces,adjustMultilineIndentation:t.adjustMultilineIndentation,adjustLeadingWhitespace:t.adjustLeadingWhitespace,findNodeAtPosition:r.findNodeAtPosition,findClosestParent:r.findClosestParent,isAssignmentBinaryExpression:r.isAssignmentBinaryExpression,inferVarTemplateName:i.inferVarTemplateName,inferForVarTemplate:i.inferForVarTemplate}},M=t(1752),z=t(1120),H=t(136),W=t(7277),J={upper:function(e){return e.toUpperCase()},lower:function(e){return e.toLowerCase()},capitalize:function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}},G=function(e){var n=e.monaco,t=e.ts,r=V(e),i=function(){function e(i,o,s){(0,K.Z)(this,e),t.isAwaitExpression(o.parent)&&(o=o.parent),this.node=o,this.item={label:{label:i},kind:n.languages.CompletionItemKind.Snippet},this.code=r.adjustMultilineIndentation(o.getText(),null===s||void 0===s?void 0:s.indentSize,null===s||void 0===s?void 0:s.tabSize),this.indentInfo=s}return(0,R.Z)(e,[{key:"build",value:function(){return this.item}},{key:"description",value:function(e){return this.item.label.description=e,this}},{key:"replace",value:function(e){var r=this.node.getSourceFile(),i=t.getLineAndCharacterOfPosition(r,this.node.getStart(r)),o=t.getLineAndCharacterOfPosition(r,this.node.getEnd()),s={startLineNumber:i.line+1,startColumn:i.character+1,endLineNumber:o.line+1,endColumn:o.character+2};if(/(?<!\\)\$/.test(e)){var a=this.code.replace(/\\/g,"\\\\").replace(/\$/g,"\\$");this.item.insertText=this._replaceExpression(e,a),this.item.insertTextRules=n.languages.CompletionItemInsertTextRule.InsertAsSnippet,this.item.additionalTextEdits=[{range:s,text:null}],this.item.keepWhitespace=!0}else this.item.insertText="",this.item.additionalTextEdits=[{range:s,text:this._replaceExpression(e.replace(/\\\$/g,"$$"),this.code)}];return this}},{key:"_replaceExpression",value:function(e,n,t){var r=new RegExp(t||"{{expr(?::(upper|lower|capitalize))?}}","g");return e.replace(r,(function(e,t){return t&&J[t]?J[t](n):n}))}}]),e}();return function(e,n,t){return new i(e,n,t)}},X=function(e){var n=e.ts,t=V(e),r=G(e),i=(0,R.Z)((function e(r){var i=this;(0,K.Z)(this,e),this.isSimpleExpression=function(e){return n.isExpressionStatement(e)&&!i.isStringLiteral(e)},this.isPropertyAccessExpression=function(e){return e.kind===n.SyntaxKind.PropertyAccessExpression},this.isElementAccessExpression=function(e){return e.kind===n.SyntaxKind.ElementAccessExpression},this.isExpression=function(e){return i.isSimpleExpression(e)||i.isPropertyAccessExpression(e)||i.isElementAccessExpression(e)},this.isIdentifier=function(e){return n.isIdentifier(e)&&!i.inTypeReference(e.parent)},this.isUnaryExpression=function(e){return e.kind===n.SyntaxKind.PostfixUnaryExpression||e.kind===n.SyntaxKind.PrefixUnaryExpression},this.isCallExpression=function(e){return e.kind===n.SyntaxKind.CallExpression},this.isNewExpression=function(e){return e.kind===n.SyntaxKind.NewExpression},this.inFunctionArgument=function(e){return n.isCallExpression(e.parent)&&e.parent.arguments.includes(e)},this.isObjectLiteral=function(e){return n.isBlock(e)&&(0===e.statements.length||e.statements.some((function(e){return n.isLabeledStatement(e)})))},this.isStringLiteral=function(e){return n.isTemplateSpan(e)||n.isExpressionStatement(e)&&(n.isStringLiteral(e.expression)||n.isNoSubstitutionTemplateLiteral(e.expression))},this.isTypeNode=function(e){return!!n.isTypeNode(e)||e.parent&&i.inTypeReference(e.parent)},this.inAwaitedExpression=function(e){return!i.isAnyFunction(e)&&(e.kind===n.SyntaxKind.AwaitExpression||e.parent&&i.inAwaitedExpression(e.parent))},this.inReturnStatement=function(e){return!i.isAnyFunction(e)&&(e.kind===n.SyntaxKind.ReturnStatement||e.parent&&i.inReturnStatement(e.parent))},this.inVariableDeclaration=function(e){return!i.isAnyFunction(e)&&(e.kind===n.SyntaxKind.VariableDeclaration||e.parent&&i.inVariableDeclaration(e.parent))},this.isBinaryExpression=function(e){return!!n.isBinaryExpression(e)||(n.isParenthesizedExpression(e)&&n.isBinaryExpression(e.expression)||e.parent&&i.isBinaryExpression(e.parent))},this.unwindBinaryExpression=function(e){for(var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=r&&n.isParenthesizedExpression(e)&&n.isBinaryExpression(e.expression)?e.expression:t.findClosestParent(e,n.SyntaxKind.BinaryExpression);i&&n.isBinaryExpression(i.parent);)i=i.parent;return i&&!t.isAssignmentBinaryExpression(i)?i:e},this.isAnyFunction=function(e){return n.isFunctionExpression(e)||n.isArrowFunction(e)||n.isMethodDeclaration(e)},this.inAssignmentStatement=function(e){return!i.isAnyFunction(e)&&(n.isBinaryExpression(e)?t.isAssignmentBinaryExpression(e):e.parent&&i.inAssignmentStatement(e.parent))},this.inIfStatement=function(e,t){return n.isIfStatement(e)?!t||e.expression===t:e.parent&&i.inIfStatement(e.parent,e)},this.inTypeReference=function(e){return!!n.isTypeReferenceNode(e)||e.parent&&i.inTypeReference(e.parent)},this.keyword=r})),o=function(e){(0,H.Z)(t,e);var n=(0,W.Z)(t);function t(){return(0,K.Z)(this,t),n.apply(this,arguments)}return(0,R.Z)(t,[{key:"canUse",value:function(e){return!this.inIfStatement(e)&&!this.isTypeNode(e)&&!this.inAssignmentStatement(e)&&(this.isIdentifier(e)||this.isExpression(e)||this.isUnaryExpression(e)||this.isBinaryExpression(e)||this.isCallExpression(e))}}]),t}(i),s=function(e){(0,H.Z)(i,e);var n=(0,W.Z)(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"var";return(0,K.Z)(this,i),n.call(this,e)}return(0,R.Z)(i,[{key:"buildCompletionItem",value:function(e,n){var i;e=this.unwindBinaryExpression(e);var o=null!==(i=t.inferVarTemplateName(e))&&void 0!==i?i:["name"];return r(this.keyword,e,n).description("".concat(this.keyword," name = expr")).replace("".concat(this.keyword," ").concat(t.getPlaceholderWithOptions(o)," = {{expr}}$0")).build()}},{key:"canUse",value:function(e){return((0,M.Z)((0,z.Z)(i.prototype),"canUse",this).call(this,e)||this.isNewExpression(e)||this.isObjectLiteral(e)||this.isStringLiteral(e))&&!this.inReturnStatement(e)&&!this.inFunctionArgument(e)&&!this.inVariableDeclaration(e)&&!this.inAssignmentStatement(e)}}]),i}(o),a=function(e){(0,H.Z)(i,e);var r=(0,W.Z)(i);function i(){return(0,K.Z)(this,i),r.apply(this,arguments)}return(0,R.Z)(i,[{key:"canUse",value:function(e){return!this.inReturnStatement(e)&&!this.inIfStatement(e)&&!this.inFunctionArgument(e)&&!this.inVariableDeclaration(e)&&!this.inAssignmentStatement(e)&&!this.isTypeNode(e)&&!this.isBinaryExpression(e)&&(this.isIdentifier(e)||this.isPropertyAccessExpression(e)||this.isElementAccessExpression(e)||this.isCallExpression(e)||this.isArrayLiteral(e))}},{key:"isArrayLiteral",value:function(e){return e.kind===n.SyntaxKind.ArrayLiteralExpression}},{key:"getArrayItemNames",value:function(e){var n=t.inferForVarTemplate(e);return(null===n||void 0===n?void 0:n.length)>0?n:["item"]}}]),i}(i),c=function(e){(0,H.Z)(o,e);var i=(0,W.Z)(o);function o(){return(0,K.Z)(this,o),i.apply(this,arguments)}return(0,R.Z)(o,[{key:"buildCompletionItem",value:function(e,i){var o=e.parent&&n.isAwaitExpression(e.parent),s=o?"(":"",a=o?")":"";return"forr"===this.keyword?r("forr",e,i).description("for (let i = expr.length - 1; i >= 0; i--)").replace("for (let ${1:i} = ".concat(s,"{{expr}}").concat(a,".length - 1; ${1} >= 0; ${1}--) {\n").concat(t.getIndentCharacters(i),"${0}\n}")).build():r("fori",e,i).description("for (let i = 0; i < expr.length; i++)").replace("for (let ${1:i} = 0; ${1} < ".concat(s,"{{expr}}").concat(a,".length; ${1}++) {\n").concat(t.getIndentCharacters(i),"${0}\n}")).build()}},{key:"canUse",value:function(e){return(0,M.Z)((0,z.Z)(o.prototype),"canUse",this).call(this,e)&&!this.isArrayLiteral(e)&&!this.isCallExpression(e)}}]),o}(a),u=function(e){(0,H.Z)(i,e);var n=(0,W.Z)(i);function i(){return(0,K.Z)(this,i),n.apply(this,arguments)}return(0,R.Z)(i,[{key:"buildCompletionItem",value:function(e,n){var o=(0,M.Z)((0,z.Z)(i.prototype),"getArrayItemNames",this).call(this,e);return r("forof",e,n).description("for (let item of expr)").replace("for (let ".concat(t.getPlaceholderWithOptions(o)," of {{expr}}) {\n").concat(t.getIndentCharacters(n),"${0}\n}")).build()}}]),i}(a),l=function(e){(0,H.Z)(o,e);var i=(0,W.Z)(o);function o(){return(0,K.Z)(this,o),i.apply(this,arguments)}return(0,R.Z)(o,[{key:"buildCompletionItem",value:function(e,i){var s=e.parent&&n.isAwaitExpression(e.parent),a=s?"(":"",c=s?")":"",u=(0,M.Z)((0,z.Z)(o.prototype),"getArrayItemNames",this).call(this,e);return r("foreach",e,i).description("expr.forEach(item => )").replace("".concat(a,"{{expr}}").concat(c,".forEach(").concat(t.getPlaceholderWithOptions(u)," => {\n").concat(t.getIndentCharacters(i),"${0}\n})")).build()}}]),o}(a);return[new s,new s("let"),new s("const"),new c("fori"),new c("forr"),new u("forof"),new l("foreach")]},Q=function(e,n){(t.g.ts?Promise.resolve(t.g.ts):new Promise((function(e,n){t.e(389).then(t.bind(t,2389)).then((function(){var r=t.g.ts;r||n(new Error("\u83b7\u53d6tsWorker\u5931\u8d25")),e(r)})).then(n)}))).then((function(t){return n(function(e,n){var t={monaco:e,ts:n},r=V(t),i=X(t),o=new(function(){function e(){(0,K.Z)(this,e)}return(0,R.Z)(e,[{key:"provideCompletionItems",value:function(e,t,r,o){var s,a=e.getLineContent(t.lineNumber).lastIndexOf(".",t.column-1),c=e.getWordAtPosition(t),u=(null!==(s=null===c||void 0===c?void 0:c.startColumn)&&void 0!==s?s:t.column)-1===a+1;if(-1===a||!u)return[];var l=[];try{var d=this._getNodeBeforeTheDot(e,t,a);if(d){var f=this._getIndentInfo(e,d),p=this._getNodeForReplacement(d);i.forEach((function(e){e.canUse(n.isNonNullExpression(d)?d.expression:d)&&l.push(e.buildCompletionItem(p,f))}))}}catch(h){console.warn("Error while building postfix autocomplete items:",h)}return l}},{key:"_getNodeBeforeTheDot",value:function(e,t,i){var o=e.getValueInRange({startLineNumber:1,endLineNumber:t.lineNumber,startColumn:1,endColumn:i+1}),s=n.createSourceFile("test.ts",o,n.ScriptTarget.ES5,!0),a=n.getPositionOfLineAndCharacter(s,t.lineNumber-1,i-1),c=r.findNodeAtPosition(s,a);return n.isIdentifier(c)&&n.isPropertyAccessExpression(c.parent)?c.parent:c}},{key:"_getNodeForReplacement",value:function(e){return n.isTemplateSpan(e)||n.isPrefixUnaryExpression(e.parent)||n.isPropertyAccessExpression(e.parent)?e.parent:n.isTypeReferenceNode(e.parent)||e.parent.parent&&n.isTypeReferenceNode(e.parent.parent)?r.findClosestParent(e,n.SyntaxKind.TypeReference):e}},{key:"_getIndentInfo",value:function(e,t){var i,o,s=(null===(i=e.getOptions())||void 0===i?void 0:i.tabSize)||4,a=(null===(o=e.getOptions())||void 0===o?void 0:o.insertSpaces)||!0,c=t.getSourceFile(),u=n.getLineAndCharacterOfPosition(c,t.getStart(c)),l=e.getLineContent(u.line+1).substring(0,e.getLineFirstNonWhitespaceColumn(u.line+1)-1),d=0;return r.AllTabs.test(l)?d=l.length:r.AllSpaces.test(l)&&(d=l.length/s),{tabSize:s,insertSpaces:a,indentSize:d,leadingWhitespace:l}}}]),e}());return{triggerCharacters:["."],provideCompletionItems:function(e,n,t,r){return{suggestions:o.provideCompletionItems(e,n,t,r)||[]}}}}(e,t))})).catch((function(e){return console.log("register postfix error",e)}))},Y=t(7534),ee=new(function(){function e(){(0,K.Z)(this,e),this.dataSource={}}return(0,R.Z)(e,[{key:"has",value:function(e){return e in this.dataSource}},{key:"get",value:function(e){return this.dataSource[e]}},{key:"set",value:function(e,n){this.dataSource[e]=n}}]),e}()),ne=function(e,n,t){e.languages.typescript.javascriptDefaults.addExtraLib(n,t),e.editor.createModel(n,"typescript",e.Uri.parse(t))},te=[{name:"lodash",path:"https://cdn.jsdelivr.net/npm/@types/lodash@4.14.93/index.d.ts"},{name:"dayjs",path:"https://cdn.jsdelivr.net/npm/dayjs@1.11.6/index.d.ts"},{name:"cryptoJS",path:"https://cdn.jsdelivr.net/npm/@types/crypto-js@4.1.1/index.d.ts"},{name:"xlsx",path:"https://cdn.jsdelivr.net/npm/xlsx@0.18.5/types/index.d.ts"}],re=Y.X.loadMonaco;var ie=function(e){if(e&&!Y.Z.getFromCache(re)){Y.Z.setToCache(re,!0);var n=e.languages.typescript.javascriptDefaults.getExtraLibs()||{};Promise.all(te.map((function(e){return function(e){var n=e.name,t={name:n};if(ee.has(n))return t.content=ee.get(n),Promise.resolve(t);var r=function(){var n=(0,O.Z)((0,D.Z)().mark((function n(){var r;return(0,D.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.path);case 2:return r=n.sent,n.next=5,r.text();case 5:return t.content=n.sent,n.abrupt("return",t.content?t:null);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return r()}(e)}))).then((function(t){t.filter((function(e){return!!e})).forEach((function(t){ee.set(t.name,t.content);var r="ts:web/".concat(t.name,"/index.d.ts");if(!(r in n)){var i="declare module '".concat(t.name,"' { ").concat(t.content," }");ne(e,i,r)}}));var r="ts:inner/converter.d.ts";r in n||ne(e,'declare const inputData: (string | Object | File[]);\ndeclare const inputObj: (Object | null)\ndeclare const Util: ({\n    _: typeof import("lodash"),,\n    dayjs: typeof import("dayjs"),\n    cryptoJS: typeof import("cryptoJS"),\n    XLSX: typeof import("xlsx"),\n    message: {\n        info(content: string, duration?: number): void;\n        success(content: string, duration?: number): void;\n        error(content: string, duration?: number): void;\n        warning(content: string, duration?: number): void;\n        loading(content: string, duration?: number): void;\n    }\n});',r)})).catch((function(e){return console.error("load extraLibs error",e)}));try{Q(e,(function(n){return e.languages.registerCompletionItemProvider("javascript",n)}))}catch(t){console.error("load completionPostfix error",t)}}},oe=t(6417),se=function(e){var n=e.value,t=e.onChange,o=e.editorHelpRender,s=i.useState(!0),a=(0,r.Z)(s,2),c=a[0],u=a[1];return(0,oe.jsxs)(oe.Fragment,{children:[o&&o(),(0,oe.jsx)("br",{}),(0,oe.jsx)(N.Z,{style:{marginTop:"5px",marginBottom:"13px"},children:(0,oe.jsx)(L.ZP.Group,{size:"small",optionType:"button",onChange:function(){return u(!c)},options:[{label:"monaco",value:"1"},{label:"input",value:"0"}],value:c?"1":"0"})}),c?(0,oe.jsx)(F.ZP,{height:"90%",language:"javascript",theme:"vs-dark",value:n,onChange:t,beforeMount:ie}):(0,oe.jsx)(I.Z.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u811a\u672c",rows:8,value:n,onChange:function(e){return t(e.target.value)}})]})},ae=t(2019),ce=w.addConfig,ue=w.updateConfig,le=w.deleteConfig,de=T.Z.Text,fe=function(e){var n=e.lang,t=e.config,o=e.scriptContent,s=e.onAddSuccess,a=t.name,u=t.description||a,l=i.useState(),d=(0,r.Z)(l,2),f=d[0],p=d[1],h=i.useState(),x=(0,r.Z)(h,2),m=x[0],g=x[1];return(0,oe.jsx)(P.Z,{icon:null,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",onConfirm:function(){if(!o)return A.ZP.warn("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),!1;k(ce,n,{name:f||a,description:m||f||u,scriptContent:o}).then((function(){p(null),g(null),A.ZP.success("\u6dfb\u52a0\u914d\u7f6e\u6210\u529f"),s()})).catch((function(e){return A.ZP.error("\u6dfb\u52a0\u914d\u7f6e\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+e)}))},title:(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(I.Z,{addonBefore:"\u529f\u80fd\u540d\u79f0",placeholder:a,value:f,onChange:function(e){return p(e.target.value)}}),(0,oe.jsx)(I.Z,{style:{marginTop:"3px"},addonBefore:"\u529f\u80fd\u4f5c\u7528",placeholder:u,value:m,onChange:function(e){return g(e.target.value)}})]}),children:(0,oe.jsx)(c.Z,{children:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u914d\u7f6e"})})},pe=function(e){var n=e.lang,t=e.context,u=e.config,l=e.refreshScript,d=e.editorHelpRender,f=i.useState(!1),p=(0,r.Z)(f,2),h=p[0],x=p[1],m=i.useState(u.scriptContent),g=(0,r.Z)(m,2),v=g[0],y=g[1];return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(a.Z,{title:u.description,mouseEnterDelay:1,children:(0,oe.jsx)(c.Z,{onClick:function(){return x(!0)},children:u.name})}),(0,oe.jsx)(B.Z,{title:u.name,open:h,width:"75%",onClose:function(){x(!1)},footer:(0,oe.jsx)(o.Z,{justify:"end",children:(0,oe.jsxs)(N.Z,{children:[(0,oe.jsx)(s.Z,{children:(0,oe.jsx)(fe,{lang:n,config:u,scriptContent:v,onAddSuccess:function(){x(!1),l()}},"add")}),(0,oe.jsx)(s.Z,{children:(0,oe.jsx)(c.Z,{type:"primary",onClick:function(){v?(t.onConvert([v]),x(!1)):A.ZP.warn("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")},children:"\u8f6c\u6362"},"convert")})]})}),children:(0,oe.jsx)(se,{value:v,onChange:y,editorHelpRender:d})})]})},he=function(e){var n=e.lang,t=e.config,a=e.visible,u=e.setVisible,l=e.editorHelpRender,d=e.refreshScript,f=i.useState(t.name),p=(0,r.Z)(f,2),h=p[0],x=p[1],m=i.useState(t.description),g=(0,r.Z)(m,2),v=g[0],y=g[1],Z=i.useState(t.scriptContent),C=(0,r.Z)(Z,2),j=C[0],S=C[1],b=function(){return u(!1)};return(0,oe.jsxs)(B.Z,{open:a,width:"75%",onCancel:b,title:h!==t.name||v!==t.description||j!==t.scriptContent?(0,oe.jsx)(de,{style:{color:"#1890ff"},strong:!0,children:"\u7f16\u8f91\u914d\u7f6e *"}):(0,oe.jsx)(de,{children:"\u7f16\u8f91\u914d\u7f6e"}),onClose:b,footer:(0,oe.jsx)(o.Z,{justify:"end",children:(0,oe.jsxs)(N.Z,{children:[(0,oe.jsx)(s.Z,{children:(0,oe.jsx)(c.Z,{onClick:function(){x(t.name),y(t.description),S(t.scriptContent)},children:"\u91cd\u7f6e"},"reset")}),(0,oe.jsx)(s.Z,{children:(0,oe.jsx)(c.Z,{onClick:function(){k(le,n,t.id).then((function(){A.ZP.success("\u5220\u9664\u914d\u7f6e\u6210\u529f"),b(),d()})).catch((function(e){return A.ZP.error("\u5220\u9664\u914d\u7f6e\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+e)}))},children:"\u5220\u9664\u914d\u7f6e"},"remove")}),(0,oe.jsx)(s.Z,{children:(0,oe.jsx)(c.Z,{type:"primary",onClick:function(){if(h)if(j){var e={id:t.id,name:h,description:v||h,scriptContent:j};k(ue,n,e).then((function(){A.ZP.success("\u66f4\u65b0\u914d\u7f6e\u6210\u529f"),b(),d()})).catch((function(e){return console.log(e)&A.ZP.error("\u66f4\u65b0\u914d\u7f6e\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+e)}))}else A.ZP.error("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");else A.ZP.error("\u529f\u80fd\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")},children:"\u66f4\u65b0\u914d\u7f6e"},"update")})]})}),children:[(0,oe.jsx)(I.Z,{addonBefore:"\u529f\u80fd\u540d\u79f0",value:h,onChange:function(e){return x(e.target.value)}}),(0,oe.jsx)(I.Z,{style:{marginTop:"3px"},addonBefore:"\u529f\u80fd\u4f5c\u7528",value:v,onChange:function(e){return y(e.target.value)}}),(0,oe.jsx)(se,{lang:n,value:j,onChange:S,editorHelpRender:l})]})},xe=function(e){var n=e.lang,t=e.config,o=e.handleConvert,s=e.editorHelpRender,u=e.refreshScript,l=i.useState(!1),d=(0,r.Z)(l,2),f=d[0],p=d[1];return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(a.Z,{title:t.description,mouseEnterDelay:1,children:(0,oe.jsx)(c.Z,{type:"dashed",onClick:function(e){return o(t.scriptContent)},children:t.name})}),(0,oe.jsx)(a.Z,{title:"\u7f16\u8f91",mouseEnterDelay:2,children:(0,oe.jsx)(c.Z,{shape:"circle",type:"text",onClick:function(e){return p(!0)},icon:(0,oe.jsx)(ae.Z,{}),size:"small"})}),(0,oe.jsx)(he,{lang:n,config:t,visible:f,setVisible:p,editorHelpRender:s,refreshScript:u})]})},me=t(1413),ge=t(2984),ve=t.n(ge),ye=new(function(){function e(){(0,K.Z)(this,e),this.featurePrefix="devinx3",this.verionPrefix="ver",this.fixVersion="000",this.fixSecret="ver000"}return(0,R.Z)(e,[{key:"encrypt",value:function(e,n){return ve().AES.encrypt(e,n).toString()}},{key:"dencrypt",value:function(e,n){return ve().AES.decrypt(e,n).toString(ve().enc.Utf8)}},{key:"convertSecret",value:function(e){return e>=100&&e<=999?this.verionPrefix+e:this.fixSecret}},{key:"getFeatureSuffix",value:function(e){return e===this.fixSecret?"S":"l"}},{key:"getFeatureSecretIndex",value:function(e){if(e<100)return-1;for(var n=e-10-10,t=[],r=[17,27,23,3,19,11],i=0;i<6;i++)t.push(10+(n*r[i]/30^0));return t}},{key:"addSecret",value:function(e,n,t){return e.slice(0,n)+t+e.slice(n)}},{key:"removeSecret",value:function(e,n){return e.slice(0,n)+e.slice(n+1)}},{key:"convertExportData",value:function(e,n){var t=this.convertSecret(n),r=this.encrypt(e,t);r.length<100&&(t=this.fixSecret,r=this.encrypt(e,t));var i=this.featurePrefix,o=r.length,s=this.getFeatureSuffix(t);if(t===this.fixSecret)return i+o+s+r;for(var a=this.getFeatureSecretIndex(o),c=r,u=a.length-1;u>=0;u--)c=this.addSecret(c,a[u],t[u]);return i+o+s+c}},{key:"convertImportData",value:function(e){if(!e)throw new Error("\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a");var n=e.slice(0,this.featurePrefix.length);if(n!==this.featurePrefix)throw new Error("\u5339\u914d\u7279\u5f81\u524d\u7f00\u5f02\u5e38");var t=n.length+10,r="l",i=e.indexOf(r);if((i<0||i>=t)&&(r="S",(i=e.indexOf(r))<0||i>=t))throw new Error("\u5339\u914d\u7279\u5f81\u540e\u7f00\u5f02\u5e38");var o=Number(e.slice(n.length,i));if(!o)throw new Error("\u5339\u914d\u6570\u636e\u957f\u5ea6\u5f02\u5e38");var s=this.getFeatureSecretIndex(o),a=e.slice(i+1);if(-1===s)return this.encrypt(e,a);for(var c=a,u="",l=0;l<s.length;l++)u+=c[s[l]],c=this.removeSecret(c,s[l]);return this.dencrypt(c,u)}}]),e}()),Ze=function(e){var n=[];return e&&e.forEach((function(t,r){var i=(0,me.Z)({},t);i.id=-10-10*(e.length-r),n.push(i)})),n},Ce=function(e){return e.id<=-10},je=function(e){return e<=-10},Se=t(870),be=t(2346),Ee=t(2652),ke=t(2697),we=t(1656),Te=t(627),Ae=t(7515),Pe=t(4585),Ie=t(6407),Be=t(445),Ne=t(3036),Le=t(3988),Fe=t(658),De=t.n(Fe),Oe=t(9368),Ke=t.n(Oe),Re=w.addConfig,$e=w.queryConfigByName,qe=w.updateConfig,_e=w.batchDeleteConfig,Ue="__devinx3_call_231125__",Ve=function(e){var n=e.lang,t=e.dataSource,o=e.refreshScript,s=i.useState(!1),l=(0,r.Z)(s,2),d=l[0],f=l[1],p=i.useState([]),h=(0,r.Z)(p,2),x=h[0],m=h[1],g=i.useState(!1),v=(0,r.Z)(g,2),y=v[0],Z=v[1],C=i.useState(!1),j=(0,r.Z)(C,2),S=j[0],b=j[1],E=i.useState(!1),w=(0,r.Z)(E,2),P=w[0],B=w[1],N=i.useState(),L=(0,r.Z)(N,2),F=L[0],K=L[1],R=i.useState(),q=(0,r.Z)(R,2),_=q[0],U=q[1],V=i.useState(),M=(0,r.Z)(V,2),z=M[0],H=M[1],W=i.useState(),J=(0,r.Z)(W,2),G=J[0],X=J[1],Q=i.useState(!1),Y=(0,r.Z)(Q,2),ee=Y[0],ne=Y[1],te=function(e){var n=e.target.value,r=(0,$.Z)(x),i=r.indexOf(n);e.target.checked?i<0&&r.push(n):i>=0&&r.splice(i,1),m(r),Z(!!r.length&&r.length<t.length),b(r.length===t.length)},re=function(e){var n,r=[],i=(0,u.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(-1!==x.indexOf(o.id)){var s=(0,me.Z)({},o);e&&delete s.id,r.push(s)}}}catch(a){i.e(a)}finally{i.f()}return r},ie=null,se=function(e){if(0!==x.length){var n=function(e,n){var t=ye.convertExportData(JSON.stringify(e),101);if(!n)return t;var r=Ue;return r+="({",r+="".concat("d",':"').concat(t,'"'),n instanceof Object&&Object.keys(n).length>0&&(r+=",".concat("c",":").concat(JSON.stringify(n))),r+"})"}(re(!0),e),t="config"+De()().format("MMDDHHmmss");Ne.Z.download(n,t)}else A.ZP.info("\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u884c, \u65e0\u9700\u5bfc\u51fa")},ae=function(e,t){var r;if(!e||e instanceof Error)ne(!1);else{var i=null;if(null!==(r=e)&&void 0!==r&&r.startsWith(Ue)){var s=Function,a="importContext",c={__devinx3_call_231125__:function(n){e=n.d,t=n.c}};try{new s(a,"importContext."+e)(c)}catch(d){return A.ZP.error("\u5bfc\u5165\u5931\u8d25, \u5f02\u5e38\u6d88\u606f: "+d.message),void ne(!1)}}t||(t={});try{i=JSON.parse(ye.convertImportData(e))}catch(d){return A.ZP.error("\u5bfc\u5165\u5931\u8d25, \u5f02\u5e38\u6d88\u606f: "+d.message),void ne(!1)}if(i&&i.length&&i.length>0){var u=0,l="";Promise.all(i.map(function(){var e=(0,O.Z)((0,D.Z)().mark((function e(r){var i;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.coverByName){e.next=21;break}return e.next=3,k($e,n,r.name);case 3:if(1!==(null===(i=e.sent)||void 0===i?void 0:i.length)){e.next=18;break}return e.prev=5,console.debug("\u5bfc\u5165\u7684\u6570\u636e:",i[0]),r.id=i[0].id,e.next=10,k(qe,n,r);case 10:return e.abrupt("return",u++);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",l=l+e.t0+";");case 16:e.next=19;break;case 18:(null===i||void 0===i?void 0:i.length)>1&&A.ZP.warn("\u5339\u914d\u5230\u591a\u4e2a\u3010"+r.name+"\u3011, \u5c06\u4f1a\u65b0\u589e\u914d\u7f6e");case 19:e.next=22;break;case 21:r.name=r.name+"(by impory)";case 22:return e.prev=22,e.next=25,k(Re,n,r);case 25:return e.abrupt("return",u++);case 28:return e.prev=28,e.t1=e.catch(22),e.abrupt("return",l=l+e.t1+";");case 31:case"end":return e.stop()}}),e,null,[[5,13],[22,28]])})));return function(n){return e.apply(this,arguments)}}())).finally((function(){0!==u?(u===i.length?A.ZP.success("\u5168\u90e8\u5bfc\u5165\u6210\u529f"):A.ZP.warn("\u90e8\u5206\u5bfc\u5165\u6210\u529f, \u5f02\u5e38\u4e2a\u6570"+(i.length-u)+", \u5f02\u5e38\u6d88\u606f: "+l),ne(!1),o()):A.ZP.error("\u5168\u90e8\u5bfc\u5165\u5931\u8d25, \u5f02\u5e38\u6d88\u606f: ")}))}else ne(!1)}},ce=function(e){if(ee)return A.ZP.warn("\u6b63\u5728\u5bfc\u5165\u4e2d, \u8bf7\u7b49\u5f85"),!1;if((null===G||void 0===G?void 0:G.length)>0){var n=function(e){try{return new URL(e)}catch(n){return!1}}(G);if(!n)return A.ZP.error("\u65e0\u6548\u7684\u5bfc\u5165\u5730\u5740"),!1;if(n.protocol!==window.location.protocol)return A.ZP.warn("\u4e0d\u652f\u6301\u7684\u534f\u8bae, \u76ee\u524d\u4ec5\u652f\u6301 \u3010"+window.location.protocol+"\u3011\u5f00\u5934\u7684\u5bfc\u5165\u5730\u5740"),!1;ne(!0),function(e,n){var t=function(t,r){t instanceof Error?n(t):n(new Error(t)),A.ZP.error("\u52a0\u8f7d\u5931\u8d25: "+e),console.debug("\u52a0\u8f7d\u5931\u8d25",t)};Ke()(e,{name:Ue,timeout:3e4},(function(e,r){if(e)t(e);else try{if(!r)throw new Error("\u6570\u636e\u683c\u5f0f\u5f02\u5e38");var i=r.d;if("string"!==typeof i)throw new Error("\u6570\u636e\u683c\u5f0f\u5f02\u5e38");var o=r.c;if(o&&"object"!==typeof o)throw new Error("\u6570\u636e\u683c\u5f0f\u5f02\u5e38");n(i,o)}catch(s){t(s)}}))}(G,ae)}else ne(!0),Ne.Z.readAsText(e,ae);return!1};return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(c.Z,{type:"link",onClick:function(){return f(!0)},children:"\u914d\u7f6e\u7ba1\u7406"}),(0,oe.jsx)(Se.Z,{title:"\u914d\u7f6e\u7ba1\u7406",open:d,footer:null,onCancel:function(){return f(!1)},children:(0,oe.jsx)(be.ZP,{itemLayout:"horizontal",dataSource:t,rowKey:"id",header:(0,oe.jsxs)(Ee.Z,{spinning:ee,children:[(0,oe.jsx)(ke.Z,{indeterminate:y,disabled:0===t.length,checked:S,onChange:function(e){if(e.target.checked){var n,r=[],i=(0,u.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(o.id)}}catch(s){i.e(s)}finally{i.f()}m(r)}else m([]);Z(!1),b(e.target.checked)},children:"\u5168\u9009"}),(0,oe.jsx)(c.Z,{type:"text",disabled:0===t.length,icon:(0,oe.jsx)(Ae.Z,{}),onClick:function(){0!==x.length?k(_e,n,x).then((function(){A.ZP.success("\u5220\u9664\u6210\u529f"),m([]),b(!1),Z(!1),o()})).catch((function(e){return A.ZP.error("\u5220\u9664\u5931\u8d25, \u539f\u56e0\u662f: "+e)})):A.ZP.info("\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u884c, \u65e0\u9700\u5220\u9664")},children:"\u5220\u9664"}),(0,oe.jsx)(c.Z,{type:"text",disabled:0===t.length,icon:(0,oe.jsx)(Pe.Z,{}),onClick:function(){clearTimeout(ie),ie=setTimeout((function(){clearTimeout(ie);var e={};z&&(e.coverByName=1),se(e)}),555)},onDoubleClick:function(){clearTimeout(ie),U(!0)},children:"\u5bfc\u51fa"}),(0,oe.jsx)(a.Z,{title:"\u4e0d\u652f\u6301\u5bfc\u5165",mouseEnterDelay:2,children:(0,oe.jsx)(c.Z,{type:"text",disabled:0===t.length,icon:(0,oe.jsx)(Ie.Z,{}),onClick:function(){if(0!==x.length){var e=re(!0);Le.Z.copyToClipboard(JSON.stringify(e))&&A.ZP.success("\u590d\u5236\u6210\u529f")}else A.ZP.info("\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u884c, \u65e0\u6cd5\u590d\u5236")},children:"\u590d\u5236JSON\u914d\u7f6e"})})]}),footer:(0,oe.jsxs)(Ee.Z,{spinning:ee,children:[(0,oe.jsx)(I.Z,{type:"url",placeholder:"\u914d\u7f6e\u5bfc\u5165\u6587\u4ef6\u5730\u5740",value:G,onChange:function(e){var n;X(null===(n=e.target.value)||void 0===n?void 0:n.trim())},allowClear:!0}),(null===G||void 0===G?void 0:G.length)>0?(0,oe.jsx)(c.Z,{onClick:ce,icon:(0,oe.jsx)(Be.Z,{}),children:"\u5bfc\u5165"}):(0,oe.jsx)(we.Z,{maxCount:1,beforeUpload:function(e){return ce(e)},children:(0,oe.jsx)(c.Z,{icon:(0,oe.jsx)(Be.Z,{}),children:"\u5bfc\u5165"})})]}),renderItem:function(e){return(0,oe.jsx)(be.ZP.Item,{actions:[(0,oe.jsx)(c.Z,{type:"link",onClick:function(){return n=e.scriptContent,K(n),void B(!0);var n},children:"\u811a\u672c"},"list-item-srcipt")],children:(0,oe.jsx)(Te.Z,{loading:!1,children:(0,oe.jsx)(be.ZP.Item.Meta,{avatar:(0,oe.jsx)(ke.Z,{value:e.id,checked:x.indexOf(e.id)>=0,onChange:te}),title:e.name,description:e.description})})})}})}),(0,oe.jsx)(Se.Z,{title:"\u811a\u672c\u5185\u5bb9",open:P,width:"60%",footer:null,onCancel:function(){K(null),B(!1)},children:(0,oe.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,oe.jsx)(T.Z.Paragraph,{code:!0,copyable:!0,children:F})})}),(0,oe.jsx)(Se.Z,{title:"\u5bfc\u51fa URL \u6587\u4ef6\u914d\u7f6e",open:_,width:"20%",footer:null,onCancel:function(){return U(!1)},children:(0,oe.jsx)(ke.Z,{checked:z,onChange:function(e){return H(e.target.checked)},on:!0,children:"\u540c\u540d\u8986\u76d6"})})]})},Me=function(e){var n=e.lang,t=e.context,r=e.basicButtons,i=e.expandAddButton,u=e.editorHelpRender,l=e.refreshManage;r=Ze(r);var d=i?function(e){return w.listAllConfig(e)}(n):[],f=function(e){return t.onConvert([e])};return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsxs)(o.Z,{style:{marginTop:"10px"},children:[r.map((function(e,n){return(0,oe.jsx)(s.Z,{style:{marginLeft:"10px"},children:(0,oe.jsx)(a.Z,{title:e.description,mouseEnterDelay:1,children:(0,oe.jsx)(c.Z,{onClick:function(){return f(e.scriptContent)},children:e.name})})},n)})),i?(0,oe.jsx)(s.Z,{style:{marginLeft:"10px"},children:(0,oe.jsx)(pe,{lang:n,context:t,config:i,editorHelpRender:u,refreshScript:l})}):null]}),d.length>0&&(0,oe.jsxs)(o.Z,{style:{marginTop:"10px"},children:[(0,oe.jsx)(Ve,{lang:n,dataSource:d,refreshScript:l}),d.map((function(e,t){return(0,oe.jsx)(s.Z,{style:{marginLeft:"10px"},children:(0,oe.jsx)(xe,{lang:n,config:e,editorHelpRender:u,refreshScript:l,handleConvert:f})},t)}))]})]})},ze=t(6842),He=t(7966),We=t(2138),Je=w.addCombination,Ge=w.updateCombination,Xe=w.deleteCombination,Qe=T.Z.Text,Ye="\u81ea\u5b9a\u4e49\u7ec4\u5408",en=function(e){var n=e.lang,t=e.combinationConfig,o=e.refreshManage,s=i.useState(),a=(0,r.Z)(s,2),u=a[0],l=a[1],d=i.useState(),f=(0,r.Z)(d,2),p=f[0],h=f[1];t.name=t.name||Ye,t.description=t.description||t.name;return(0,oe.jsx)(P.Z,{icon:null,cancelText:"\u53d6\u6d88",okText:"\u65b0\u5efa",onConfirm:function(){var e={};e.name=u||Ye,e.description=p||e.name,e.combination=[],k(Je,n,e).then((function(){A.ZP.success("\u521b\u5efa\u6210\u529f"),o()})).catch((function(e){return A.ZP.warn("\u521b\u5efa\u5931\u8d25, \u539f\u56e0\u662f"+e)}))},placement:"right",title:(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(T.Z.Title,{level:5,children:"\u65b0\u5efa\u7ec4\u5408"}),(0,oe.jsx)(I.Z,{addonBefore:"\u7ec4\u5408\u540d\u79f0",placeholder:t.name,value:u,onChange:function(e){return l(e.target.value)}}),(0,oe.jsx)(I.Z,{style:{marginTop:"3px"},addonBefore:"\u7ec4\u5408\u4f5c\u7528",placeholder:t.description,value:p,onChange:function(e){return h(e.target.value)}})]}),children:(0,oe.jsx)(c.Z,{style:{marginLeft:"10px"},shape:"circle",type:"text",icon:(0,oe.jsx)(We.Z,{}),size:"small"})})},nn=function(e){var n=e.visible,t=e.setVisible,o=e.handleAddConfig,s=e.configDataSource,c=i.useState(),l=(0,r.Z)(c,2),d=l[0],f=l[1],p=[{title:"\u540d\u79f0",dataIndex:"name",render:function(e,n){return(0,oe.jsx)(a.Z,{title:n.description,children:e})}},{title:"\u7c7b\u522b",dataIndex:"costom",render:function(e){return 1===e?(0,oe.jsx)(T.Z.Text,{type:"warning",children:"\u81ea\u5b9a\u4e49"}):(0,oe.jsx)(T.Z.Text,{type:"success",children:"\u7cfb\u7edf"})}}],h=function(){t(!1),f(void 0)},x={type:"radio",onChange:function(e,n){f(Number(e))},selectedRowKeys:[d]};return(0,oe.jsx)(Se.Z,{title:"\u914d\u7f6e\u9009\u62e9",open:n,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",onCancel:h,onOk:function(){o(d),h()},children:(0,oe.jsx)(ze.Z,{rowSelection:(0,me.Z)({},x),rowKey:"id",columns:p,dataSource:function(){var e,n=[],t=(0,u.Z)(s);try{for(t.s();!(e=t.n()).done;){var r=e.value;n.push({id:r.id,name:r.name,description:r.description,costom:Ce(r)?0:1})}}catch(i){t.e(i)}finally{t.f()}return n}(),pagination:!1})})},tn=function(e){var n=e.lang,t=e.combinationConfig,l=e.refreshManage,d=e.handleConvert,f=e.configDataSource,p=i.useState(!1),h=(0,r.Z)(p,2),x=h[0],m=h[1],g=i.useState(!1),v=(0,r.Z)(g,2),y=v[0],Z=v[1],C=i.useState(!1),j=(0,r.Z)(C,2),S=j[0],b=j[1],E=i.useState(t.name),T=(0,r.Z)(E,2),P=T[0],L=T[1],F=i.useState(t.description),D=(0,r.Z)(F,2),O=D[0],K=D[1],R=i.useState((0,$.Z)(t.combination)),q=(0,r.Z)(R,2),_=q[0],U=q[1],V=function(e){var n,t={},r=(0,u.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i.id]=(0,me.Z)({},i)}}catch(o){r.e(o)}finally{r.f()}return t}(f),M=_.map((function(e,n){var t=V[e]||{};return t.index=n,t})),z=function(){m(!1)},H=function(e){b(e),Z(!0)};return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(a.Z,{style:{marginLeft:"15px"},title:t.description,mouseEnterDelay:1,children:(0,oe.jsx)(c.Z,{type:"dashed",onClick:function(e){return d(t.combination)},children:t.name})}),(0,oe.jsx)(a.Z,{title:"\u7f16\u8f91",mouseEnterDelay:2,children:(0,oe.jsx)(c.Z,{shape:"circle",type:"text",onClick:function(e){return m(!0)},icon:(0,oe.jsx)(ae.Z,{}),size:"small"})}),(0,oe.jsxs)(B.Z,{open:x,onCancel:z,title:function(){if(_.length!==t.combination.length)return!0;for(var e=0;e++;e<=_.length)if(_[e]!==t.combination[e])return!0;return P!==t.name||O!==t.description}()?(0,oe.jsx)(Qe,{style:{color:"#1890ff"},strong:!0,children:"\u7f16\u8f91\u7ec4\u5408 *"}):(0,oe.jsx)(Qe,{children:"\u7f16\u8f91\u7ec4\u5408"}),onClose:z,footer:(0,oe.jsx)(o.Z,{justify:"end",children:(0,oe.jsxs)(N.Z,{children:[(0,oe.jsx)(s.Z,{children:(0,oe.jsx)(c.Z,{onClick:function(){L(t.name),K(t.description),U((0,$.Z)(t.combination))},children:"\u91cd\u7f6e"},"reset")}),(0,oe.jsx)(s.Z,{children:(0,oe.jsx)(c.Z,{onClick:function(){k(Xe,n,t.id).then((function(){A.ZP.success("\u5220\u9664\u6210\u529f"),m(!1),l()})).catch((function(e){return A.ZP.success("\u5220\u9664\u5931\u8d25, \u539f\u56e0\u662f"+e)}))},children:"\u5220\u9664\u7ec4\u5408"},"delete")}),(0,oe.jsx)(s.Z,{children:(0,oe.jsx)(c.Z,{type:"primary",onClick:function(){if(0!==_.length)if(P){var e,r=(0,u.Z)(_);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!Ce({id:i})&&!w.queryConfigById(n,i))return void A.ZP.warn("\u811a\u672c\u914d\u7f6e\u4e0d\u5b58\u5728, \u8bf7\u5237\u65b0\u9875\u9762")}}catch(s){r.e(s)}finally{r.f()}var o={id:t.id,name:P,description:O||P,combination:_};k(Ge,n,o).then((function(){A.ZP.success("\u4fdd\u5b58\u6210\u529f"),m(!1),l()})).catch((function(e){return A.ZP.error("\u4fdd\u5b58\u5931\u8d25, \u539f\u56e0\u662f: "+e)}))}else A.ZP.warn("\u8bf7\u7ef4\u62a4\u7ec4\u5408\u540d\u79f0");else A.ZP.warn("\u8bf7\u5148\u7ef4\u62a4\u8282\u70b9")},children:"\u4fdd\u5b58\u7ec4\u5408"})})]})}),children:[(0,oe.jsx)(I.Z,{addonBefore:"\u7ec4\u5408\u540d\u79f0",value:P,onChange:function(e){return L(e.target.value)}}),(0,oe.jsx)(I.Z,{style:{marginTop:"5px",marginBottom:"15px"},addonBefore:"\u7ec4\u5408\u4f5c\u7528",value:O,onChange:function(e){return K(e.target.value)}}),(0,oe.jsxs)(He.Z,{mode:"left",children:[0===M.length&&(0,oe.jsx)(He.Z.Item,{color:"gray",children:(0,oe.jsx)(a.Z,{title:"\u6dfb\u52a0",mouseEnterDelay:2,children:(0,oe.jsx)(c.Z,{shape:"circle",type:"text",icon:(0,oe.jsx)(We.Z,{}),onClick:function(e){return H(-1)}})})},0),M.map((function(e,n){return(0,oe.jsxs)(He.Z.Item,{color:e.id>0?"#faad14":"#52c41a",children:[(0,oe.jsx)(a.Z,{title:"\u6dfb\u52a0",mouseEnterDelay:2,children:(0,oe.jsx)(c.Z,{shape:"circle",type:"text",icon:(0,oe.jsx)(We.Z,{}),onClick:function(e){return H(n)}})}),(0,oe.jsx)(a.Z,{title:"\u5220\u9664",mouseEnterDelay:2,children:(0,oe.jsx)(c.Z,{shape:"circle",type:"text",icon:(0,oe.jsx)(Ae.Z,{}),onClick:function(e){return function(e){_.splice(e,1),U((0,$.Z)(_))}(n)}})}),(0,oe.jsx)(a.Z,{title:e.description,mouseEnterDelay:1,children:e.name})]},n)}))]})]}),(0,oe.jsx)(nn,{visible:y,setVisible:Z,handleAddConfig:function(e){if(y){for(var n=[],t=0;t<_.length;t++)n.push(_[t]),t===S&&n.push(e);-1===S&&n.push(e),U(n)}},configDataSource:f})]})},rn=function(){return(0,oe.jsx)(c.Z,{type:"link",disabled:!0,children:"\u7ec4\u5408\u7ba1\u7406"})},on=function(e){var n=e.lang,t=e.context,a=e.basicButtons,c=e.expandAddButton,l=function(e){return w.listAllCombination(e)||[]}(n)||[],d=i.useState(!1),f=(0,r.Z)(d,2),p=f[0],h=f[1],x=function(e){return w.listAllConfig(e)||[]}(n);if(0===x.length)return(0,oe.jsx)(oe.Fragment,{});a=Ze(a);var m=function(){return h(!p)},g=function(e){if(e&&0!==e.length){var r=null,i=e.map((function(e){var t=function(e,n,t){if(je(t)){var r,i=(0,u.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t===o.id)return o}}catch(s){i.e(s)}finally{i.f()}}return w.queryConfigById(e,t)}(n,a,e);return t?t.scriptContent?{name:t.name,content:t.scriptContent}:(r="\u811a\u672c\u5185\u5bb9\u4e3a\u7a7a",null):(r="\u914d\u7f6e\u4e0d\u5b58\u5728",null)}));if(!r)return t.onConvert(i);A.ZP.error(r)}else A.ZP.error("\u4e0d\u5b58\u5728\u4efb\u4f55\u914d\u7f6e")},v=[].concat((0,$.Z)(a),(0,$.Z)(x));return(0,oe.jsxs)(o.Z,{style:{marginTop:"10px"},children:[(0,oe.jsxs)(s.Z,{children:[(0,oe.jsx)(rn,{}),(0,oe.jsx)(en,{lang:n,combinationConfig:c,refreshManage:m})]}),l.map((function(e,t){return(0,oe.jsx)(s.Z,{style:{marginLeft:"10px"},children:(0,oe.jsx)(tn,{lang:n,combinationConfig:e,refreshManage:m,configDataSource:v,handleConvert:g})},t)}))]})},sn=function(e){var n=e.lang,t=e.context,o=e.buttons,s=void 0===o?{}:o,a=e.expandScriptButton,c=void 0===a?{}:a,u=e.expandCombinationButton,l=void 0===u?{}:u,d=e.editorHelpRender,f=i.useState(!1),p=(0,r.Z)(f,2),h=p[0],x=p[1];return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Me,{lang:n,context:t,basicButtons:s,expandAddButton:c,editorHelpRender:d,refreshManage:function(){return x(!h)}}),(0,oe.jsx)(on,{lang:n,context:t,basicButtons:s,expandAddButton:l})]})}},2480:function(){}}]);