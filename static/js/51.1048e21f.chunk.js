(self.webpackChunktoolkit=self.webpackChunktoolkit||[]).push([[51],{3766:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return S}});var u=e(9439),r=e(5671),a=e(3144),c=e(7313),o=e(2652),i=e(1413),s=e(5291),f=e(6031),l=e.n(f),h=e(658),p=e.n(h),v=e(2984),k=e.n(v),d=e(3750),D=e(3988),I={_:l(),dayjs:p(),cryptoJS:k(),XLSX:d,message:s.ZP};function Z(t,n){return null===t||void 0===t?n:t}function g(t,n,e){return function(t,n,e){return new Function("inputData","inputObj","Util",t)(n,e,(0,i.Z)({},I))}(e,n,t?t(n):null)}function C(t,n,e){return new Promise((function(u,r){for(var a=function(t){return u((n=t)instanceof Object?JSON.stringify(n,null,2):Z(n,""));var n},c=function(t,n){return console.error(n)&r(function(t,n){var e=n instanceof Object?Z(n.message,""):n;return null===t||void 0===t?e:"".concat(t,": ").concat(e)}(t,n))},o=e,i="",s=function(e){var s=n[e],f=s.name,l=D.Z.isStr(s)?s:s.content;try{if((i=g(t,o,l))instanceof Promise)return i.then((function(c){e>=n.length-1?a(c):C(t,n.splice(e+1),c).then(u).catch(r)})).catch((function(t){c(f,t)})),{v:void 0}}catch(h){return c(f,h),{v:void 0}}o=i},f=0;f<n.length;f++){var l=s(f);if("object"===typeof l)return l.v}a(i)}))}var b=e(6417),y=function(){function t(){(0,r.Z)(this,t),this.checkInputData=null}return(0,a.Z)(t,[{key:"setCheckInputData",value:function(t){this.checkInputData=t}},{key:"onCheckInputData",value:function(t){return!this.checkInputData||this.checkInputData(t)}}]),t}(),S=function(t){var n=t.context,e=t.dataBlockRender,r=t.handleInputObj,a=c.useState(""),i=(0,u.Z)(a,2),s=i[0],f=i[1],l=c.useState(""),h=(0,u.Z)(l,2),p=h[0],v=h[1],k=c.useState(""),d=(0,u.Z)(k,2),D=d[0],I=d[1],Z=c.useState(!1),g=(0,u.Z)(Z,2),S=g[0],j=g[1],m=c.useMemo((function(){return new y}),[]);return n.setConvertHandler((function(t){S?console.warn("Conversion failed because loading"):(j(!0),setTimeout((function(){var n=m.onCheckInputData(s);if(!0!==n)return v("")&I(n)&j(!1);var e=function(t){return v("")&I(t)};C(r,t,s).then((function(t){return""===t?e("\u65e0\u6267\u884c\u7ed3\u679c"):v(t)&I("")})).catch(e).finally((function(){return j(!1)}))}),60))})),(0,b.jsx)(o.Z,{spinning:S,children:e({state:{inputData:s,setInputData:f,outputData:p,setOutputData:v,errorMsg:D,setErrorMsg:I},setCheckInputData:function(t){return m.setCheckInputData(t)}})})}},2480:function(){}}]);