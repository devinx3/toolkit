"use strict";(self.webpackChunktoolkit=self.webpackChunktoolkit||[]).push([[173],{2173:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var r=t(3433),a=t(9439),o=t(7313),l=t(7978),i=t(1656),c=t(5291),s=t(8197),d=t(9624),u=t(5705),h=t(9180),x=t(9491),p=t(685),j=t(473),Z=t(7222),f=t(6155),g=t(2231),m=t(6736),v=t(3495),b=t(6986),k=t(122),y=t(571),T=t(3988),w=t(3036),S=t(7518),C=t(1677),L=t(6417),P=(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(l.Z.Title,{level:3,children:"\u5e2e\u52a9\u6587\u6863"}),(0,L.jsx)(l.Z.Title,{level:4,children:"\u4f7f\u7528\u4ecb\u7ecd"}),(0,L.jsx)(l.Z.Paragraph,{children:"\u65b9\u6cd5\u7684\u5165\u53c2\u4e3a: inputData, Util"}),(0,L.jsx)(l.Z.Paragraph,{children:"\u65b9\u6cd5\u7684\u8fd4\u56de\u503c: \u652f\u6301\u8fd4\u56de Promise \u5bf9\u8c61, resolve\u65b9\u6cd5\u7684\u53c2\u6570\u5373\u4e3a\u8fd4\u56de\u503c, reject\u65b9\u6cd5\u7684\u53c2\u6570\u5373\u4e3a\u62a5\u9519\u63d0\u793a"}),(0,L.jsxs)(l.Z.Paragraph,{children:[(0,L.jsx)(l.Z.Text,{code:!0,copyable:!0,children:"inputData"}),": \u8f93\u5165\u6570\u636e"]}),(0,L.jsxs)(l.Z.Paragraph,{children:[(0,L.jsx)(l.Z.Text,{code:!0,copyable:!0,children:"inputObj"}),": \u8f93\u5165\u6570\u636e\u8f6c\u6362\u7684Json\u5bf9\u8c61"]}),(0,L.jsxs)(l.Z.Paragraph,{children:[(0,L.jsx)(l.Z.Text,{code:!0,copyable:!0,children:"Util"}),": \u5185\u7f6e\u7684\u5de5\u5177\u7c7b"]}),(0,L.jsxs)(l.Z.Paragraph,{children:["\u4f7f\u7528\u8005\u4ec5\u4ec5\u9700\u8981\u5b9e\u73b0",(0,L.jsx)("b",{children:"\u65b9\u6cd5\u4f53"})]}),(0,L.jsx)(l.Z.Title,{level:5,children:"\u8f6c\u6362\u65b9\u6cd5\u6837\u4f8b"}),(0,L.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,L.jsx)(l.Z.Paragraph,{code:!0,copyable:{text:"return inputObj;"},children:"function anonymous(inputData, Util) {\n    // \u5904\u7406\u903b\u8f91\n    return inputData;\n}"})}),(0,L.jsx)("br",{})]}),N=(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(l.Z.Title,{level:3,children:"\u5e38\u7528\u5de5\u5177"}),(0,L.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,L.jsx)(l.Z.Paragraph,{code:!0,copyable:!0,children:"const { _, dayjs, cryptoJS, XLSX, message } = Util"})}),(0,L.jsxs)(l.Z.Paragraph,{children:[(0,L.jsx)(l.Z.Title,{level:5,children:"\u5de5\u5177\u5e93"}),(0,L.jsx)(l.Z.Text,{code:!0,copyable:!0,children:"const { _ } = Util"}),(0,L.jsx)(l.Z.Link,{style:{marginLeft:"5px"},href:"https://www.lodashjs.com/",target:"_blank",children:"loadsh \u5b98\u7f51"})]}),(0,L.jsxs)(l.Z.Paragraph,{children:[(0,L.jsx)(l.Z.Title,{level:5,children:"\u65e5\u671f\u5de5\u5177"}),(0,L.jsx)(l.Z.Text,{code:!0,copyable:!0,children:"const { dayjs } = Util"}),(0,L.jsx)(l.Z.Link,{style:{marginLeft:"5px"},href:"https://dayjs.gitee.io/zh-CN/",target:"_blank",children:"Day.js \u5b98\u7f51"})]}),(0,L.jsxs)(l.Z.Paragraph,{children:[(0,L.jsx)(l.Z.Title,{level:5,children:"\u52a0\u5bc6\u5de5\u5177"}),(0,L.jsx)(l.Z.Text,{code:!0,copyable:!0,children:"const { cryptoJS } = Util"}),(0,L.jsx)(l.Z.Link,{style:{marginLeft:"5px"},href:"https://github.com/brix/crypto-js",target:"_blank",children:"crypto-js"})]}),(0,L.jsxs)(l.Z.Paragraph,{children:[(0,L.jsx)(l.Z.Title,{level:5,children:"\u6587\u4ef6\u5de5\u5177"}),(0,L.jsx)(l.Z.Text,{code:!0,copyable:!0,children:"const { XLSX } = Util"}),(0,L.jsx)(l.Z.Link,{style:{marginLeft:"5px"},href:"https://github.com/rockboom/SheetJS-docs-zh-CN/",target:"_blank",children:"SheetJS \u6587\u6863"})]}),(0,L.jsxs)(l.Z.Paragraph,{children:[(0,L.jsx)(l.Z.Title,{level:5,children:"\u6d88\u606f\u5de5\u5177"}),(0,L.jsx)(l.Z.Text,{code:!0,copyable:!0,children:"const { message } = Util"}),(0,L.jsx)(l.Z.Text,{children:"\u6d88\u606f\u63d0\u793a\u65b9\u6cd5\uff0c\u4f7f\u7528\u65b9\u5f0f\u548c\u53c2\u6570\u5982\u4e0b:"}),(0,L.jsx)("br",{}),(0,L.jsx)(l.Z.Text,{children:"(content: \u6d88\u606f\u5185\u5bb9, duration: \u81ea\u52a8\u5173\u95ed\u7684\u5ef6\u65f6, \u5355\u4f4d\u79d2, \u8bbe\u4e3a0\u65f6\u4e0d\u81ea\u52a8\u5173\u95ed)"}),(0,L.jsx)("br",{}),(0,L.jsx)(l.Z.Text,{code:!0,children:"message.success(content, [duration])"}),(0,L.jsx)("br",{}),(0,L.jsx)(l.Z.Text,{code:!0,children:"message.error(content, [duration])"}),(0,L.jsx)("br",{}),(0,L.jsx)(l.Z.Text,{code:!0,children:"message.info(content, [duration])"}),(0,L.jsx)("br",{}),(0,L.jsx)(l.Z.Text,{code:!0,children:"message.warning(content, [duration])"}),(0,L.jsx)("br",{}),(0,L.jsx)(l.Z.Text,{code:!0,children:"message.loading(content, [duration])"})]})]}),U=(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(l.Z.Title,{level:3,children:"\u6587\u4ef6\u8bfb\u53d6"}),(0,L.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,L.jsx)(l.Z.Paragraph,{code:!0,copyable:!0,children:"const { XLSX } = Util;\nconst readExcel = (file, callbackWorkbook) => {\n    const reader = new FileReader();\n    reader.onload = function (e) {\n        const data = e.target.result;\n        const workbook = XLSX.read(data, { type: 'binary' });\n        callbackWorkbook(workbook)\n    };\n    reader.readAsBinaryString(file)\n}\n// \u5c06\u6307\u5b9a sheet, \u8f6c\u6362\u6210 JSON \u5bf9\u8c61\nconst getSheetJsonObj = (workbook, idx) => XLSX.utils.sheet_to_json(workbook.Sheets[workbook.SheetNames[idx]], {\n    defval: 'null'  //\u5355\u5143\u683c\u4e3a\u7a7a\u65f6\u7684\u9ed8\u8ba4\u503c\n});\nreturn new Promise((resolve, reject) => {\n    readExcel(inputData[0], workbook => {\n        try {\n            resolve(getSheetJsonObj(workbook, 0))\n        } catch (error) {\n            reject(error)\n        }\n    })\n})"})})]}),D=function(){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(C.Z,{placement:"rightTop",content:P,title:null,trigger:"click",children:(0,L.jsx)(x.Z,{type:"link",children:"\u5e2e\u52a9\u6587\u6863"})}),(0,L.jsx)(C.Z,{placement:"rightTop",content:N,title:null,trigger:"click",children:(0,L.jsx)(x.Z,{type:"link",children:"\u5e38\u7528\u5de5\u5177"})}),(0,L.jsx)(C.Z,{placement:"rightTop",content:U,title:null,trigger:"click",children:(0,L.jsx)(x.Z,{type:"link",children:"\u6587\u4ef6\u8bfb\u53d6\u6837\u4f8b"})})]})},O=l.Z.Title,_=i.Z.Dragger,R=function(e){var n=e.state,t=e.setCheckInputData,l=n.inputData,f=n.setInputData,k=n.outputData,S=n.setOutputData,C=n.errorMsg,P=n.setErrorMsg,N=o.useState(),U=(0,a.Z)(N,2),D=U[0],O=U[1],R=o.useState(l),X=(0,a.Z)(R,2),A=X[0],J=X[1],B=function(e){f(e),S(""),P("")};t((function(){return!T.Z.isBlank(l)&&0!==l.length||(D?"\u8bf7\u4e0a\u4f20\u6587\u4ef6":"\u8bf7\u8f93\u5165\u6587\u672c")}));return(0,L.jsxs)(s.Z,{style:{marginTop:"20px"},children:[(0,L.jsxs)(d.Z,{span:7,children:[(0,L.jsxs)(u.Z,{children:[(0,L.jsx)(h.ZP.Group,{size:"small",optionType:"button",onChange:function(){var e=!D;O(e),J(l),B(!e||""!==A&&null!==A&&void 0!==A?A:[])},options:[{label:"\u6587\u672c",value:"0"},{label:"\u6587\u4ef6",value:"1"}],value:D?"1":"0"}),D?null:(0,L.jsx)(i.Z,{maxCount:1,beforeUpload:function(e){return w.Z.readAsText(e,f),!1},children:(0,L.jsx)(x.Z,{size:"small",icon:(0,L.jsx)(g.Z,{}),disabled:D,style:{marginLeft:"5px"},children:"\u5bfc\u5165"})})]}),D?(0,L.jsxs)(_,{name:"file",style:{marginTop:"5px"},multiple:!1,maxCount:3,fileList:l,beforeUpload:function(e,n){if(l.length>=3)return!1;for(var t=(0,r.Z)(l),a=0;a<n.length&&!(t.length+1>3);a++)t.push(n[a]);return B(t),i.Z.LIST_IGNORE},onRemove:function(e){var n=l.filter((function(n){return n.uid!==e.uid}));return B(n),!0},children:[(0,L.jsx)("p",{className:"ant-upload-drag-icon",children:(0,L.jsx)(m.Z,{})}),(0,L.jsx)("p",{className:"ant-upload-text",children:"\u5355\u51fb\u6216\u62d6\u52a8\u6587\u4ef6\u5230\u6b64\u533a\u57df"}),(0,L.jsx)("p",{className:"ant-upload-hint",children:"\u652f\u6301\u6279\u91cf"})]}):(0,L.jsx)(p.Z.TextArea,{autoSize:{minRows:25,maxRows:40},disabled:D,style:{marginTop:"5px"},rows:30,placeholder:D?"\u5df2\u8f93\u5165\u6587\u4ef6":"\u5f85\u5904\u7406\u7684\u6587\u672c\u7247\u6bb5",value:D?"":l,onChange:function(e){B(e.target.value)}})]}),(0,L.jsx)(d.Z,{span:10,style:{marginLeft:"30px"},children:T.Z.isBlank(C)?T.Z.isBlank(k)?null:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(u.Z,{children:[(0,L.jsx)(Z.Z,{title:D?"":"\u8986\u76d6\u5f85\u5904\u7406\u8f93\u5165\u6846",children:(0,L.jsx)(x.Z,{type:"text",icon:(0,L.jsx)(v.Z,{}),onClick:function(){return f(k)},disabled:D})}),(0,L.jsx)(y.Z,{type:"text",onClick:function(){if(T.Z.copyToClipboard(k))return c.ZP.info("\u590d\u5236\u6210\u529f"),!0},size:"small"}),(0,L.jsx)(Z.Z,{title:"\u4e0b\u8f7d",children:(0,L.jsx)(b.Z,{style:{marginLeft:"8px"},onClick:function(){w.Z.download(k,"output.txt")}})})]}),(0,L.jsx)("pre",{children:k})]}):(0,L.jsx)(j.Z,{message:C,type:"error"})})]})},X=function(e){return e.split("\n").map((function(e){return'"'.concat(e,'"')})).join(",")},A=function(){return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O,{level:3,children:"\u7f16\u8f91\u6587\u672c"}),(0,L.jsx)(f.Z,{}),(0,L.jsx)(k.Z,{lang:S.b.TXT,manage:{buttons:[{name:"\u591a\u884c\u8f6c\u4e00\u884c",description:"\u591a\u884c\u5408\u5e76\u6210\u4e00\u884c",scriptContent:"const _INNER_ = ".concat(X.toString(),";return _INNER_(inputData);")},{name:"\u8f93\u51fa",description:"\u8f93\u51fa\u539f\u6570\u636e",scriptContent:"return inputData;"}],expandScriptButton:{name:"\u81ea\u5b9a\u4e49\u914d\u7f6e",description:"\u652f\u6301\u8f6c\u6362\u548c\u6dfb\u52a0\u81ea\u5b9a\u4e49\u914d\u7f6e",scriptContent:"return inputData;"},editorHelpRender:D},dataBlockRender:R})]})}},7518:function(e,n,t){t.d(n,{b:function(){return r}});var r={JSON:"json",TXT:"txt"}},122:function(e,n,t){var r=t(1413),a=t(5671),o=t(3144),l=t(7313),i=t(7518),c=t(6417),s=l.lazy((function(){return Promise.all([t.e(984),t.e(708),t.e(241)]).then(t.bind(t,5511))})),d=l.lazy((function(){return Promise.all([t.e(984),t.e(512),t.e(51)]).then(t.bind(t,3766))})),u=function(){function e(){(0,a.Z)(this,e),this.convertHandler=null}return(0,o.Z)(e,[{key:"setConvertHandler",value:function(e){this.convertHandler=e}},{key:"hasConvertHandler",value:function(){return!!this.convertHandler}},{key:"onConvert",value:function(e){if(this.convertHandler)return this.convertHandler(e);console.warn("No convert handler")}}]),e}(),h={};h[i.b.JSON]=function(e){return e instanceof Object?e:JSON.parse(e)};n.Z=function(e){var n=e.lang,t=void 0===n?"txt":n,a=e.manage,o=e.handleInputObj,i=e.dataBlockRender,x=l.useMemo((function(){return new u}),[]),p=(0,r.Z)((0,r.Z)({lang:t},a),{},{context:x}),j={context:x,dataBlockRender:i,handleInputObj:o||h[t]};return(0,c.jsxs)(l.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(s,(0,r.Z)({},p)),(0,c.jsx)(d,(0,r.Z)({},j))]})}},571:function(e,n,t){var r=t(1413),a=t(9439),o=t(7313),l=t(7222),i=t(9491),c=t(3681),s=t(6407),d=t(7534),u=t(6417);n.Z=function(e){var n=o.useState(!1),t=(0,a.Z)(n,2),h=t[0],x=t[1],p=d.Z.omit(e,["tipTitle"]);return(0,u.jsx)(l.Z,{title:e.tipTitle||"\u590d\u5236",children:(0,u.jsx)(i.Z,(0,r.Z)((0,r.Z)({},p),{},{onClick:function(n){if(!h&&e.onClick){var t=e.onClick(n);return!0===t&&x(!0),t}},icon:h?(0,u.jsx)(c.Z,{style:{color:"#52c41a"}}):(0,u.jsx)(s.Z,{}),onMouseLeave:function(){h&&x(!1)}}))})}},3036:function(e,n){var t={readAsText:function(e,n,t){t||(t="utf8");var r=new FileReader;r.onload=function(){n(r.result)},r.readAsText(e,t)},download:function(e,n){n||(n="download");var t=URL.createObjectURL(new Blob([e])),r=document.createElement("a");r.href=t,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r)}};n.Z=t},7534:function(e,n,t){t.d(n,{X:function(){return a}});var r={},a={loadMonaco:"converter.loadEditor.loadMonaco.loaded"},o={getFromCache:function(e){return r[e]},setToCache:function(e,n){return r[e]=n},getAdvanceKey:function(){return"active=adv"},enableAdvance:function(){return null!==r.adv&&void 0!==r.adv||(r.adv="1"===window.localStorage.getItem(o.getAdvanceKey())),!0===r.adv},setAdvance:function(){r.adv=!0,window.localStorage.setItem(o.getAdvanceKey(),"1")},omit:function(e,n){for(var t=Object.assign({},e),r=0;r<n.length;r+=1){delete t[n[r]]}return t}};n.Z=o},3988:function(e,n){var t={underlineToHump:function(e){return e.replace(/_(\w)/g,(function(e,n){return n.toUpperCase()}))},humpToUnderline:function(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()},isStr:function(e){return"string"===typeof e},isBlank:function(e){return void 0===e||null===e||""===e},copyToClipboard:function(e){var n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select();var t=document.execCommand("copy");return n.remove(),t}};n.Z=t}}]);