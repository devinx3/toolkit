(self.webpackChunktoolkit=self.webpackChunktoolkit||[]).push([[740],{7518:function(n,e,t){"use strict";t.d(e,{b:function(){return r}});var r={JSON:"json",TXT:"txt"}},1419:function(n,e,t){"use strict";t.d(e,{Z:function(){return fe}});var r=t(1413),i=t(5671),o=t(3144),a=t(7313),s=t(9439),c=t(8197),u=t(9624),l=t(7222),d=t(9491),f=t(7762),p=function(n){return"devinx3.toolkit.".concat(n,"EditOnfig")},h=function(n){return"devinx3.toolkit.".concat(n,"EditCombination")},x=function(n){var e=localStorage.getItem(n);return e?JSON.parse(e):[]},m=function(n,e){localStorage.setItem(n,JSON.stringify(e))},g={editConfig:{list:function(n){return x(p(n))},store:function(n,e){return m(p(n),e)}},editCombination:{list:function(n){return x(h(n))},store:function(n,e){return m(h(n),e)}}},v=t(7518),y=void 0,Z=function(n){return g.editConfig.list(n)||[]},C=function(n){return g.editCombination.list(n)},j=function(){var n={};for(var e in v.b){var t=v.b[e];n[t]=Z(t)}return n}(),S=function(){var n={};for(var e in v.b)n[e]=C(e);return n}(),b=function(n,e){try{g.editConfig.store(n,e),j[n]=Z(n)}catch(t){return console.log("storeEditConfig error",t),t.message}return!0},k=function(n,e){try{g.editCombination.store(n,e),S[n]=C(n)}catch(t){return console.log("storeEditCombination error",t),t.message}return!0},E=function(n,e){var t,r=(0,f.Z)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.id===e)return i}}catch(o){r.e(o)}finally{r.f()}return null},T=function(n,e){var t,r=n(e),i=0,o=(0,f.Z)(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;a.id>i&&(i=a.id)}}catch(s){o.e(s)}finally{o.f()}return i},A={listAllConfig:function(n){return j[n]=Z(n),j[n]},queryConfigById:function(n,e){return E(j[n],e)},addConfig:function(n,e){return e.id=T(Z,n)+1,j[n].push(e),b(n,j[n])},updateConfig:function(n,e){for(var t=j[n],r=0;r<t.length;r++)if(t[r].id===e.id)return t[r].name=e.name,t[r].description=e.description,t[r].scriptContent=e.scriptContent,b(n,t);return!1},deleteConfig:function(n,e){return A.batchDeleteConfig(n,[e])},batchDeleteConfig:function(n,e){if(!(e&&e.length&&e.length>0))return!0;for(var t=j[n],r=!1,i=0;i<t.length;i++)if(e.indexOf(t[i].id)>=0){var o=A.checkCombinationByConfig(n,[t[i].id]);if(!0!==o)return"\u5f53\u524d\u914d\u7f6e\u88ab\u7ec4\u5408 ["+o+"] \u5f15\u7528";t.splice(i,1),i--,r=!0}return r?b(n,t):"\u6570\u636e\u4e0d\u5b58\u5728, \u8bf7\u5237\u65b0\u9875\u9762"},listAllCombination:function(n){return S[n]=C(n),S[n]},queryCombinationById:function(n,e){return E(S[n],e)},checkCombinationByConfig:function(n,e){var t,r=(0,f.Z)(A.listAllCombination(n));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.combination){var o,a=(0,f.Z)(i.combination);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(e.indexOf(s)>=0)return i.name||"-"}}catch(c){a.e(c)}finally{a.f()}}}}catch(c){r.e(c)}finally{r.f()}return!0},addCombination:function(n,e){var t=S[n];return e.id=T(C,n)+1,t.push(e),k(n,t)},updateCombination:function(n,e){for(var t=S[n],r=0;r<t.length;r++)if(t[r].id===e.id)return t[r].name=e.name,t[r].description=e.description,t[r].combination=e.combination,k(n,t);return!1},deleteCombination:function(n,e){return A.batchDeleteCombination(n,[e])},batchDeleteCombination:function(n,e){if(!(e&&e.length&&e.length>0))return!0;for(var t=!1,r=S[n],i=0;i<r.length;i++)e.indexOf(r[i].id)>=0&&(r.splice(i,1),i--,t=!0);return!!t&&k(n,r)}},w=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return new Promise((function(e,r){var i=!1;try{i=n.apply(y,t)}catch(o){r(o.message)}!0===i?e.apply(y,t):r(i)}))},P=A,I=t(7978),B=t(5291),D=t(5900),N=t(685),L=t(7258),O=t(5705),F=t(9180),R=t(1347),K=t(4165),$=t(5861),U=(t(8110),t(3433)),H=t(804),M=t(9518),q=t.n(M),V=function(n){var e=n.ts,t=function(){var n=/^\t+$/,e=/^ +$/;return{AllTabs:n,AllSpaces:e,adjustMultilineIndentation:function(t,r,i){if(!r)return t;var o=/\r?\n/,a=t.split(o);if(1===a.length)return t;var s=o.exec(t)[0];return a.map((function(t,o){return o>0?function(t,r,i){var o=/^[\t ]+/.exec(t);if(!o)return t;var a=o[0];if(n.test(a)&&r<=a.length)return t.substring(r);if(e.test(a)&&r<=a.length/i)return t.substring(r*i);return t}(t,r,i):t})).join(s)},adjustLeadingWhitespace:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n.split(/\r?\n/).map((function(n,t){return t?e+n:n})).join("\n")}}}(),r={findNodeAtPosition:function(n,t){var r=[];n.statements.forEach((function i(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=o.getStart(n),c=o.getEnd(),u=e.isToken(o)&&!e.isIdentifier(o)&&!e.isTypeNode(o);!u&&s<=t&&t<c&&r.push({depth:a,node:o,width:c-s}),o.getChildren(n).forEach((function(n){return i(n,a+1)}))}));var i=r.sort((function(n,e){return n.width===e.width?e.depth-n.depth:n.width-e.width}));return i.length>0&&i[0].node},findClosestParent:function(n,e){for(;n&&n.kind!==e;)n=n.parent;return n},isAssignmentBinaryExpression:function(n){return[e.SyntaxKind.EqualsToken,e.SyntaxKind.PlusEqualsToken,e.SyntaxKind.MinusEqualsToken,e.SyntaxKind.SlashEqualsToken,e.SyntaxKind.AsteriskEqualsToken,e.SyntaxKind.AsteriskAsteriskEqualsToken,e.SyntaxKind.AmpersandEqualsToken,e.SyntaxKind.BarEqualsToken,e.SyntaxKind.BarBarEqualsToken,e.SyntaxKind.CaretEqualsToken,e.SyntaxKind.LessThanLessThanToken,e.SyntaxKind.LessThanLessThanEqualsToken,e.SyntaxKind.GreaterThanEqualsToken,e.SyntaxKind.GreaterThanGreaterThanEqualsToken,e.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken,e.SyntaxKind.AmpersandAmpersandEqualsToken,e.SyntaxKind.QuestionQuestionToken,e.SyntaxKind.BarBarEqualsToken].includes(n.operatorToken.kind)}},i=function(){var n=(0,H.Z)(/^(get|read|create|retrieve|select|modify|update|use|find)([A-Z].+?)?$/,{name:2}),t=/((By|With|From).*$)|(Sync$)|.*(?=Items|Lines$)/,r=function(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)};function i(n){var e=null===n||void 0===n?void 0:n.replace(t,"");return(0,U.Z)(new Set([e,n])).filter((function(n){return n}))}function o(e){var t,r;return null===(t=n.exec(e))||void 0===t||null===(r=t.groups)||void 0===r?void 0:r.name}function a(n){return e.isIdentifier(n.expression)?n.expression.text:e.isPropertyAccessExpression(n.expression)?n.expression.name.text:void 0}function s(n){return e.isIdentifier(n.expression)?n.expression.text:e.isPropertyAccessExpression(n.expression)?n.expression.name.text:void 0}return{inferVarTemplateName:function(n){if(e.isNewExpression(n))return[r(s(n))];if(e.isCallExpression(n)){var t=o(a(n));if(!t)return;return i(t).map(r)}},inferForVarTemplate:function(n){var t=function(n){if(e.isIdentifier(n))return n.text;if(e.isPropertyAccessExpression(n))return n.name.text;if(e.isCallExpression(n))return a(n)}(n);if(t){var s=e.isCallExpression(n)?o(t):t.replace(/^(?:all)?(.+?)(?:List)?$/,"$1");return i(s).map(q().singular).filter((function(n){return n!==s})).map(r)}}}}();return{getIndentCharacters:function(n){return n?n.insertSpaces?" ".repeat(n.tabSize):"\t":""},getPlaceholderWithOptions:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n.length>1?"${".concat(e,"|").concat(n.join(","),"|}"):"${".concat(e,":").concat(n[0],"}")},AllTabs:t.AllTabs,AllSpaces:t.AllSpaces,adjustMultilineIndentation:t.adjustMultilineIndentation,adjustLeadingWhitespace:t.adjustLeadingWhitespace,findNodeAtPosition:r.findNodeAtPosition,findClosestParent:r.findClosestParent,isAssignmentBinaryExpression:r.isAssignmentBinaryExpression,inferVarTemplateName:i.inferVarTemplateName,inferForVarTemplate:i.inferForVarTemplate}},z=t(1752),J=t(1120),_=t(136),W=t(7277),G={upper:function(n){return n.toUpperCase()},lower:function(n){return n.toLowerCase()},capitalize:function(n){return n.substring(0,1).toUpperCase()+n.substring(1)}},X=function(n){var e=n.monaco,t=n.ts,r=V(n),a=function(){function n(o,a,s){(0,i.Z)(this,n),t.isAwaitExpression(a.parent)&&(a=a.parent),this.node=a,this.item={label:{label:o},kind:e.languages.CompletionItemKind.Snippet},this.code=r.adjustMultilineIndentation(a.getText(),null===s||void 0===s?void 0:s.indentSize,null===s||void 0===s?void 0:s.tabSize),this.indentInfo=s}return(0,o.Z)(n,[{key:"build",value:function(){return this.item}},{key:"description",value:function(n){return this.item.label.description=n,this}},{key:"replace",value:function(n){var r=this.node.getSourceFile(),i=t.getLineAndCharacterOfPosition(r,this.node.getStart(r)),o=t.getLineAndCharacterOfPosition(r,this.node.getEnd()),a={startLineNumber:i.line+1,startColumn:i.character+1,endLineNumber:o.line+1,endColumn:o.character+2};if(/(?<!\\)\$/.test(n)){var s=this.code.replace(/\\/g,"\\\\").replace(/\$/g,"\\$");this.item.insertText=this._replaceExpression(n,s),this.item.insertTextRules=e.languages.CompletionItemInsertTextRule.InsertAsSnippet,this.item.additionalTextEdits=[{range:a,text:null}],this.item.keepWhitespace=!0}else this.item.insertText="",this.item.additionalTextEdits=[{range:a,text:this._replaceExpression(n.replace(/\\\$/g,"$$"),this.code)}];return this}},{key:"_replaceExpression",value:function(n,e,t){var r=new RegExp(t||"{{expr(?::(upper|lower|capitalize))?}}","g");return n.replace(r,(function(n,t){return t&&G[t]?G[t](e):e}))}}]),n}();return function(n,e,t){return new a(n,e,t)}},Q=function(n){var e=n.ts,t=V(n),r=X(n),a=(0,o.Z)((function n(r){var o=this;(0,i.Z)(this,n),this.isSimpleExpression=function(n){return e.isExpressionStatement(n)&&!o.isStringLiteral(n)},this.isPropertyAccessExpression=function(n){return n.kind===e.SyntaxKind.PropertyAccessExpression},this.isElementAccessExpression=function(n){return n.kind===e.SyntaxKind.ElementAccessExpression},this.isExpression=function(n){return o.isSimpleExpression(n)||o.isPropertyAccessExpression(n)||o.isElementAccessExpression(n)},this.isIdentifier=function(n){return e.isIdentifier(n)&&!o.inTypeReference(n.parent)},this.isUnaryExpression=function(n){return n.kind===e.SyntaxKind.PostfixUnaryExpression||n.kind===e.SyntaxKind.PrefixUnaryExpression},this.isCallExpression=function(n){return n.kind===e.SyntaxKind.CallExpression},this.isNewExpression=function(n){return n.kind===e.SyntaxKind.NewExpression},this.inFunctionArgument=function(n){return e.isCallExpression(n.parent)&&n.parent.arguments.includes(n)},this.isObjectLiteral=function(n){return e.isBlock(n)&&(0===n.statements.length||n.statements.some((function(n){return e.isLabeledStatement(n)})))},this.isStringLiteral=function(n){return e.isTemplateSpan(n)||e.isExpressionStatement(n)&&(e.isStringLiteral(n.expression)||e.isNoSubstitutionTemplateLiteral(n.expression))},this.isTypeNode=function(n){return!!e.isTypeNode(n)||n.parent&&o.inTypeReference(n.parent)},this.inAwaitedExpression=function(n){return!o.isAnyFunction(n)&&(n.kind===e.SyntaxKind.AwaitExpression||n.parent&&o.inAwaitedExpression(n.parent))},this.inReturnStatement=function(n){return!o.isAnyFunction(n)&&(n.kind===e.SyntaxKind.ReturnStatement||n.parent&&o.inReturnStatement(n.parent))},this.inVariableDeclaration=function(n){return!o.isAnyFunction(n)&&(n.kind===e.SyntaxKind.VariableDeclaration||n.parent&&o.inVariableDeclaration(n.parent))},this.isBinaryExpression=function(n){return!!e.isBinaryExpression(n)||(e.isParenthesizedExpression(n)&&e.isBinaryExpression(n.expression)||n.parent&&o.isBinaryExpression(n.parent))},this.unwindBinaryExpression=function(n){for(var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=r&&e.isParenthesizedExpression(n)&&e.isBinaryExpression(n.expression)?n.expression:t.findClosestParent(n,e.SyntaxKind.BinaryExpression);i&&e.isBinaryExpression(i.parent);)i=i.parent;return i&&!t.isAssignmentBinaryExpression(i)?i:n},this.isAnyFunction=function(n){return e.isFunctionExpression(n)||e.isArrowFunction(n)||e.isMethodDeclaration(n)},this.inAssignmentStatement=function(n){return!o.isAnyFunction(n)&&(e.isBinaryExpression(n)?t.isAssignmentBinaryExpression(n):n.parent&&o.inAssignmentStatement(n.parent))},this.inIfStatement=function(n,t){return e.isIfStatement(n)?!t||n.expression===t:n.parent&&o.inIfStatement(n.parent,n)},this.inTypeReference=function(n){return!!e.isTypeReferenceNode(n)||n.parent&&o.inTypeReference(n.parent)},this.keyword=r})),s=function(n){(0,_.Z)(t,n);var e=(0,W.Z)(t);function t(){return(0,i.Z)(this,t),e.apply(this,arguments)}return(0,o.Z)(t,[{key:"canUse",value:function(n){return!this.inIfStatement(n)&&!this.isTypeNode(n)&&!this.inAssignmentStatement(n)&&(this.isIdentifier(n)||this.isExpression(n)||this.isUnaryExpression(n)||this.isBinaryExpression(n)||this.isCallExpression(n))}}]),t}(a),c=function(n){(0,_.Z)(a,n);var e=(0,W.Z)(a);function a(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"var";return(0,i.Z)(this,a),e.call(this,n)}return(0,o.Z)(a,[{key:"buildCompletionItem",value:function(n,e){var i;n=this.unwindBinaryExpression(n);var o=null!==(i=t.inferVarTemplateName(n))&&void 0!==i?i:["name"];return r(this.keyword,n,e).description("".concat(this.keyword," name = expr")).replace("".concat(this.keyword," ").concat(t.getPlaceholderWithOptions(o)," = {{expr}}$0")).build()}},{key:"canUse",value:function(n){return((0,z.Z)((0,J.Z)(a.prototype),"canUse",this).call(this,n)||this.isNewExpression(n)||this.isObjectLiteral(n)||this.isStringLiteral(n))&&!this.inReturnStatement(n)&&!this.inFunctionArgument(n)&&!this.inVariableDeclaration(n)&&!this.inAssignmentStatement(n)}}]),a}(s),u=function(n){(0,_.Z)(a,n);var r=(0,W.Z)(a);function a(){return(0,i.Z)(this,a),r.apply(this,arguments)}return(0,o.Z)(a,[{key:"canUse",value:function(n){return!this.inReturnStatement(n)&&!this.inIfStatement(n)&&!this.inFunctionArgument(n)&&!this.inVariableDeclaration(n)&&!this.inAssignmentStatement(n)&&!this.isTypeNode(n)&&!this.isBinaryExpression(n)&&(this.isIdentifier(n)||this.isPropertyAccessExpression(n)||this.isElementAccessExpression(n)||this.isCallExpression(n)||this.isArrayLiteral(n))}},{key:"isArrayLiteral",value:function(n){return n.kind===e.SyntaxKind.ArrayLiteralExpression}},{key:"getArrayItemNames",value:function(n){var e=t.inferForVarTemplate(n);return(null===e||void 0===e?void 0:e.length)>0?e:["item"]}}]),a}(a),l=function(n){(0,_.Z)(s,n);var a=(0,W.Z)(s);function s(){return(0,i.Z)(this,s),a.apply(this,arguments)}return(0,o.Z)(s,[{key:"buildCompletionItem",value:function(n,i){var o=n.parent&&e.isAwaitExpression(n.parent),a=o?"(":"",s=o?")":"";return"forr"===this.keyword?r("forr",n,i).description("for (let i = expr.length - 1; i >= 0; i--)").replace("for (let ${1:i} = ".concat(a,"{{expr}}").concat(s,".length - 1; ${1} >= 0; ${1}--) {\n").concat(t.getIndentCharacters(i),"${0}\n}")).build():r("fori",n,i).description("for (let i = 0; i < expr.length; i++)").replace("for (let ${1:i} = 0; ${1} < ".concat(a,"{{expr}}").concat(s,".length; ${1}++) {\n").concat(t.getIndentCharacters(i),"${0}\n}")).build()}},{key:"canUse",value:function(n){return(0,z.Z)((0,J.Z)(s.prototype),"canUse",this).call(this,n)&&!this.isArrayLiteral(n)&&!this.isCallExpression(n)}}]),s}(u),d=function(n){(0,_.Z)(a,n);var e=(0,W.Z)(a);function a(){return(0,i.Z)(this,a),e.apply(this,arguments)}return(0,o.Z)(a,[{key:"buildCompletionItem",value:function(n,e){var i=(0,z.Z)((0,J.Z)(a.prototype),"getArrayItemNames",this).call(this,n);return r("forof",n,e).description("for (let item of expr)").replace("for (let ".concat(t.getPlaceholderWithOptions(i)," of {{expr}}) {\n").concat(t.getIndentCharacters(e),"${0}\n}")).build()}}]),a}(u),f=function(n){(0,_.Z)(s,n);var a=(0,W.Z)(s);function s(){return(0,i.Z)(this,s),a.apply(this,arguments)}return(0,o.Z)(s,[{key:"buildCompletionItem",value:function(n,i){var o=n.parent&&e.isAwaitExpression(n.parent),a=o?"(":"",c=o?")":"",u=(0,z.Z)((0,J.Z)(s.prototype),"getArrayItemNames",this).call(this,n);return r("foreach",n,i).description("expr.forEach(item => )").replace("".concat(a,"{{expr}}").concat(c,".forEach(").concat(t.getPlaceholderWithOptions(u)," => {\n").concat(t.getIndentCharacters(i),"${0}\n})")).build()}}]),s}(u);return[new c,new c("let"),new c("const"),new l("fori"),new l("forr"),new d("forof"),new f("foreach")]},Y=t(2389),nn=function(n){var e=Y.U?t.g.ts:{},r={monaco:n,ts:e},a=V(r),s=Q(r),c=new(function(){function n(){(0,i.Z)(this,n)}return(0,o.Z)(n,[{key:"provideCompletionItems",value:function(n,t,r,i){var o,a=n.getLineContent(t.lineNumber).lastIndexOf(".",t.column-1),c=n.getWordAtPosition(t),u=(null!==(o=null===c||void 0===c?void 0:c.startColumn)&&void 0!==o?o:t.column)-1===a+1;if(-1===a||!u)return[];var l=[];try{var d=this._getNodeBeforeTheDot(n,t,a);if(d){var f=this._getIndentInfo(n,d),p=this._getNodeForReplacement(d);s.forEach((function(n){n.canUse(e.isNonNullExpression(d)?d.expression:d)&&l.push(n.buildCompletionItem(p,f))}))}}catch(h){console.warn("Error while building postfix autocomplete items:",h)}return l}},{key:"_getNodeBeforeTheDot",value:function(n,t,r){var i=n.getValueInRange({startLineNumber:1,endLineNumber:t.lineNumber,startColumn:1,endColumn:r+1}),o=e.createSourceFile("test.ts",i,e.ScriptTarget.ES5,!0),s=e.getPositionOfLineAndCharacter(o,t.lineNumber-1,r-1),c=a.findNodeAtPosition(o,s);return e.isIdentifier(c)&&e.isPropertyAccessExpression(c.parent)?c.parent:c}},{key:"_getNodeForReplacement",value:function(n){return e.isTemplateSpan(n)||e.isPrefixUnaryExpression(n.parent)||e.isPropertyAccessExpression(n.parent)?n.parent:e.isTypeReferenceNode(n.parent)||n.parent.parent&&e.isTypeReferenceNode(n.parent.parent)?a.findClosestParent(n,e.SyntaxKind.TypeReference):n}},{key:"_getIndentInfo",value:function(n,t){var r,i,o=(null===(r=n.getOptions())||void 0===r?void 0:r.tabSize)||4,s=(null===(i=n.getOptions())||void 0===i?void 0:i.insertSpaces)||true,c=t.getSourceFile(),u=e.getLineAndCharacterOfPosition(c,t.getStart(c)),l=n.getLineContent(u.line+1).substring(0,n.getLineFirstNonWhitespaceColumn(u.line+1)-1),d=0;return a.AllTabs.test(l)?d=l.length:a.AllSpaces.test(l)&&(d=l.length/o),{tabSize:o,insertSpaces:s,indentSize:d,leadingWhitespace:l}}}]),n}());return{triggerCharacters:["."],provideCompletionItems:function(n,e,t,r){return{suggestions:c.provideCompletionItems(n,e,t,r)||[]}}}},en=new(function(){function n(){(0,i.Z)(this,n),this.dataSource={}}return(0,o.Z)(n,[{key:"has",value:function(n){return n in this.dataSource}},{key:"get",value:function(n){return this.dataSource[n]}},{key:"set",value:function(n,e){this.dataSource[n]=e}}]),n}()),tn=function(n,e,t){n.languages.typescript.javascriptDefaults.addExtraLib(e,t),n.editor.createModel(e,"typescript",n.Uri.parse(t))},rn=[{name:"lodash",path:"https://cdn.jsdelivr.net/npm/@types/lodash@4.14.93/index.d.ts"},{name:"dayjs",path:"https://cdn.jsdelivr.net/npm/dayjs@1.11.6/index.d.ts"},{name:"cryptoJS",path:"https://cdn.jsdelivr.net/npm/@types/crypto-js@4.1.1/index.d.ts"},{name:"xlsx",path:"https://cdn.jsdelivr.net/npm/xlsx@0.18.5/types/index.d.ts"}];var on=function(n){if(n){var e=n.languages.typescript.javascriptDefaults.getExtraLibs()||{};Promise.all(rn.map((function(n){return function(n){var e=n.name,t={name:e};if(en.has(e))return t.content=en.get(e),Promise.resolve(t);var r=function(){var e=(0,$.Z)((0,K.Z)().mark((function e(){var r;return(0,K.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.path);case 2:return r=e.sent,e.next=5,r.text();case 5:return t.content=e.sent,e.abrupt("return",t.content?t:null);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r()}(n)}))).then((function(t){t.filter((function(n){return!!n})).forEach((function(t){en.set(t.name,t.content);var r="ts:web/".concat(t.name,"/index.d.ts");if(!(r in e)){var i="declare module '".concat(t.name,"' { ").concat(t.content," }");tn(n,i,r)}}));var r="ts:inner/converter.d.ts";r in e||tn(n,'declare const inputData: (string | Object | File[]);\ndeclare const inputObj: (Object | null)\ndeclare const Util: ({\n    _: typeof import("lodash"),,\n    dayjs: typeof import("dayjs"),\n    cryptoJS: typeof import("cryptoJS"),\n    XLSX: typeof import("xlsx"),\n    message: {\n        info(content: string, duration?: number): void;\n        success(content: string, duration?: number): void;\n        error(content: string, duration?: number): void;\n        warning(content: string, duration?: number): void;\n        loading(content: string, duration?: number): void;\n    }\n});',r)})).catch((function(n){return console.error("load extraLibs error",n)}));try{n.languages.registerCompletionItemProvider("javascript",nn(n))}catch(t){console.error("load completionPostfix error",t)}}},an=t(6417),sn=function(n){var e=n.value,t=n.onChange,r=n.editorHelpRender,i=a.useState(!0),o=(0,s.Z)(i,2),c=o[0],u=o[1];return(0,an.jsxs)(an.Fragment,{children:[r&&r(),(0,an.jsx)("br",{}),(0,an.jsx)(O.Z,{style:{marginTop:"5px",marginBottom:"13px"},children:(0,an.jsx)(F.ZP.Group,{size:"small",optionType:"button",onChange:function(){return u(!c)},options:[{label:"monaco",value:"1"},{label:"input",value:"0"}],value:c?"1":"0"})}),c?(0,an.jsx)(R.ZP,{height:"90%",language:"javascript",theme:"vs-dark",value:e,onChange:t,beforeMount:on}):(0,an.jsx)(N.Z.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u811a\u672c",rows:8,value:e,onChange:function(n){return t(n.target.value)}})]})},cn=t(2019),un=P.addConfig,ln=P.updateConfig,dn=P.deleteConfig,fn=I.Z.Text,pn=function(n){var e=n.lang,t=n.config,r=n.scriptContent,i=n.onAddSuccess,o=t.name,c=t.description||o,u=a.useState(),l=(0,s.Z)(u,2),f=l[0],p=l[1],h=a.useState(),x=(0,s.Z)(h,2),m=x[0],g=x[1];return(0,an.jsx)(D.Z,{icon:null,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",onConfirm:function(){if(!r)return B.ZP.warn("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),!1;w(un,e,{name:f||o,description:m||f||c,scriptContent:r}).then((function(){p(null),g(null),B.ZP.success("\u6dfb\u52a0\u914d\u7f6e\u6210\u529f"),i()})).catch((function(n){return B.ZP.error("\u6dfb\u52a0\u914d\u7f6e\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+n)}))},title:(0,an.jsxs)(an.Fragment,{children:[(0,an.jsx)(N.Z,{addonBefore:"\u529f\u80fd\u540d\u79f0",placeholder:o,value:f,onChange:function(n){return p(n.target.value)}}),(0,an.jsx)(N.Z,{style:{marginTop:"3px"},addonBefore:"\u529f\u80fd\u4f5c\u7528",placeholder:c,value:m,onChange:function(n){return g(n.target.value)}})]}),children:(0,an.jsx)(d.Z,{children:"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u914d\u7f6e"})})},hn=function(n){var e=n.lang,t=n.context,r=n.config,i=n.refreshScript,o=n.editorHelpRender,f=a.useState(!1),p=(0,s.Z)(f,2),h=p[0],x=p[1],m=a.useState(r.scriptContent),g=(0,s.Z)(m,2),v=g[0],y=g[1];return(0,an.jsxs)(an.Fragment,{children:[(0,an.jsx)(l.Z,{title:r.description,mouseEnterDelay:1,children:(0,an.jsx)(d.Z,{onClick:function(){return x(!0)},children:r.name})}),(0,an.jsx)(L.Z,{title:r.name,open:h,width:"75%",onClose:function(){x(!1)},footer:(0,an.jsx)(c.Z,{justify:"end",children:(0,an.jsxs)(O.Z,{children:[(0,an.jsx)(u.Z,{children:(0,an.jsx)(pn,{lang:e,config:r,scriptContent:v,onAddSuccess:function(){x(!1),i()}},"add")}),(0,an.jsx)(u.Z,{children:(0,an.jsx)(d.Z,{type:"primary",onClick:function(){v?(t.onConvert([v]),x(!1)):B.ZP.warn("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")},children:"\u8f6c\u6362"},"convert")})]})}),children:(0,an.jsx)(sn,{value:v,onChange:y,editorHelpRender:o})})]})},xn=function(n){var e=n.lang,t=n.config,r=n.visible,i=n.setVisible,o=n.editorHelpRender,l=n.refreshScript,f=a.useState(t.name),p=(0,s.Z)(f,2),h=p[0],x=p[1],m=a.useState(t.description),g=(0,s.Z)(m,2),v=g[0],y=g[1],Z=a.useState(t.scriptContent),C=(0,s.Z)(Z,2),j=C[0],S=C[1],b=function(){return i(!1)};return(0,an.jsxs)(L.Z,{open:r,width:"75%",onCancel:b,title:h!==t.name||v!==t.description||j!==t.scriptContent?(0,an.jsx)(fn,{style:{color:"#1890ff"},strong:!0,children:"\u7f16\u8f91\u914d\u7f6e *"}):(0,an.jsx)(fn,{children:"\u7f16\u8f91\u914d\u7f6e"}),onClose:b,footer:(0,an.jsx)(c.Z,{justify:"end",children:(0,an.jsxs)(O.Z,{children:[(0,an.jsx)(u.Z,{children:(0,an.jsx)(d.Z,{onClick:function(){x(t.name),y(t.description),S(t.scriptContent)},children:"\u91cd\u7f6e"},"reset")}),(0,an.jsx)(u.Z,{children:(0,an.jsx)(d.Z,{onClick:function(){w(dn,e,t.id).then((function(){B.ZP.success("\u5220\u9664\u914d\u7f6e\u6210\u529f"),b(),l()})).catch((function(n){return B.ZP.error("\u5220\u9664\u914d\u7f6e\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+n)}))},children:"\u5220\u9664\u914d\u7f6e"},"remove")}),(0,an.jsx)(u.Z,{children:(0,an.jsx)(d.Z,{type:"primary",onClick:function(){if(h)if(j){var n={id:t.id,name:h,description:v||h,scriptContent:j};w(ln,e,n).then((function(){B.ZP.success("\u66f4\u65b0\u914d\u7f6e\u6210\u529f"),b(),l()})).catch((function(n){return console.log(n)&B.ZP.error("\u66f4\u65b0\u914d\u7f6e\u5931\u8d25, \u5931\u8d25\u539f\u56e0: "+n)}))}else B.ZP.error("\u811a\u672c\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");else B.ZP.error("\u529f\u80fd\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")},children:"\u66f4\u65b0\u914d\u7f6e"},"update")})]})}),children:[(0,an.jsx)(N.Z,{addonBefore:"\u529f\u80fd\u540d\u79f0",value:h,onChange:function(n){return x(n.target.value)}}),(0,an.jsx)(N.Z,{style:{marginTop:"3px"},addonBefore:"\u529f\u80fd\u4f5c\u7528",value:v,onChange:function(n){return y(n.target.value)}}),(0,an.jsx)(sn,{lang:e,value:j,onChange:S,editorHelpRender:o})]})},mn=function(n){var e=n.lang,t=n.config,r=n.handleConvert,i=n.editorHelpRender,o=n.refreshScript,c=a.useState(!1),u=(0,s.Z)(c,2),f=u[0],p=u[1];return(0,an.jsxs)(an.Fragment,{children:[(0,an.jsx)(l.Z,{title:t.description,mouseEnterDelay:1,children:(0,an.jsx)(d.Z,{type:"dashed",onClick:function(n){return r(t.scriptContent)},children:t.name})}),(0,an.jsx)(l.Z,{title:"\u7f16\u8f91",mouseEnterDelay:2,children:(0,an.jsx)(d.Z,{shape:"circle",type:"text",onClick:function(n){return p(!0)},icon:(0,an.jsx)(cn.Z,{}),size:"small"})}),(0,an.jsx)(xn,{lang:e,config:t,visible:f,setVisible:p,editorHelpRender:i,refreshScript:o})]})},gn=t(2984),vn=t.n(gn),yn=new(function(){function n(){(0,i.Z)(this,n),this.featurePrefix="devinx3",this.verionPrefix="ver",this.fixVersion="000",this.fixSecret="ver000"}return(0,o.Z)(n,[{key:"encrypt",value:function(n,e){return vn().AES.encrypt(n,e).toString()}},{key:"dencrypt",value:function(n,e){return vn().AES.decrypt(n,e).toString(vn().enc.Utf8)}},{key:"convertSecret",value:function(n){return n>=100&&n<=999?this.verionPrefix+n:this.fixSecret}},{key:"getFeatureSuffix",value:function(n){return n===this.fixSecret?"S":"l"}},{key:"getFeatureSecretIndex",value:function(n){if(n<100)return-1;for(var e=n-10-10,t=[],r=[17,27,23,3,19,11],i=0;i<6;i++)t.push(10+(e*r[i]/30^0));return t}},{key:"addSecret",value:function(n,e,t){return n.slice(0,e)+t+n.slice(e)}},{key:"removeSecret",value:function(n,e){return n.slice(0,e)+n.slice(e+1)}},{key:"convertExportData",value:function(n,e){var t=this.convertSecret(e),r=this.encrypt(n,t);r.length<100&&(t=this.fixSecret,r=this.encrypt(n,t));var i=this.featurePrefix,o=r.length,a=this.getFeatureSuffix(t);if(t===this.fixSecret)return i+o+a+r;for(var s=this.getFeatureSecretIndex(o),c=r,u=s.length-1;u>=0;u--)c=this.addSecret(c,s[u],t[u]);return i+o+a+c}},{key:"convertImportData",value:function(n){var e=n.slice(0,this.featurePrefix.length);if(e!==this.featurePrefix)throw new Error("\u5339\u914d\u7279\u5f81\u524d\u7f00\u5f02\u5e38");var t=e.length+10,r="l",i=n.indexOf(r);if((i<0||i>=t)&&(r="S",(i=n.indexOf(r))<0||i>=t))throw new Error("\u5339\u914d\u7279\u5f81\u540e\u7f00\u5f02\u5e38");var o=Number(n.slice(e.length,i));if(!o)throw new Error("\u5339\u914d\u6570\u636e\u957f\u5ea6\u5f02\u5e38");var a=this.getFeatureSecretIndex(o),s=n.slice(i+1);if(-1===a)return this.encrypt(n,s);for(var c=s,u="",l=0;l<a.length;l++)u+=c[a[l]],c=this.removeSecret(c,a[l]);return this.dencrypt(c,u)}}]),n}()),Zn=function(n){var e=[];return n&&n.forEach((function(t,i){var o=(0,r.Z)({},t);o.id=-10-10*(n.length-i),e.push(o)})),e},Cn=function(n){return n.id<=-10},jn=function(n){return n<=-10},Sn=t(870),bn=t(2346),kn=t(2697),En=t(1656),Tn=t(627),An=t(7515),wn=t(4585),Pn=t(6407),In=t(445),Bn=t(3036),Dn=t(3988),Nn=t(658),Ln=t.n(Nn),On=P.addConfig,Fn=P.batchDeleteConfig,Rn=function(n){var e=n.lang,t=n.dataSource,i=n.refreshScript,o=a.useState(!1),c=(0,s.Z)(o,2),u=c[0],p=c[1],h=a.useState([]),x=(0,s.Z)(h,2),m=x[0],g=x[1],v=a.useState(!1),y=(0,s.Z)(v,2),Z=y[0],C=y[1],j=a.useState(!1),S=(0,s.Z)(j,2),b=S[0],k=S[1],E=a.useState(!1),T=(0,s.Z)(E,2),A=T[0],P=T[1],D=a.useState(),N=(0,s.Z)(D,2),L=N[0],O=N[1],F=function(n){var e=n.target.value,r=(0,U.Z)(m),i=r.indexOf(e);n.target.checked?i<0&&r.push(e):i>=0&&r.splice(i,1),g(r),C(!!r.length&&r.length<t.length),k(r.length===t.length)};return(0,an.jsxs)(an.Fragment,{children:[(0,an.jsx)(d.Z,{type:"link",onClick:function(){return p(!0)},children:"\u914d\u7f6e\u7ba1\u7406"}),(0,an.jsx)(Sn.Z,{title:"\u914d\u7f6e\u7ba1\u7406",open:u,footer:null,onCancel:function(){return p(!1)},children:(0,an.jsx)(bn.ZP,{itemLayout:"horizontal",dataSource:t,rowKey:"id",header:(0,an.jsxs)(an.Fragment,{children:[(0,an.jsx)(kn.Z,{indeterminate:Z,disabled:0===t.length,checked:b,onChange:function(n){if(n.target.checked){var e,r=[],i=(0,f.Z)(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r.push(o.id)}}catch(a){i.e(a)}finally{i.f()}g(r)}else g([]);C(!1),k(n.target.checked)},children:"\u5168\u9009"}),(0,an.jsx)(d.Z,{type:"text",disabled:0===t.length,icon:(0,an.jsx)(An.Z,{}),onClick:function(){0!==m.length?w(Fn,e,m).then((function(){B.ZP.success("\u5220\u9664\u6210\u529f"),g([]),k(!1),C(!1),i()})).catch((function(n){return B.ZP.error("\u5220\u9664\u5931\u8d25, \u539f\u56e0\u662f: "+n)})):B.ZP.info("\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u884c, \u65e0\u9700\u5220\u9664")},children:"\u5220\u9664"}),(0,an.jsx)(d.Z,{type:"text",disabled:0===t.length,icon:(0,an.jsx)(wn.Z,{}),onClick:function(){if(0!==m.length){var n,e=[],i=(0,f.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=(0,r.Z)({},o);delete a.id,e.push(a)}}catch(u){i.e(u)}finally{i.f()}var s=yn.convertExportData(JSON.stringify(t),101),c="config"+Ln()().format("MMDDHHmmss");Bn.Z.download(s,c)}else B.ZP.info("\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u884c, \u65e0\u9700\u5bfc\u51fa")},children:"\u5bfc\u51fa"}),(0,an.jsx)(l.Z,{title:"\u4e0d\u652f\u6301\u5bfc\u5165",mouseEnterDelay:2,children:(0,an.jsx)(d.Z,{type:"text",disabled:0===t.length,icon:(0,an.jsx)(Pn.Z,{}),onClick:function(){0!==m.length?Dn.Z.copyToClipboard(JSON.stringify(t))&&B.ZP.success("\u590d\u5236\u6210\u529f"):B.ZP.info("\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u884c, \u65e0\u6cd5\u590d\u5236")},children:"\u590d\u5236JSON\u914d\u7f6e"})})]}),footer:(0,an.jsx)(En.Z,{maxCount:1,beforeUpload:function(n){return function(n){return Bn.Z.readAsText(n,(function(n){var t=null;try{t=JSON.parse(yn.convertImportData(n))}catch(a){return void B.ZP.error("\u5bfc\u5165\u5931\u8d25, \u5f02\u5e38\u6d88\u606f: "+a.message)}if(t&&t.length&&t.length>0){var r=0,o="";Promise.all(t.map(function(){var n=(0,$.Z)((0,K.Z)().mark((function n(t){return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.name=t.name+"(by impory)",n.prev=1,n.next=4,w(On,e,t);case 4:return n.abrupt("return",r++);case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",o=o+n.t0+";");case 10:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}())).finally((function(){0!==r?(r===t.length?B.ZP.success("\u5168\u90e8\u5bfc\u5165\u6210\u529f"):B.ZP.warn("\u90e8\u5206\u5bfc\u5165\u6210\u529f, \u5f02\u5e38\u4e2a\u6570"+(t.length-r)+", \u5f02\u5e38\u6d88\u606f: "+o),i()):B.ZP.error("\u5168\u90e8\u5bfc\u5165\u5931\u8d25, \u5f02\u5e38\u6d88\u606f: ")}))}})),!1}(n)},children:(0,an.jsx)(d.Z,{icon:(0,an.jsx)(In.Z,{}),children:"\u5bfc\u5165"})}),renderItem:function(n){return(0,an.jsx)(bn.ZP.Item,{actions:[(0,an.jsx)(d.Z,{type:"link",onClick:function(){return e=n.scriptContent,O(e),void P(!0);var e},children:"\u811a\u672c"},"list-item-srcipt")],children:(0,an.jsx)(Tn.Z,{loading:!1,children:(0,an.jsx)(bn.ZP.Item.Meta,{avatar:(0,an.jsx)(kn.Z,{value:n.id,checked:m.indexOf(n.id)>=0,onChange:F}),title:n.name,description:n.description})})})}})}),(0,an.jsx)(Sn.Z,{title:"\u811a\u672c\u5185\u5bb9",open:A,width:"60%",footer:null,onCancel:function(){O(null),P(!1)},children:(0,an.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:(0,an.jsx)(I.Z.Paragraph,{code:!0,copyable:!0,children:L})})})]})},Kn=function(n){var e=n.lang,t=n.context,r=n.basicButtons,i=n.expandAddButton,o=n.editorHelpRender,a=n.refreshManage;r=Zn(r);var s=i?function(n){return P.listAllConfig(n)}(e):[],f=function(n){return t.onConvert([n])};return(0,an.jsxs)(an.Fragment,{children:[(0,an.jsxs)(c.Z,{style:{marginTop:"10px"},children:[r.map((function(n,e){return(0,an.jsx)(u.Z,{style:{marginLeft:"10px"},children:(0,an.jsx)(l.Z,{title:n.description,mouseEnterDelay:1,children:(0,an.jsx)(d.Z,{onClick:function(){return f(n.scriptContent)},children:n.name})})},e)})),i?(0,an.jsx)(u.Z,{style:{marginLeft:"10px"},children:(0,an.jsx)(hn,{lang:e,context:t,config:i,editorHelpRender:o,refreshScript:a})}):null]}),s.length>0&&(0,an.jsxs)(c.Z,{style:{marginTop:"10px"},children:[(0,an.jsx)(Rn,{lang:e,dataSource:s,refreshScript:a}),s.map((function(n,t){return(0,an.jsx)(u.Z,{style:{marginLeft:"10px"},children:(0,an.jsx)(mn,{lang:e,config:n,editorHelpRender:o,refreshScript:a,handleConvert:f})},t)}))]})]})},$n=t(6842),Un=t(7966),Hn=t(2138),Mn=P.addCombination,qn=P.updateCombination,Vn=P.deleteCombination,zn=I.Z.Text,Jn="\u81ea\u5b9a\u4e49\u7ec4\u5408",_n=function(n){var e=n.lang,t=n.combinationConfig,r=n.refreshManage,i=a.useState(),o=(0,s.Z)(i,2),c=o[0],u=o[1],l=a.useState(),f=(0,s.Z)(l,2),p=f[0],h=f[1];t.name=t.name||Jn,t.description=t.description||t.name;return(0,an.jsx)(D.Z,{icon:null,cancelText:"\u53d6\u6d88",okText:"\u65b0\u5efa",onConfirm:function(){var n={};n.name=c||Jn,n.description=p||n.name,n.combination=[],w(Mn,e,n).then((function(){B.ZP.success("\u521b\u5efa\u6210\u529f"),r()})).catch((function(n){return B.ZP.warn("\u521b\u5efa\u5931\u8d25, \u539f\u56e0\u662f"+n)}))},placement:"right",title:(0,an.jsxs)(an.Fragment,{children:[(0,an.jsx)(I.Z.Title,{level:5,children:"\u65b0\u5efa\u7ec4\u5408"}),(0,an.jsx)(N.Z,{addonBefore:"\u7ec4\u5408\u540d\u79f0",placeholder:t.name,value:c,onChange:function(n){return u(n.target.value)}}),(0,an.jsx)(N.Z,{style:{marginTop:"3px"},addonBefore:"\u7ec4\u5408\u4f5c\u7528",placeholder:t.description,value:p,onChange:function(n){return h(n.target.value)}})]}),children:(0,an.jsx)(d.Z,{style:{marginLeft:"10px"},shape:"circle",type:"text",icon:(0,an.jsx)(Hn.Z,{}),size:"small"})})},Wn=function(n){var e=n.visible,t=n.setVisible,i=n.handleAddConfig,o=n.configDataSource,c=a.useState(),u=(0,s.Z)(c,2),d=u[0],p=u[1],h=[{title:"\u540d\u79f0",dataIndex:"name",render:function(n,e){return(0,an.jsx)(l.Z,{title:e.description,children:n})}},{title:"\u7c7b\u522b",dataIndex:"costom",render:function(n){return 1===n?(0,an.jsx)(I.Z.Text,{type:"warning",children:"\u81ea\u5b9a\u4e49"}):(0,an.jsx)(I.Z.Text,{type:"success",children:"\u7cfb\u7edf"})}}],x=function(){t(!1),p(void 0)},m={type:"radio",onChange:function(n,e){p(Number(n))},selectedRowKeys:[d]};return(0,an.jsx)(Sn.Z,{title:"\u914d\u7f6e\u9009\u62e9",open:e,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",onCancel:x,onOk:function(){i(d),x()},children:(0,an.jsx)($n.Z,{rowSelection:(0,r.Z)({},m),rowKey:"id",columns:h,dataSource:function(){var n,e=[],t=(0,f.Z)(o);try{for(t.s();!(n=t.n()).done;){var r=n.value;e.push({id:r.id,name:r.name,description:r.description,costom:Cn(r)?0:1})}}catch(i){t.e(i)}finally{t.f()}return e}(),pagination:!1})})},Gn=function(n){var e=n.lang,t=n.combinationConfig,i=n.refreshManage,o=n.handleConvert,p=n.configDataSource,h=a.useState(!1),x=(0,s.Z)(h,2),m=x[0],g=x[1],v=a.useState(!1),y=(0,s.Z)(v,2),Z=y[0],C=y[1],j=a.useState(!1),S=(0,s.Z)(j,2),b=S[0],k=S[1],E=a.useState(t.name),T=(0,s.Z)(E,2),A=T[0],I=T[1],D=a.useState(t.description),F=(0,s.Z)(D,2),R=F[0],K=F[1],$=a.useState((0,U.Z)(t.combination)),H=(0,s.Z)($,2),M=H[0],q=H[1],V=function(n){var e,t={},i=(0,f.Z)(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;t[o.id]=(0,r.Z)({},o)}}catch(a){i.e(a)}finally{i.f()}return t}(p),z=M.map((function(n,e){var t=V[n]||{};return t.index=e,t})),J=function(){g(!1)},_=function(n){k(n),C(!0)};return(0,an.jsxs)(an.Fragment,{children:[(0,an.jsx)(l.Z,{style:{marginLeft:"15px"},title:t.description,mouseEnterDelay:1,children:(0,an.jsx)(d.Z,{type:"dashed",onClick:function(n){return o(t.combination)},children:t.name})}),(0,an.jsx)(l.Z,{title:"\u7f16\u8f91",mouseEnterDelay:2,children:(0,an.jsx)(d.Z,{shape:"circle",type:"text",onClick:function(n){return g(!0)},icon:(0,an.jsx)(cn.Z,{}),size:"small"})}),(0,an.jsxs)(L.Z,{open:m,onCancel:J,title:function(){if(M.length!==t.combination.length)return!0;for(var n=0;n++;n<=M.length)if(M[n]!==t.combination[n])return!0;return A!==t.name||R!==t.description}()?(0,an.jsx)(zn,{style:{color:"#1890ff"},strong:!0,children:"\u7f16\u8f91\u7ec4\u5408 *"}):(0,an.jsx)(zn,{children:"\u7f16\u8f91\u7ec4\u5408"}),onClose:J,footer:(0,an.jsx)(c.Z,{justify:"end",children:(0,an.jsxs)(O.Z,{children:[(0,an.jsx)(u.Z,{children:(0,an.jsx)(d.Z,{onClick:function(){I(t.name),K(t.description),q((0,U.Z)(t.combination))},children:"\u91cd\u7f6e"},"reset")}),(0,an.jsx)(u.Z,{children:(0,an.jsx)(d.Z,{onClick:function(){w(Vn,e,t.id).then((function(){B.ZP.success("\u5220\u9664\u6210\u529f"),g(!1),i()})).catch((function(n){return B.ZP.success("\u5220\u9664\u5931\u8d25, \u539f\u56e0\u662f"+n)}))},children:"\u5220\u9664\u7ec4\u5408"},"delete")}),(0,an.jsx)(u.Z,{children:(0,an.jsx)(d.Z,{type:"primary",onClick:function(){if(0!==M.length)if(A){var n,r=(0,f.Z)(M);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!Cn({id:o})&&!P.queryConfigById(e,o))return void B.ZP.warn("\u811a\u672c\u914d\u7f6e\u4e0d\u5b58\u5728, \u8bf7\u5237\u65b0\u9875\u9762")}}catch(s){r.e(s)}finally{r.f()}var a={id:t.id,name:A,description:R||A,combination:M};w(qn,e,a).then((function(){B.ZP.success("\u4fdd\u5b58\u6210\u529f"),g(!1),i()})).catch((function(n){return B.ZP.error("\u4fdd\u5b58\u5931\u8d25, \u539f\u56e0\u662f: "+n)}))}else B.ZP.warn("\u8bf7\u7ef4\u62a4\u7ec4\u5408\u540d\u79f0");else B.ZP.warn("\u8bf7\u5148\u7ef4\u62a4\u8282\u70b9")},children:"\u4fdd\u5b58\u7ec4\u5408"})})]})}),children:[(0,an.jsx)(N.Z,{addonBefore:"\u7ec4\u5408\u540d\u79f0",value:A,onChange:function(n){return I(n.target.value)}}),(0,an.jsx)(N.Z,{style:{marginTop:"5px",marginBottom:"15px"},addonBefore:"\u7ec4\u5408\u4f5c\u7528",value:R,onChange:function(n){return K(n.target.value)}}),(0,an.jsxs)(Un.Z,{mode:"left",children:[0===z.length&&(0,an.jsx)(Un.Z.Item,{color:"gray",children:(0,an.jsx)(l.Z,{title:"\u6dfb\u52a0",mouseEnterDelay:2,children:(0,an.jsx)(d.Z,{shape:"circle",type:"text",icon:(0,an.jsx)(Hn.Z,{}),onClick:function(n){return _(-1)}})})},0),z.map((function(n,e){return(0,an.jsxs)(Un.Z.Item,{color:n.id>0?"#faad14":"#52c41a",children:[(0,an.jsx)(l.Z,{title:"\u6dfb\u52a0",mouseEnterDelay:2,children:(0,an.jsx)(d.Z,{shape:"circle",type:"text",icon:(0,an.jsx)(Hn.Z,{}),onClick:function(n){return _(e)}})}),(0,an.jsx)(l.Z,{title:"\u5220\u9664",mouseEnterDelay:2,children:(0,an.jsx)(d.Z,{shape:"circle",type:"text",icon:(0,an.jsx)(An.Z,{}),onClick:function(n){return function(n){M.splice(n,1),q((0,U.Z)(M))}(e)}})}),(0,an.jsx)(l.Z,{title:n.description,mouseEnterDelay:1,children:n.name})]},e)}))]})]}),(0,an.jsx)(Wn,{visible:Z,setVisible:C,handleAddConfig:function(n){if(Z){for(var e=[],t=0;t<M.length;t++)e.push(M[t]),t===b&&e.push(n);-1===b&&e.push(n),q(e)}},configDataSource:p})]})},Xn=function(){return(0,an.jsx)(d.Z,{type:"link",disabled:!0,children:"\u7ec4\u5408\u7ba1\u7406"})},Qn=function(n){var e=n.lang,t=n.context,r=n.basicButtons,i=n.expandAddButton,o=function(n){return P.listAllCombination(n)||[]}(e)||[],l=a.useState(!1),d=(0,s.Z)(l,2),p=d[0],h=d[1],x=function(n){return P.listAllConfig(n)||[]}(e);if(0===x.length)return(0,an.jsx)(an.Fragment,{});r=Zn(r);var m=function(){return h(!p)},g=function(n){if(n&&0!==n.length){var i=null,o=n.map((function(n){var t=function(n,e,t){if(jn(t)){var r,i=(0,f.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t===o.id)return o}}catch(a){i.e(a)}finally{i.f()}}return P.queryConfigById(n,t)}(e,r,n);return t?t.scriptContent?{name:t.name,content:t.scriptContent}:(i="\u811a\u672c\u5185\u5bb9\u4e3a\u7a7a",null):(i="\u914d\u7f6e\u4e0d\u5b58\u5728",null)}));if(!i)return t.onConvert(o);B.ZP.error(i)}else B.ZP.error("\u4e0d\u5b58\u5728\u4efb\u4f55\u914d\u7f6e")},v=[].concat((0,U.Z)(r),(0,U.Z)(x));return(0,an.jsxs)(c.Z,{style:{marginTop:"10px"},children:[(0,an.jsxs)(u.Z,{children:[(0,an.jsx)(Xn,{}),(0,an.jsx)(_n,{lang:e,combinationConfig:i,refreshManage:m})]}),o.map((function(n,t){return(0,an.jsx)(u.Z,{style:{marginLeft:"10px"},children:(0,an.jsx)(Gn,{lang:e,combinationConfig:n,refreshManage:m,configDataSource:v,handleConvert:g})},t)}))]})},Yn=function(n){var e=n.lang,t=n.context,r=n.buttons,i=void 0===r?{}:r,o=n.expandScriptButton,c=void 0===o?{}:o,u=n.expandCombinationButton,l=void 0===u?{}:u,d=n.editorHelpRender,f=a.useState(!1),p=(0,s.Z)(f,2),h=p[0],x=p[1];return(0,an.jsxs)(an.Fragment,{children:[(0,an.jsx)(Kn,{lang:e,context:t,basicButtons:i,expandAddButton:c,editorHelpRender:d,refreshManage:function(){return x(!h)}}),(0,an.jsx)(Qn,{lang:e,context:t,basicButtons:i,expandAddButton:l})]})},ne=t(2652),ee=t(6031),te=t.n(ee),re=t(3750),ie={_:te(),dayjs:Ln(),cryptoJS:vn(),XLSX:re,message:B.ZP};function oe(n,e){return null===n||void 0===n?e:n}function ae(n,e,t){return function(n,e,t){return new Function("inputData","inputObj","Util",n)(e,t,(0,r.Z)({},ie))}(t,e,n?n(e):null)}function se(n,e,t){return new Promise((function(r,i){for(var o=function(n){return r((e=n)instanceof Object?JSON.stringify(e,null,2):oe(e,""));var e},a=function(n,e){return console.error(e)&i(function(n,e){var t=e instanceof Object?oe(e.message,""):e;return null===n||void 0===n?t:"".concat(n,": ").concat(t)}(n,e))},s=t,c="",u=function(t){var u=e[t],l=u.name,d=Dn.Z.isStr(u)?u:u.content;try{if((c=ae(n,s,d))instanceof Promise)return c.then((function(a){t>=e.length-1?o(a):se(n,e.splice(t+1),a).then(r).catch(i)})).catch((function(n){a(l,n)})),{v:void 0}}catch(f){return a(l,f),{v:void 0}}s=c},l=0;l<e.length;l++){var d=u(l);if("object"===typeof d)return d.v}o(c)}))}var ce=function(){function n(){(0,i.Z)(this,n),this.checkInputData=null}return(0,o.Z)(n,[{key:"setCheckInputData",value:function(n){this.checkInputData=n}},{key:"onCheckInputData",value:function(n){return!this.checkInputData||this.checkInputData(n)}}]),n}(),ue=function(n){var e=n.context,t=n.dataBlockRender,r=n.handleInputObj,i=a.useState(""),o=(0,s.Z)(i,2),c=o[0],u=o[1],l=a.useState(""),d=(0,s.Z)(l,2),f=d[0],p=d[1],h=a.useState(""),x=(0,s.Z)(h,2),m=x[0],g=x[1],v=a.useState(!1),y=(0,s.Z)(v,2),Z=y[0],C=y[1],j=a.useMemo((function(){return new ce}),[]);return e.setConvertHandler((function(n){Z?console.warn("Conversion failed because loading"):(C(!0),setTimeout((function(){var e=j.onCheckInputData(c);if(!0!==e)return p("")&g(e)&C(!1);var t=function(n){return p("")&g(n)};se(r,n,c).then((function(n){return""===n?t("\u65e0\u6267\u884c\u7ed3\u679c"):p(n)&g("")})).catch(t).finally((function(){return C(!1)}))}),60))})),(0,an.jsx)(ne.Z,{spinning:Z,children:t({state:{inputData:c,setInputData:u,outputData:f,setOutputData:p,errorMsg:m,setErrorMsg:g},setCheckInputData:function(n){return j.setCheckInputData(n)}})})},le=function(){function n(){(0,i.Z)(this,n),this.convertHandler=null}return(0,o.Z)(n,[{key:"setConvertHandler",value:function(n){this.convertHandler=n}},{key:"hasConvertHandler",value:function(){return!!this.convertHandler}},{key:"onConvert",value:function(n){if(this.convertHandler)return this.convertHandler(n);console.warn("No convert handler")}}]),n}(),de={};de[v.b.JSON]=function(n){return n instanceof Object?n:JSON.parse(n)};var fe=function(n){var e=n.lang,t=void 0===e?"txt":e,i=n.manage,o=n.handleInputObj,s=n.dataBlockRender,c=a.useMemo((function(){return new le}),[]),u=(0,r.Z)((0,r.Z)({lang:t},i),{},{context:c}),l={context:c,dataBlockRender:s,handleInputObj:o||de[t]};return(0,an.jsxs)(an.Fragment,{children:[(0,an.jsx)(Yn,(0,r.Z)({},u)),(0,an.jsx)(ue,(0,r.Z)({},l))]})}},571:function(n,e,t){"use strict";var r=t(1413),i=t(9439),o=t(7313),a=t(7222),s=t(9491),c=t(3681),u=t(6407),l=t(7534),d=t(6417);e.Z=function(n){var e=o.useState(!1),t=(0,i.Z)(e,2),f=t[0],p=t[1],h=l.Z.omit(n,["tipTitle"]);return(0,d.jsx)(a.Z,{title:n.tipTitle||"\u590d\u5236",children:(0,d.jsx)(s.Z,(0,r.Z)((0,r.Z)({},h),{},{onClick:function(e){if(!f&&n.onClick){var t=n.onClick(e);return!0===t&&p(!0),t}},icon:f?(0,d.jsx)(c.Z,{style:{color:"#52c41a"}}):(0,d.jsx)(u.Z,{}),onMouseLeave:function(){f&&p(!1)}}))})}},3036:function(n,e){"use strict";var t={readAsText:function(n,e,t){t||(t="utf8");var r=new FileReader;r.onload=function(){e(r.result)},r.readAsText(n,t)},download:function(n,e){e||(e="download");var t=URL.createObjectURL(new Blob([n])),r=document.createElement("a");r.href=t,r.setAttribute("download",e),document.body.appendChild(r),r.click(),document.body.removeChild(r)}};e.Z=t},3988:function(n,e){"use strict";var t={underlineToHump:function(n){return n.replace(/_(\w)/g,(function(n,e){return e.toUpperCase()}))},humpToUnderline:function(n){return n.replace(/([A-Z])/g,"_$1").toLowerCase()},isStr:function(n){return"string"===typeof n},isBlank:function(n){return void 0===n||null===n||""===n},copyToClipboard:function(n){var e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.select();var t=document.execCommand("copy");return e.remove(),t}};e.Z=t},2480:function(){}}]);